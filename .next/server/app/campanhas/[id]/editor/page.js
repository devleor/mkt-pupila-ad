(()=>{var e={};e.id=785,e.ids=[785],e.modules={1414:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>l});var r=a(64731),o=a(35006),s=a(53993),n=a(72510),i=a(69521);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef(({className:e,variant:t,size:a,asChild:o=!1,...n},d)=>{let c=o?s.DX:"button";return(0,r.jsx)(c,{className:(0,i.cn)(l({variant:t,size:a,className:e})),ref:d,...n})});d.displayName="Button"},3070:(e,t,a)=>{"use strict";a.d(t,{V:()=>s});var r=a(59604),o=a(2741);let s=(0,r.v)()((0,o.Zr)((e,t)=>({campanhas:[],campanhaAtual:null,adicionarCampanha:t=>{let a=`campanha-${Date.now()}`,r={...t,id:a,criadoEm:new Date().toISOString(),modificadoEm:new Date().toISOString(),assets:[]};return e(e=>({campanhas:[...e.campanhas,r],campanhaAtual:r})),a},atualizarCampanha:(t,a)=>{e(e=>({campanhas:e.campanhas.map(e=>e.id===t?{...e,...a,modificadoEm:new Date().toISOString()}:e),campanhaAtual:e.campanhaAtual?.id===t?{...e.campanhaAtual,...a,modificadoEm:new Date().toISOString()}:e.campanhaAtual}))},removerCampanha:t=>{e(e=>({campanhas:e.campanhas.filter(e=>e.id!==t),campanhaAtual:e.campanhaAtual?.id===t?null:e.campanhaAtual}))},selecionarCampanha:a=>{e({campanhaAtual:t().campanhas.find(e=>e.id===a)||null})},adicionarAsset:(t,a)=>{e(e=>{let r=e.campanhas.map(e=>{let r;if(e.id!==t)return e;let o=e.assets.findIndex(e=>e.plataforma===a.plataforma&&e.formato===a.formato);return o>=0?(r=[...e.assets])[o]=a:r=[...e.assets,a],{...e,assets:r,modificadoEm:new Date().toISOString()}}),o=e.campanhaAtual?.id===t?r.find(e=>e.id===t)||null:e.campanhaAtual;return{campanhas:r,campanhaAtual:o}})},atualizarAsset:(t,a,r,o)=>{e(e=>{let s=e.campanhas.map(e=>{if(e.id!==t)return e;let s=e.assets.map(e=>e.plataforma===a&&e.formato===r?{...e,elementos:o}:e);return{...e,assets:s,modificadoEm:new Date().toISOString()}}),n=e.campanhaAtual?.id===t?s.find(e=>e.id===t)||null:e.campanhaAtual;return{campanhas:s,campanhaAtual:n}})},obterAsset:(e,a,r)=>{let o=t().campanhas.find(t=>t.id===e);if(o)return o.assets.find(e=>e.plataforma===a&&e.formato===r)}}),{name:"campanhas-store"}))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13080:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>m});var r=a(64731),o=a(35006),s=a(69521);let n=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let m=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},18837:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(64731),o=a(35006),s=a(58236),n=a(69521);let i=o.forwardRef(({className:e,...t},a)=>(0,r.jsxs)(s.bL,{ref:a,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,r.jsx)(s.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(s.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(s.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));i.displayName=s.bL.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22179:(e,t,a)=>{"use strict";a.d(t,{S:()=>$});var r=a(64731),o=a(35006),s=a(96488),n=a(97498),i=a(76656),l=a(67891),d=a(65287),c=a(10719),m=a(81298),u="Checkbox",[p,h]=(0,n.A)(u),[x,f]=p(u);function g(e){let{__scopeCheckbox:t,checked:a,children:s,defaultChecked:n,disabled:i,form:d,name:c,onCheckedChange:m,required:p,value:h="on",internal_do_not_use_render:f}=e,[g,v]=(0,l.i)({prop:a,defaultProp:n??!1,onChange:m,caller:u}),[j,y]=o.useState(null),[b,N]=o.useState(null),w=o.useRef(!1),C=!j||!!d||!!j.closest("form"),S={checked:g,disabled:i,setChecked:v,control:j,setControl:y,name:c,form:d,value:h,hasConsumerStoppedPropagationRef:w,required:p,defaultChecked:!k(n)&&n,isFormControl:C,bubbleInput:b,setBubbleInput:N};return(0,r.jsx)(x,{scope:t,...S,children:"function"==typeof f?f(S):s})}var v="CheckboxTrigger",j=o.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},l)=>{let{control:d,value:c,disabled:u,checked:p,required:h,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:j,isFormControl:y,bubbleInput:b}=f(v,e),N=(0,s.s)(l,x),w=o.useRef(p);return o.useEffect(()=>{let e=d?.form;if(e){let t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,g]),(0,r.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":k(p)?"mixed":p,"aria-required":h,"data-state":S(p),"data-disabled":u?"":void 0,disabled:u,value:c,...n,ref:N,onKeyDown:(0,i.m)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.m)(a,e=>{g(e=>!!k(e)||!e),b&&y&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});j.displayName=v;var y=o.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:o,checked:s,defaultChecked:n,required:i,disabled:l,value:d,onCheckedChange:c,form:m,...u}=e;return(0,r.jsx)(g,{__scopeCheckbox:a,checked:s,defaultChecked:n,disabled:l,required:i,onCheckedChange:c,name:o,form:m,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{...u,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(C,{__scopeCheckbox:a})]})})});y.displayName=u;var b="CheckboxIndicator",N=o.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:o,...s}=e,n=f(b,a);return(0,r.jsx)(c.C,{present:o||k(n.checked)||!0===n.checked,children:(0,r.jsx)(m.sG.span,{"data-state":S(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});N.displayName=b;var w="CheckboxBubbleInput",C=o.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:c,required:u,disabled:p,name:h,value:x,form:g,bubbleInput:v,setBubbleInput:j}=f(w,e),y=(0,s.s)(a,j),b=function(e){let t=o.useRef({value:e,previous:e});return o.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(l),N=function(e){let[t,a]=o.useState(void 0);return(0,d.N)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,o;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,o=t.blockSize}else r=e.offsetWidth,o=e.offsetHeight;a({width:r,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),t}(n);o.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(b!==l&&e){let a=new Event("click",{bubbles:t});v.indeterminate=k(l),e.call(v,!k(l)&&l),v.dispatchEvent(a)}},[v,b,l,i]);let C=o.useRef(!k(l)&&l);return(0,r.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??C.current,required:u,disabled:p,name:h,value:x,form:g,...t,tabIndex:-1,ref:y,style:{...t.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function k(e){return"indeterminate"===e}function S(e){return k(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=w;var A=a(95257),E=a(69521);let $=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(y,{ref:a,className:(0,E.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,r.jsx)(N,{className:(0,E.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(A.A,{className:"h-4 w-4"})})}));$.displayName=y.displayName},26414:(e,t,a)=>{Promise.resolve().then(a.bind(a,91934))},27606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(91579),o=a(72148),s=a(41398),n=a.n(s),i=a(7873),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d={children:["",{children:["campanhas",{children:["[id]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,91934)),"/home/devleor/Personal/GitHub/mkt-pupila-ad/app/campanhas/[id]/editor/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,76166)),"/home/devleor/Personal/GitHub/mkt-pupila-ad/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,46130,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,64275,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,97768,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/devleor/Personal/GitHub/mkt-pupila-ad/app/campanhas/[id]/editor/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/campanhas/[id]/editor/page",pathname:"/campanhas/[id]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40454:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>m});var r=a(64731),o=a(35006),s=a(5414),n=a(17243),i=a(51446),l=a(95257),d=a(69521);let c=s.bL;s.YJ;let m=s.WT,u=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(s.l9,{ref:o,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=s.l9.displayName;let p=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})}));p.displayName=s.PP.displayName;let h=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=s.wn.displayName;let x=o.forwardRef(({className:e,children:t,position:a="popper",...o},n)=>(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...o,children:[(0,r.jsx)(p,{}),(0,r.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(h,{})]})}));x.displayName=s.UC.displayName,o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=s.JU.displayName;let f=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(s.q7,{ref:o,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:t})]}));f.displayName=s.q7.displayName,o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=s.wv.displayName},43798:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>i});var r=a(64731),o=a(35006),s=a(31594),n=a(69521);let i=s.bL,l=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));l.displayName=s.B8.displayName;let d=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=s.l9.displayName;let c=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=s.UC.displayName},48315:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>aB});var r=a(64731),o=a(35006),s=a(5777),n=a(43798),i=a(40454),l=a(67646),d=a(1414),c=a(45252);let m=(0,c.A)("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);var u=a(22672),p=a(68412),h=a(32768),x=a(74670),f=a(69521);function g({elemento:e,gridConfig:t,isEditing:a=!1,onClick:s,onPositionChange:n,container:i}){if(!e)return console.error("Tentativa de renderizar elemento nulo ou indefinido"),null;let{tipo:l="desconhecido",conteudo:d={},posicaoGrid:c={x:0,y:0,width:1,height:1},estilo:u={},camada:p=10,id:h="elemento-sem-id"}=e,g=(0,o.useRef)(null),[v,j]=(0,o.useState)(!1),y=(0,o.useRef)({x:0,y:0}),b=(0,o.useRef)({x:[],y:[]}),N=(0,o.useRef)({position:"absolute",left:`${c.x/t.columns*100}%`,top:`${c.y/t.rows*100}%`,width:`${c.width/t.columns*100}%`,height:`${c.height/t.rows*100}%`,zIndex:a&&v?100:p,cursor:a?"move":"default",...u}),w=(0,o.useCallback)(e=>{if(!a||!i||!g.current)return;e.preventDefault(),j(!0),i.getBoundingClientRect();let t=g.current.getBoundingClientRect();y.current={x:e.clientX-t.left,y:e.clientY-t.top}},[a,i]);(0,o.useCallback)(e=>{if(!v||!i||!g.current)return;let a=i.getBoundingClientRect();a.width,t.columns,a.height,t.rows;let r=e.clientX-a.left-y.current.x,o=e.clientY-a.top-y.current.y,s=Math.min(a.width/t.columns*.3,a.height/t.rows*.3);for(let e of b.current.x)if(Math.abs(r-e)<s){r=e;break}for(let e of b.current.y)if(Math.abs(o-e)<s){o=e;break}r=Math.max(0,Math.min(r,a.width-g.current.offsetWidth)),o=Math.max(0,Math.min(o,a.height-g.current.offsetHeight)),g.current.style.left=`${r}px`,g.current.style.top=`${o}px`},[v,i,t.columns,t.rows]),(0,o.useCallback)(()=>{if(!v||!i||!g.current||!n)return;j(!1);let e=i.getBoundingClientRect(),a=e.width/t.columns,r=e.height/t.rows,o=g.current.getBoundingClientRect(),s=o.left-e.left,l=o.top-e.top,d=Math.max(0,Math.min(Math.round(s/a),t.columns-c.width)),m=Math.max(0,Math.min(Math.round(l/r),t.rows-c.height));n(h,{x:d,y:m}),g.current.style.left=`${d/t.columns*100}%`,g.current.style.top=`${m/t.rows*100}%`,g.current.style.width=`${c.width/t.columns*100}%`,g.current.style.height=`${c.height/t.rows*100}%`},[v,i,t,n,h,c.width,c.height]);let C=e=>{switch(e){case"grayscale":return"grayscale(100%)";case"sepia":return"sepia(100%)";case"blur":return"blur(4px)";case"brightness":return"brightness(150%)";case"contrast":return"contrast(200%)";default:return"none"}};return(0,r.jsxs)("div",{ref:g,className:(0,f.cn)("absolute",a&&["border-2 border-dashed transition-colors",v?"border-blue-500 bg-blue-50/20":"border-blue-400",!v&&"bg-white/10"]),style:N.current,onMouseDown:a?w:void 0,children:[(()=>{switch(l){case"logo":return(0,r.jsx)("div",{className:(0,f.cn)("flex items-center justify-center relative w-full h-full opacity-70",v&&""),onClick:s,children:d.src?(0,r.jsx)(x.default,{src:d.src||"/placeholder.svg",alt:"Logo",fill:!0,className:"object-contain w-full h-full",sizes:"100%"}):(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500  rounded-md",children:"Placeholder Logo"})});case"texto":return(0,r.jsx)("div",{className:(0,f.cn)("overflow-hidden w-full h-full",v&&"opacity-70"),style:{fontSize:d.fontSize||"16px",fontWeight:d.fontWeight||"normal",color:d.color||"#000000",textAlign:d.textAlign||"left"},onClick:s,children:d.texto||"Texto placeholder"});case"imagem":return(0,r.jsx)("div",{className:(0,f.cn)("overflow-hidden relative w-full h-full",v&&"opacity-70"),onClick:s,children:d.src?(0,r.jsx)(x.default,{src:d.src||"/placeholder.svg",alt:d.alt||"Imagem",fill:!0,className:"object-cover w-full h-full",sizes:"100%",priority:!0}):(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500 bg-gray-100 rounded-md",children:"Placeholder Imagem"})});case"imagemPersonalizada":return(0,r.jsx)("div",{className:(0,f.cn)("overflow-hidden relative w-full h-full",v&&"opacity-70"),onClick:s,style:{borderRadius:d.borda&&d.bordaRadius||"0px",border:d.borda?"2px solid #3b82f6":"none"},children:d.src?(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)(x.default,{src:d.src||"/placeholder.svg",alt:d.alt||"Imagem Personalizada",fill:!0,className:"object-cover w-full h-full",sizes:"100%",priority:!0,style:{opacity:(d.opacidade||100)/100,filter:C(d.filtro||"")}})}):(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500 bg-gray-100 rounded-md",children:"Imagem Personalizada"})});case"cta":return(0,r.jsx)("div",{className:(0,f.cn)("flex items-center justify-center w-full h-full",v&&"opacity-70"),onClick:s,children:(0,r.jsx)("div",{className:"px-4 py-2 text-center text-white rounded-md",style:{backgroundColor:d.backgroundColor||"#000000",fontSize:d.fontSize||"16px"},children:d.texto||"Chamada para A\xe7\xe3o"})});default:return(0,r.jsx)("div",{className:(0,f.cn)("flex items-center justify-center text-gray-500 text-sm w-full h-full",v&&"opacity-70"),onClick:s,children:"Elemento Desconhecido"})}})(),a&&(0,r.jsx)("div",{className:"absolute top-0 right-0 p-1 bg-blue-500 text-white rounded-bl-md opacity-70",children:(0,r.jsx)(m,{size:14})})]})}function v({formatConfig:e,elementos:t,onElementosChange:a,editMode:s=!1}){let[n,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(null),x=(0,o.useRef)(null),[f,v]=(0,o.useState)({width:0,height:0}),{width:j,height:y,grid:b}=e;b.columns,b.rows;let N=(e,r)=>{a&&a(t.map(t=>t.id===e?{...t,posicaoGrid:{...t.posicaoGrid,x:Math.max(0,Math.min(r.x,b.columns-t.posicaoGrid.width)),y:Math.max(0,Math.min(r.y,b.rows-t.posicaoGrid.height))}}:t))},w=e=>{s&&c(e)},C=[...t].sort((e,t)=>(e.camada||10)-(t.camada||10));return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-full p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Preview"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[s&&(0,r.jsxs)("div",{className:"mr-2 text-sm text-gray-500 flex items-center gap-2",children:[(0,r.jsx)(m,{size:16,className:"text-blue-500"}),(0,r.jsx)("span",{children:"Arraste os elementos para posicion\xe1-los"})]}),(0,r.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>i(!n),children:[n?(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}):(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),n?"Ocultar Grid":"Mostrar Grid"]})]})]}),(0,r.jsxs)("div",{ref:x,className:"relative  w-full h-full overflow-hidden bg-white border rounded-md shadow-sm",style:{aspectRatio:`${j} / ${y}`,width:"100%",margin:"0 auto"},children:[C.map(e=>(0,r.jsx)(g,{elemento:e,gridConfig:b,isEditing:s,onClick:()=>w(e.id),onPositionChange:N,container:x.current},e.id)),n&&(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-20",children:[Array.from({length:b.columns+1}).map((e,t)=>(0,r.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-blue-300",style:{left:`${t/b.columns*100}%`,opacity:t%2==0?.4:.2,borderStyle:t%2==0?"solid":"dashed"}},`v-${t}`)),Array.from({length:b.rows+1}).map((e,t)=>(0,r.jsx)("div",{className:"absolute left-0 right-0 border-t border-blue-300",style:{top:`${t/b.rows*100}%`,opacity:t%2==0?.4:.2,borderStyle:t%2==0?"solid":"dashed"}},`h-${t}`))]})]}),(0,r.jsxs)("div",{className:"p-3 text-sm text-center text-gray-500 border rounded-md bg-gray-50",children:[(0,r.jsx)(h.A,{className:"inline-block w-4 h-4 mr-1"}),e.nome,": ",j," \xd7 ",y," pixels"]})]})}var j=a(13080),y=a(97244),b=a(18837),N=a(30926);let w=(0,c.A)("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);var C=a(78152),k=a(28896),S=a(20849),A=a(54203),E=a(22179),$=a(76656),D=a(96488),M=a(97498),R=a(68063),z=a(67891),F=a(3373),I=a(81298),O=a(91663),P="focusScope.autoFocusOnMount",G="focusScope.autoFocusOnUnmount",T={bubbles:!1,cancelable:!0},L=o.forwardRef((e,t)=>{let{loop:a=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...l}=e,[d,c]=o.useState(null),m=(0,O.c)(n),u=(0,O.c)(i),p=o.useRef(null),h=(0,D.s)(t,e=>c(e)),x=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(s){let e=function(e){if(x.paused||!d)return;let t=e.target;d.contains(t)?p.current=t:J(p.current,{select:!0})},t=function(e){if(x.paused||!d)return;let t=e.relatedTarget;null===t||d.contains(t)||J(p.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let a=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&J(d)});return d&&a.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}},[s,d,x.paused]),o.useEffect(()=>{if(d){V.add(x);let e=document.activeElement;if(!d.contains(e)){let t=new CustomEvent(P,T);d.addEventListener(P,m),d.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let a=document.activeElement;for(let r of e)if(J(r,{select:t}),document.activeElement!==a)return}(B(d).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&J(d))}return()=>{d.removeEventListener(P,m),setTimeout(()=>{let t=new CustomEvent(G,T);d.addEventListener(G,u),d.dispatchEvent(t),t.defaultPrevented||J(e??document.body,{select:!0}),d.removeEventListener(G,u),V.remove(x)},0)}}},[d,m,u,x]);let f=o.useCallback(e=>{if(!a&&!s||x.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){let t=e.currentTarget,[o,s]=function(e){let t=B(e);return[_(t,e),_(t.reverse(),e)]}(t);o&&s?e.shiftKey||r!==s?e.shiftKey&&r===o&&(e.preventDefault(),a&&J(s,{select:!0})):(e.preventDefault(),a&&J(o,{select:!0})):r===t&&e.preventDefault()}},[a,s,x.paused]);return(0,r.jsx)(I.sG.div,{tabIndex:-1,...l,ref:h,onKeyDown:f})});function B(e){let t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function _(e,t){for(let a of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(a,{upTo:t}))return a}function J(e,{select:t=!1}={}){if(e&&e.focus){var a;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(a=e)instanceof HTMLInputElement&&"select"in a&&t&&e.select()}}L.displayName="FocusScope";var V=function(){let e=[];return{add(t){let a=e[0];t!==a&&a?.pause(),(e=q(e,t)).unshift(t)},remove(t){e=q(e,t),e[0]?.resume()}}}();function q(e,t){let a=[...e],r=a.indexOf(t);return -1!==r&&a.splice(r,1),a}var W=a(67019),H=a(10719),U=0;function X(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Z=a(70170),Y=a(26191),K=a(17949),Q="Dialog",[ee,et]=(0,M.A)(Q),[ea,er]=ee(Q),eo=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:i,modal:l=!0}=e,d=o.useRef(null),c=o.useRef(null),[m,u]=(0,z.i)({prop:s,defaultProp:n??!1,onChange:i,caller:Q});return(0,r.jsx)(ea,{scope:t,triggerRef:d,contentRef:c,contentId:(0,R.B)(),titleId:(0,R.B)(),descriptionId:(0,R.B)(),open:m,onOpenChange:u,onOpenToggle:o.useCallback(()=>u(e=>!e),[u]),modal:l,children:a})};eo.displayName=Q;var es="DialogTrigger",en=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=er(es,a),n=(0,D.s)(t,s.triggerRef);return(0,r.jsx)(I.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eS(s.open),...o,ref:n,onClick:(0,$.m)(e.onClick,s.onOpenToggle)})});en.displayName=es;var ei="DialogPortal",[el,ed]=ee(ei,{forceMount:void 0}),ec=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:n}=e,i=er(ei,t);return(0,r.jsx)(el,{scope:t,forceMount:a,children:o.Children.map(s,e=>(0,r.jsx)(H.C,{present:a||i.open,children:(0,r.jsx)(W.Z,{asChild:!0,container:n,children:e})}))})};ec.displayName=ei;var em="DialogOverlay",eu=o.forwardRef((e,t)=>{let a=ed(em,e.__scopeDialog),{forceMount:o=a.forceMount,...s}=e,n=er(em,e.__scopeDialog);return n.modal?(0,r.jsx)(H.C,{present:o||n.open,children:(0,r.jsx)(eh,{...s,ref:t})}):null});eu.displayName=em;var ep=(0,K.TL)("DialogOverlay.RemoveScroll"),eh=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=er(em,a);return(0,r.jsx)(Z.A,{as:ep,allowPinchZoom:!0,shards:[s.contentRef],children:(0,r.jsx)(I.sG.div,{"data-state":eS(s.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),ex="DialogContent",ef=o.forwardRef((e,t)=>{let a=ed(ex,e.__scopeDialog),{forceMount:o=a.forceMount,...s}=e,n=er(ex,e.__scopeDialog);return(0,r.jsx)(H.C,{present:o||n.open,children:n.modal?(0,r.jsx)(eg,{...s,ref:t}):(0,r.jsx)(ev,{...s,ref:t})})});ef.displayName=ex;var eg=o.forwardRef((e,t)=>{let a=er(ex,e.__scopeDialog),s=o.useRef(null),n=(0,D.s)(t,a.contentRef,s);return o.useEffect(()=>{let e=s.current;if(e)return(0,Y.Eq)(e)},[]),(0,r.jsx)(ej,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,$.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,$.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,$.m)(e.onFocusOutside,e=>e.preventDefault())})}),ev=o.forwardRef((e,t)=>{let a=er(ex,e.__scopeDialog),s=o.useRef(!1),n=o.useRef(!1);return(0,r.jsx)(ej,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),ej=o.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:i,...l}=e,d=er(ex,a),c=o.useRef(null),m=(0,D.s)(t,c);return o.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??X()),document.body.insertAdjacentElement("beforeend",e[1]??X()),U++,()=>{1===U&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),U--}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,r.jsx)(F.qW,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":eS(d.open),...l,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eD,{titleId:d.titleId}),(0,r.jsx)(eM,{contentRef:c,descriptionId:d.descriptionId})]})]})}),ey="DialogTitle",eb=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=er(ey,a);return(0,r.jsx)(I.sG.h2,{id:s.titleId,...o,ref:t})});eb.displayName=ey;var eN="DialogDescription",ew=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=er(eN,a);return(0,r.jsx)(I.sG.p,{id:s.descriptionId,...o,ref:t})});ew.displayName=eN;var eC="DialogClose",ek=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=er(eC,a);return(0,r.jsx)(I.sG.button,{type:"button",...o,ref:t,onClick:(0,$.m)(e.onClick,()=>s.onOpenChange(!1))})});function eS(e){return e?"open":"closed"}ek.displayName=eC;var eA="DialogTitleWarning",[eE,e$]=(0,M.q)(eA,{contentName:ex,titleName:ey,docsSlug:"dialog"}),eD=({titleId:e})=>{let t=e$(eA),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return o.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},eM=({contentRef:e,descriptionId:t})=>{let a=e$("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return o.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&!document.getElementById(t)&&console.warn(r)},[r,e,t]),null},eR=a(96133);let ez=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(eu,{ref:a,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ez.displayName=eu.displayName;let eF=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(ec,{children:[(0,r.jsx)(ez,{}),(0,r.jsxs)(ef,{ref:o,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(ek,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(eR.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Fechar"})]})]})]}));eF.displayName=ef.displayName;let eI=({className:e,...t})=>(0,r.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});eI.displayName="DialogHeader";let eO=({className:e,...t})=>(0,r.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eO.displayName="DialogFooter";let eP=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(eb,{ref:a,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));eP.displayName=eb.displayName;let eG=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(ew,{ref:a,className:(0,f.cn)("text-sm text-muted-foreground",e),...t}));eG.displayName=ew.displayName;let eT=(0,c.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function eL({onSelectImage:e}){let[t,a]=(0,o.useState)(""),s=[{id:"1",url:"https://images.unsplash.com/photo-1682687220063-4742bd7fd538?q=80&w=1000",alt:"Montanhas ao p\xf4r do sol",tags:["natureza","paisagem","montanhas"]},{id:"2",url:"https://images.unsplash.com/photo-1682687220208-22d7a2543e88?q=80&w=1000",alt:"Praia tropical",tags:["natureza","praia","mar","tropical"]},{id:"3",url:"https://images.unsplash.com/photo-1682687220923-c58b9a4592ea?q=80&w=1000",alt:"Cidade \xe0 noite",tags:["cidade","urbano","noite","luzes"]},{id:"4",url:"https://images.unsplash.com/photo-1682687220067-dced9a881b56?q=80&w=1000",alt:"Floresta densa",tags:["natureza","floresta","\xe1rvores","verde"]},{id:"5",url:"https://images.unsplash.com/photo-1682687220063-4742bd7fd538?q=80&w=1000",alt:"Deserto ao entardecer",tags:["natureza","deserto","areia","p\xf4r do sol"]},{id:"6",url:"https://images.unsplash.com/photo-1682687220208-22d7a2543e88?q=80&w=1000",alt:"Lago com montanhas",tags:["natureza","lago","montanhas","reflexo"]}],n=t?s.filter(e=>e.alt.toLowerCase().includes(t.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(t.toLowerCase()))):s;return(0,r.jsxs)(eo,{children:[(0,r.jsx)(en,{asChild:!0,children:(0,r.jsx)(d.$,{variant:"outline",className:"w-full",children:"Selecionar da Biblioteca"})}),(0,r.jsxs)(eF,{className:"sm:max-w-[700px]",children:[(0,r.jsx)(eI,{children:(0,r.jsx)(eP,{children:"Biblioteca de Imagens"})}),(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)(eT,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,r.jsx)(y.p,{placeholder:"Buscar imagens...",className:"pl-8",value:t,onChange:e=>a(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-1",children:[n.map(t=>(0,r.jsx)("div",{className:"relative aspect-square cursor-pointer overflow-hidden rounded-md border hover:border-blue-500 transition-all",onClick:()=>{e(t.url)},children:(0,r.jsx)("img",{src:t.url||"/placeholder.svg",alt:t.alt,className:"h-full w-full object-cover"})},t.id)),0===n.length&&(0,r.jsxs)("div",{className:"col-span-3 py-8 text-center text-gray-500",children:['Nenhuma imagem encontrada para "',t,'"']})]})]})]})}function eB({formatConfig:e,elementos:t,setElementos:a}){let[s,c]=(0,o.useState)(null),m=null!==s?t[s]:null,u=e=>{a([...t,{id:`elemento-${Date.now()}`,tipo:e,posicaoGrid:{x:1,y:1,width:2,height:2},conteudo:p(e)}]),c(t.length)},p=e=>{switch(e){case"logo":return{src:""};case"texto":return{texto:"Texto de Exemplo",fontSize:"16px",color:"#000000",textAlign:"left"};case"imagem":return{src:"",alt:"Imagem"};case"imagemPersonalizada":return{src:"",alt:"Imagem Personalizada",filtro:"nenhum",opacidade:100,borda:!1,bordaRadius:"0px"};case"cta":return{texto:"Saiba Mais",backgroundColor:"#0070f3",fontSize:"16px"};default:return{}}},h=e=>{if(null===s)return;let r=[...t];r[s]={...r[s],...e},a(r)},x=e=>{if(null===s)return;let r=[...t];r[s]={...r[s],conteudo:{...r[s].conteudo,...e}},a(r)},f=e=>{if(null===s)return;let r=[...t];r[s]={...r[s],posicaoGrid:{...r[s].posicaoGrid,...e}},a(r)},g=()=>{null!==s&&(a(t.filter((e,t)=>t!==s)),c(null))},$=()=>{if(null===s)return;let r=t[s];a([...t,{...JSON.parse(JSON.stringify(r)),id:`elemento-${Date.now()}`,posicaoGrid:{...r.posicaoGrid,x:Math.min(r.posicaoGrid.x+1,e.grid.columns-r.posicaoGrid.width)}}]),c(t.length)};return(0,r.jsxs)("div",{className:"gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-4",children:(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Elementos"})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>u("logo"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"})," Logo"]}),(0,r.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>u("texto"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"})," Texto"]}),(0,r.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>u("imagem"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"})," Imagem"]}),(0,r.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>u("imagemPersonalizada"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"})," Imagem Personalizada"]}),(0,r.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>u("cta"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"})," CTA"]})]}),(0,r.jsx)("div",{className:"border rounded-md divide-y",children:0===t.length?(0,r.jsx)("div",{className:"p-4 text-sm text-center text-gray-500",children:"Nenhum elemento adicionado. Adicione elementos usando os bot\xf5es acima."}):t.map((e,o)=>(0,r.jsxs)("div",{className:`p-3 cursor-pointer hover:bg-gray-50 ${s===o?"bg-blue-50":""}`,onClick:()=>c(o),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(d.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation();let r=[...t],s=r[o];r[o]={...s,camada:Math.min(100,(s.camada||10)+5)},a(r)},title:"Trazer para frente",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-bring-to-front",children:[(0,r.jsx)("rect",{x:"8",y:"8",width:"8",height:"8",rx:"2"}),(0,r.jsx)("path",{d:"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2"}),(0,r.jsx)("path",{d:"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2"})]})}),(0,r.jsx)(d.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation();let r=[...t],s=r[o];r[o]={...s,camada:Math.max(1,(s.camada||10)-5)},a(r)},title:"Enviar para tr\xe1s",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send-to-back",children:[(0,r.jsx)("rect",{x:"14",y:"14",width:"8",height:"8",rx:"2"}),(0,r.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"2"}),(0,r.jsx)("path",{d:"M7 14v1a2 2 0 0 0 2 2h1"}),(0,r.jsx)("path",{d:"M14 7h1a2 2 0 0 1 2 2v1"})]})}),(0,r.jsx)(d.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation(),$()},children:(0,r.jsx)(C.A,{className:"w-4 h-4"})}),(0,r.jsx)(d.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation(),g()},children:(0,r.jsx)(k.A,{className:"w-4 h-4"})})]})]}),"texto"===e.tipo&&(0,r.jsx)("div",{className:"mt-1 text-sm text-gray-500 truncate",children:e.conteudo.texto||"Texto"}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-400 flex justify-between",children:[(0,r.jsxs)("span",{children:["Posi\xe7\xe3o: x:",e.posicaoGrid.x,", y:",e.posicaoGrid.y]}),(0,r.jsxs)("span",{children:["Camada: ",e.camada||10]})]})]},e.id||o))})]})})]})}),(0,r.jsx)("div",{className:"lg:col-span-8",children:(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsx)(j.ZB,{children:"Posicionamento Direto"})}),(0,r.jsxs)(j.Wu,{children:[(0,r.jsx)("div",{className:"mb-2 text-sm text-gray-500",children:"Arraste elementos para posicion\xe1-los visualmente no grid. O grid est\xe1 vis\xedvel para facilitar o posicionamento."}),(0,r.jsx)("div",{className:"h-94 overflow-auto border rounded-lg",children:(0,r.jsx)(v,{formatConfig:e,elementos:t,onElementosChange:a,editMode:!0})})]})]}),m?(0,r.jsxs)(j.Zp,{children:[(0,r.jsx)(j.aR,{children:(0,r.jsxs)(j.ZB,{children:["Editar ",m.tipo]})}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)(n.tU,{defaultValue:"conteudo",children:[(0,r.jsxs)(n.j7,{className:"mb-4",children:[(0,r.jsx)(n.Xi,{value:"conteudo",children:"Conte\xfado"}),(0,r.jsx)(n.Xi,{value:"posicao",children:"Posi\xe7\xe3o"})]}),(0,r.jsxs)(n.av,{value:"conteudo",children:["texto"===m.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"texto",children:"Conte\xfado do Texto"}),(0,r.jsx)(y.p,{id:"texto",value:m.conteudo.texto||"",onChange:e=>x({texto:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"fontSize",children:"Tamanho da Fonte"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.p,{id:"fontSize",value:m.conteudo.fontSize||"16px",onChange:e=>x({fontSize:e.target.value}),className:"w-24"}),(0,r.jsx)(b.A,{defaultValue:[Number.parseInt(m.conteudo.fontSize)||16],min:8,max:72,step:1,onValueChange:e=>x({fontSize:`${e[0]}px`}),className:"flex-1"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"textColor",children:"Cor do Texto"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.p,{id:"textColor",type:"color",value:m.conteudo.color||"#000000",onChange:e=>x({color:e.target.value}),className:"w-12 h-8 p-1"}),(0,r.jsx)(y.p,{value:m.conteudo.color||"#000000",onChange:e=>x({color:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"textAlign",children:"Alinhamento do Texto"}),(0,r.jsxs)(i.l6,{value:m.conteudo.textAlign||"left",onValueChange:e=>x({textAlign:e}),children:[(0,r.jsx)(i.bq,{id:"textAlign",children:(0,r.jsx)(i.yv,{placeholder:"Selecione o alinhamento"})}),(0,r.jsxs)(i.gC,{children:[(0,r.jsx)(i.eb,{value:"left",children:"Esquerda"}),(0,r.jsx)(i.eb,{value:"center",children:"Centro"}),(0,r.jsx)(i.eb,{value:"right",children:"Direita"})]})]})]})]}),"imagem"===m.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imageSrc",children:"URL da Imagem"}),(0,r.jsx)(y.p,{id:"imageSrc",value:m.conteudo.src||"",onChange:e=>x({src:e.target.value}),placeholder:"https://exemplo.com/imagem.jpg"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imageAlt",children:"Texto Alternativo"}),(0,r.jsx)(y.p,{id:"imageAlt",value:m.conteudo.alt||"",onChange:e=>x({alt:e.target.value}),placeholder:"Descri\xe7\xe3o da imagem"})]})]}),"imagemPersonalizada"===m.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imagemSrc",children:"URL da Imagem"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(y.p,{id:"imagemSrc",value:m.conteudo.src||"",onChange:e=>x({src:e.target.value}),placeholder:"https://exemplo.com/imagem.jpg",className:"flex-1"}),(0,r.jsx)(eL,{onSelectImage:e=>x({src:e})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imagemAlt",children:"Texto Alternativo"}),(0,r.jsx)(y.p,{id:"imagemAlt",value:m.conteudo.alt||"",onChange:e=>x({alt:e.target.value}),placeholder:"Descri\xe7\xe3o da imagem"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imagemOpacidade",children:"Opacidade"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(b.A,{id:"imagemOpacidade",defaultValue:[m.conteudo.opacidade||100],min:0,max:100,step:1,onValueChange:e=>x({opacidade:e[0]}),className:"flex-1"}),(0,r.jsxs)("span",{className:"w-12 text-center",children:[m.conteudo.opacidade||100,"%"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imagemFiltro",children:"Filtro"}),(0,r.jsxs)(i.l6,{value:m.conteudo.filtro||"nenhum",onValueChange:e=>x({filtro:e}),children:[(0,r.jsx)(i.bq,{id:"imagemFiltro",children:(0,r.jsx)(i.yv,{placeholder:"Selecione um filtro"})}),(0,r.jsxs)(i.gC,{children:[(0,r.jsx)(i.eb,{value:"nenhum",children:"Nenhum"}),(0,r.jsx)(i.eb,{value:"grayscale",children:"Preto e Branco"}),(0,r.jsx)(i.eb,{value:"sepia",children:"S\xe9pia"}),(0,r.jsx)(i.eb,{value:"blur",children:"Desfoque"}),(0,r.jsx)(i.eb,{value:"brightness",children:"Brilho"}),(0,r.jsx)(i.eb,{value:"contrast",children:"Contraste"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,r.jsx)(E.S,{id:"imagemBorda",checked:m.conteudo.borda||!1,onCheckedChange:e=>x({borda:e})}),(0,r.jsx)(l.J,{htmlFor:"imagemBorda",className:"cursor-pointer",children:"Adicionar borda"})]}),m.conteudo.borda&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"imagemBordaRadius",children:"Arredondamento da borda"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.p,{id:"imagemBordaRadius",value:m.conteudo.bordaRadius||"0px",onChange:e=>x({bordaRadius:e.target.value}),className:"w-24"}),(0,r.jsx)(b.A,{defaultValue:[Number.parseInt(m.conteudo.bordaRadius)||0],min:0,max:50,step:1,onValueChange:e=>x({bordaRadius:`${e[0]}px`}),className:"flex-1"})]})]})]}),"logo"===m.tipo&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"logoSrc",children:"URL do Logo"}),(0,r.jsx)(y.p,{id:"logoSrc",value:m.conteudo.src||"",onChange:e=>x({src:e.target.value}),placeholder:"https://exemplo.com/logo.png"})]})}),"cta"===m.tipo&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"ctaText",children:"Texto do Bot\xe3o"}),(0,r.jsx)(y.p,{id:"ctaText",value:m.conteudo.texto||"",onChange:e=>x({texto:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"ctaColor",children:"Cor do Bot\xe3o"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.p,{id:"ctaColor",type:"color",value:m.conteudo.backgroundColor||"#0070f3",onChange:e=>x({backgroundColor:e.target.value}),className:"w-12 h-8 p-1"}),(0,r.jsx)(y.p,{value:m.conteudo.backgroundColor||"#0070f3",onChange:e=>x({backgroundColor:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"ctaFontSize",children:"Tamanho da Fonte"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.p,{id:"ctaFontSize",value:m.conteudo.fontSize||"16px",onChange:e=>x({fontSize:e.target.value}),className:"w-24"}),(0,r.jsx)(b.A,{defaultValue:[Number.parseInt(m.conteudo.fontSize)||16],min:8,max:32,step:1,onValueChange:e=>x({fontSize:`${e[0]}px`}),className:"flex-1"})]})]})]})]}),(0,r.jsx)(n.av,{value:"posicao",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"gridX",children:"Posi\xe7\xe3o X"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({x:Math.max(0,m.posicaoGrid.x-1)}),disabled:m.posicaoGrid.x<=0,children:(0,r.jsx)(S.A,{className:"w-4 h-4 rotate-180"})}),(0,r.jsx)(y.p,{id:"gridX",type:"number",min:0,max:e.grid.columns-m.posicaoGrid.width,value:m.posicaoGrid.x,onChange:e=>f({x:Number.parseInt(e.target.value)||0})}),(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({x:Math.min(e.grid.columns-m.posicaoGrid.width,m.posicaoGrid.x+1)}),disabled:m.posicaoGrid.x>=e.grid.columns-m.posicaoGrid.width,children:(0,r.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"gridY",children:"Posi\xe7\xe3o Y"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({y:Math.max(0,m.posicaoGrid.y-1)}),disabled:m.posicaoGrid.y<=0,children:(0,r.jsx)(A.A,{className:"w-4 h-4 rotate-180"})}),(0,r.jsx)(y.p,{id:"gridY",type:"number",min:0,max:e.grid.rows-m.posicaoGrid.height,value:m.posicaoGrid.y,onChange:e=>f({y:Number.parseInt(e.target.value)||0})}),(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({y:Math.min(e.grid.rows-m.posicaoGrid.height,m.posicaoGrid.y+1)}),disabled:m.posicaoGrid.y>=e.grid.rows-m.posicaoGrid.height,children:(0,r.jsx)(A.A,{className:"w-4 h-4"})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"gridWidth",children:"Largura (c\xe9lulas)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({width:Math.max(1,m.posicaoGrid.width-1)}),disabled:m.posicaoGrid.width<=1,children:(0,r.jsx)(S.A,{className:"w-4 h-4 rotate-180"})}),(0,r.jsx)(y.p,{id:"gridWidth",type:"number",min:1,max:e.grid.columns-m.posicaoGrid.x,value:m.posicaoGrid.width,onChange:e=>f({width:Number.parseInt(e.target.value)||1})}),(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({width:Math.min(e.grid.columns-m.posicaoGrid.x,m.posicaoGrid.width+1)}),disabled:m.posicaoGrid.width>=e.grid.columns-m.posicaoGrid.x,children:(0,r.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"gridHeight",children:"Altura (c\xe9lulas)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({height:Math.max(1,m.posicaoGrid.height-1)}),disabled:m.posicaoGrid.height<=1,children:(0,r.jsx)(A.A,{className:"w-4 h-4 rotate-180"})}),(0,r.jsx)(y.p,{id:"gridHeight",type:"number",min:1,max:e.grid.rows-m.posicaoGrid.y,value:m.posicaoGrid.height,onChange:e=>f({height:Number.parseInt(e.target.value)||1})}),(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>f({height:Math.min(e.grid.rows-m.posicaoGrid.y,m.posicaoGrid.height+1)}),disabled:m.posicaoGrid.height>=e.grid.rows-m.posicaoGrid.y,children:(0,r.jsx)(A.A,{className:"w-4 h-4"})})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"camada",children:"Camada (Z-Index)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>h({camada:Math.max(1,(m.camada||10)-1)}),title:"Enviar para tr\xe1s",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send-to-back",children:[(0,r.jsx)("rect",{x:"14",y:"14",width:"8",height:"8",rx:"2"}),(0,r.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"2"}),(0,r.jsx)("path",{d:"M7 14v1a2 2 0 0 0 2 2h1"}),(0,r.jsx)("path",{d:"M14 7h1a2 2 0 0 1 2 2v1"})]})}),(0,r.jsx)(y.p,{id:"camada",type:"number",min:1,max:100,value:m.camada||10,onChange:e=>h({camada:Number.parseInt(e.target.value)||10})}),(0,r.jsx)(d.$,{size:"icon",variant:"outline",onClick:()=>h({camada:Math.min(100,(m.camada||10)+1)}),title:"Trazer para frente",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-bring-to-front",children:[(0,r.jsx)("rect",{x:"8",y:"8",width:"8",height:"8",rx:"2"}),(0,r.jsx)("path",{d:"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2"}),(0,r.jsx)("path",{d:"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2"})]})})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Valores maiores trazem o elemento para frente, valores menores enviam para tr\xe1s."})]})]})})]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full p-8 text-center border rounded-lg",children:(0,r.jsxs)("div",{className:"max-w-md space-y-2",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Nenhum Elemento Selecionado"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Selecione um elemento da lista \xe0 esquerda para editar suas propriedades, ou adicione um novo elemento."})]})})]})})]})}var e_=a(93811),eJ=a(84233),eV=a(33297);function eq({plataforma:e,formato:t,formatConfig:a,elementos:s}){let[n,i]=(0,o.useState)(!1),l=async()=>{if(!a)return;i(!0),await new Promise(e=>setTimeout(e,1500)),console.log("Exportando pe\xe7a:",{plataforma:e,formato:t,dimensoes:`${a.width}x${a.height}`,elementos:s.length}),i(!1);let r=document.createElement("a");r.href="#",r.download=`${e}-${t}-peca.png`,r.click()};return(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{children:"Exportar Pe\xe7a"}),(0,r.jsx)(j.BT,{children:"Gere e baixe sua pe\xe7a gr\xe1fica"})]}),(0,r.jsx)(j.Wu,{children:a?(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("div",{className:"p-3 text-sm border rounded-md bg-gray-50",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium",children:"Plataforma:"})}),(0,r.jsx)("div",{className:"capitalize",children:e}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium",children:"Formato:"})}),(0,r.jsx)("div",{children:t}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium",children:"Dimens\xf5es:"})}),(0,r.jsxs)("div",{children:[a.width," \xd7 ",a.height,"px"]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium",children:"Elementos:"})}),(0,r.jsx)("div",{children:s.length})]})})}):(0,r.jsx)("div",{className:"text-sm text-center text-gray-500",children:"Selecione uma plataforma e formato para habilitar a exporta\xe7\xe3o"})}),(0,r.jsxs)(j.wL,{className:"flex flex-col space-y-2",children:[(0,r.jsx)(d.$,{className:"w-full",onClick:l,disabled:!a||n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e_.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eJ.A,{className:"w-4 h-4 mr-2"}),"Exportar Pe\xe7a"]})}),(0,r.jsxs)(d.$,{variant:"outline",className:"w-full",disabled:!a||n,children:[(0,r.jsx)(eV.A,{className:"w-4 h-4 mr-2"}),"Compartilhar Pe\xe7a"]})]})]})}var eW=a(59604),eH=a(2741);let eU=(0,eW.v)()((0,eH.Zr)(e=>({elementos:[],versoes:[],setElementos:t=>e({elementos:t}),resetElementos:(t=[])=>e({elementos:Array.isArray(t)?t:[]}),salvarVersao:t=>e(e=>({versoes:[t,...e.versoes].slice(0,20)})),carregarVersao:t=>e({elementos:[...t.elementos]})}),{name:"pecas-store"})),eX=(0,c.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),eZ=(0,c.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function eY(){let{versoes:e,carregarVersao:t}=eU(),[a,s]=(0,o.useState)(null),n=e=>{let t=new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},i=e=>{t(e)};return(0,r.jsx)(j.Zp,{children:(0,r.jsxs)(j.Wu,{className:"p-4",children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-medium",children:"Hist\xf3rico de Vers\xf5es"}),(0,r.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:0===e.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Nenhuma vers\xe3o salva ainda."}):e.map((t,o)=>(0,r.jsxs)("div",{className:"p-3 border rounded-md hover:bg-gray-50 cursor-pointer",onClick:()=>s(a===t.timestamp?null:t.timestamp),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(eX,{className:"w-4 h-4 text-gray-500"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Vers\xe3o ",e.length-o]})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:n(t.timestamp)})]}),a===t.timestamp&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 mb-3",children:[(0,r.jsx)("div",{children:"Plataforma:"}),(0,r.jsx)("div",{className:"capitalize",children:t.plataforma}),(0,r.jsx)("div",{children:"Formato:"}),(0,r.jsx)("div",{children:t.formato}),(0,r.jsx)("div",{children:"Elementos:"}),(0,r.jsx)("div",{children:t.elementos.length})]}),(0,r.jsxs)(d.$,{size:"sm",className:"w-full",onClick:e=>{e.stopPropagation(),i(t)},children:[(0,r.jsx)(eZ,{className:"w-3 h-3 mr-2"}),"Carregar esta vers\xe3o"]})]})]},t.timestamp))})]})})}let eK=(0,c.A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),eQ=(0,c.A)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);function e0({formatConfig:e}){let[t,a]=(0,o.useState)(!1),{width:s,height:n,nome:i}=e,l=s/n,c=n>s,m=.1>Math.abs(l-1),u=l>2,p=m?{width:"120px",height:"120px",className:"bg-blue-100 border border-blue-300 rounded flex items-center justify-center"}:c?{width:`${120*l}px`,height:"120px",className:"bg-green-100 border border-green-300 rounded flex items-center justify-center"}:u?{width:"120px",height:`${120/l}px`,className:"bg-purple-100 border border-purple-300 rounded flex items-center justify-center"}:{width:"120px",height:`${120/l}px`,className:"bg-blue-100 border border-blue-300 rounded flex items-center justify-center"},h=()=>m?"1:1":c?.05>Math.abs(l-.5625)?"9:16":.05>Math.abs(l-.75)?"3:4":`${Math.round(100*l)}:100`:u?.1>Math.abs(l-3.2)?"16:5":.1>Math.abs(l-4)?"4:1":`${Math.round(10*l)}:10`:.05>Math.abs(l-1.78)?"16:9":.05>Math.abs(l-1.33)?"4:3":`${Math.round(10*l)}:10`;return(0,r.jsxs)("div",{className:"mt-4 p-3 border rounded-md bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:"Visualiza\xe7\xe3o do Formato"}),(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>a(!t),children:t?(0,r.jsx)(eK,{size:14}):(0,r.jsx)(eQ,{size:14})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:p.className,style:{width:p.width,height:p.height},children:(0,r.jsx)("span",{className:"text-xs text-center px-1 truncate",children:h()})}),t&&(0,r.jsxs)("div",{className:"mt-3 text-xs text-gray-500 space-y-1 w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Formato:"}),(0,r.jsx)("span",{className:"font-medium",children:i})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Dimens\xf5es:"}),(0,r.jsxs)("span",{className:"font-medium",children:[s," \xd7 ",n,"px"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Propor\xe7\xe3o:"}),(0,r.jsxs)("span",{className:"font-medium",children:[h()," (",l.toFixed(2),":1)"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Orienta\xe7\xe3o:"}),(0,r.jsx)("span",{className:"font-medium",children:m?"Quadrado":c?"Vertical":u?"Banner":"Horizontal"})]})]})]})]})}var e1=a(18319);function e2({formatConfig:e,children:t,className:a=""}){let[s,n]=(0,o.useState)(!1),i=(0,o.useRef)(null),[l,c]=(0,o.useState)({width:0,height:0}),{width:m,height:u,nome:p}=e,h=m/u;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-2 right-2 z-30",children:(0,r.jsx)(d.$,{variant:"outline",size:"sm",className:"h-7 w-7 p-0 bg-white/80 backdrop-blur-sm",onClick:()=>n(!s),children:s?(0,r.jsx)(eK,{size:14}):(0,r.jsx)(eQ,{size:14})})}),(0,r.jsx)("div",{ref:i,className:`relative mx-auto border rounded-md shadow-sm overflow-hidden bg-white ${a}`,children:t}),(0,r.jsx)("div",{className:"mt-2 text-xs text-center text-gray-500",children:(0,r.jsxs)("span",{children:[p,"  ",m,"\xd7",u,"px  Propor\xe7\xe3o: ",h.toFixed(2),":1"]})})]})}var e4=a(27069);let e3=()=>{try{let e=localStorage.getItem("elementos-compartilhados");if(console.log("Dados brutos carregados do localStorage:",e),!e)return console.log("Nenhum dado encontrado no localStorage"),[];let t=JSON.parse(e);if(!Array.isArray(t))return console.error("Dados carregados n\xe3o s\xe3o um array:",t),[];let a=t.filter(e=>e&&"object"==typeof e?!!(e.id&&e.nome&&Array.isArray(e.elementos))||(console.error("Conjunto com estrutura inv\xe1lida:",e),!1):(console.error("Conjunto inv\xe1lido:",e),!1));return console.log("Conjuntos v\xe1lidos carregados:",a),a}catch(e){return console.error("Erro ao carregar do localStorage:",e),[]}},e5=e=>{try{if(!Array.isArray(e))return console.error("Tentativa de salvar dados que n\xe3o s\xe3o um array:",e),!1;let t=e.filter(e=>e&&"object"==typeof e?!!(e.id&&e.nome&&Array.isArray(e.elementos))||(console.error("Conjunto com estrutura inv\xe1lida:",e),!1):(console.error("Conjunto inv\xe1lido:",e),!1)),a=JSON.stringify(t);return console.log("Salvando dados no localStorage:",a),localStorage.setItem("elementos-compartilhados",a),console.log("Dados salvos com sucesso"),!0}catch(e){return console.error("Erro ao salvar no localStorage:",e),!1}},e6=(0,eW.v)((e,t)=>({conjuntos:[],carregarConjuntos:()=>{e({conjuntos:e3()})},salvarConjuntos:()=>{e5(t().conjuntos)},adicionarConjunto:a=>{try{if(!a.nome||!a.nome.trim()){console.error("Tentativa de adicionar conjunto sem nome");return}if(!Array.isArray(a.elementos)||0===a.elementos.length){console.error("Tentativa de adicionar conjunto sem elementos");return}let r=JSON.parse(JSON.stringify(a.elementos)),o={...a,elementos:r,id:`conjunto-${Date.now()}`,dataCriacao:new Date().toISOString()},s=[...t().conjuntos,o];e({conjuntos:s}),e5(s)?(console.log("Conjunto adicionado com sucesso:",o),console.log("Estado atual ap\xf3s adicionar:",s)):console.error("Falha ao salvar conjunto no localStorage")}catch(e){console.error("Erro ao adicionar conjunto:",e)}},removerConjunto:a=>{let r=t().conjuntos.filter(e=>e.id!==a);e({conjuntos:r}),e5(r),console.log("Conjunto removido:",a),console.log("Estado atual ap\xf3s remover:",r)},atualizarConjunto:(a,r)=>{let o=t().conjuntos.map(e=>e.id===a?{...e,elementos:r}:e);e({conjuntos:o}),e5(o),console.log("Conjunto atualizado:",a),console.log("Estado atual ap\xf3s atualizar:",o)}}));var e8=a(71414),e7=a(20997),e9=a(23747),te=a(26241),tt=a(88958),ta=a(33078);function tr(e,t){let a=+(0,ta.a)(e)-+(0,ta.a)(t);return a<0?-1:a>0?1:a}var to=a(83366),ts=a(15930);function tn({elementos:e,plataforma:t,formato:a,onAplicarElementos:s}){let[n,i]=(0,o.useState)(""),[c,m]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!0),{conjuntos:h,adicionarConjunto:x,removerConjunto:f}=e6(),{toast:g}=(0,e4.d)(),v=e=>{try{if(console.log("Aplicando conjunto:",e),console.log("Elementos no conjunto:",e.elementos),!e.elementos||0===e.elementos.length){g({title:"Conjunto vazio",description:"Este conjunto n\xe3o cont\xe9m elementos para aplicar.",variant:"destructive"});return}let t=JSON.parse(JSON.stringify(e.elementos));console.log("Elementos clonados:",t);let r=b(t,e.formato,a);console.log("Elementos adaptados:",r);let o=r.map(e=>({...e,id:e.id||`elemento-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}));s(o),g({title:"Conjunto aplicado",description:`O conjunto "${e.nome}" foi aplicado com sucesso com ${o.length} elementos.`}),m(!1)}catch(e){console.error("Erro ao aplicar conjunto:",e),g({title:"Erro ao aplicar conjunto",description:"Ocorreu um erro ao aplicar o conjunto de elementos.",variant:"destructive"})}},b=(e,t,a)=>{if(console.log(`Adaptando elementos de ${t} para ${a}`),t===a)return JSON.parse(JSON.stringify(e));try{return JSON.parse(JSON.stringify(e)).map((e,t)=>(e.posicaoGrid||(console.warn(`Elemento ${t} n\xe3o tem posicaoGrid, criando padr\xe3o`),e.posicaoGrid={x:0,y:0,width:2,height:2}),e.conteudo||(console.warn(`Elemento ${t} n\xe3o tem conteudo, criando padr\xe3o`),e.conteudo={}),e.tipo||(console.warn(`Elemento ${t} n\xe3o tem tipo, definindo como 'texto'`),e.tipo="texto"),{...e,id:`elemento-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`}))}catch(t){return console.error("Erro ao adaptar elementos:",t),JSON.parse(JSON.stringify(e))}},N=(e,t,a)=>{a.stopPropagation(),console.log("Removendo conjunto:",e),f(e),g({title:"Conjunto removido",description:`O conjunto "${t}" foi removido com sucesso.`})};return(0,r.jsxs)(eo,{open:c,onOpenChange:m,children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(en,{asChild:!0,children:(0,r.jsx)(d.$,{variant:"outline",onClick:()=>{p(!0),i("")},children:"Salvar Elementos"})}),(0,r.jsx)(en,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"outline",onClick:()=>{p(!1),console.log("Conjuntos dispon\xedveis:",h)},disabled:0===h.length,children:["Aplicar Elementos (",h.length,")"]})})]}),(0,r.jsxs)(eF,{className:"sm:max-w-md",children:[(0,r.jsx)(eI,{children:(0,r.jsx)(eP,{children:u?"Salvar Conjunto de Elementos":"Aplicar Conjunto de Elementos"})}),u?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"nomeConjunto",children:"Nome do Conjunto"}),(0,r.jsx)(y.p,{id:"nomeConjunto",value:n,onChange:e=>i(e.target.value),placeholder:"Ex: Logo e Texto Padr\xe3o"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Este conjunto salvar\xe1 ",e.length," elementos do formato atual."]}),(0,r.jsx)(d.$,{onClick:()=>{if(!n.trim()){g({title:"Nome obrigat\xf3rio",description:"Por favor, informe um nome para o conjunto de elementos.",variant:"destructive"});return}if(0===e.length){g({title:"Sem elementos",description:"N\xe3o h\xe1 elementos para salvar. Adicione elementos antes de salvar.",variant:"destructive"});return}try{let r=JSON.parse(JSON.stringify(e));console.log("Salvando conjunto:",{nome:n,elementos:r,plataforma:t,formato:a}),x({nome:n,elementos:r,plataforma:t,formato:a}),e6.getState().salvarConjuntos();let o=e6.getState().conjuntos;console.log("Conjuntos ap\xf3s salvar:",o),g({title:"Conjunto salvo",description:`O conjunto "${n}" foi salvo com sucesso.`}),i(""),m(!1)}catch(e){console.error("Erro ao salvar conjunto:",e),g({title:"Erro ao salvar",description:"Ocorreu um erro ao salvar o conjunto. Por favor, tente novamente.",variant:"destructive"})}},className:"w-full",children:"Salvar Conjunto"})]}):(0,r.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:0===h.length?(0,r.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Nenhum conjunto de elementos salvo."}):h.map(e=>{var t,a;return(0,r.jsx)(j.Zp,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>v(e),children:(0,r.jsx)(j.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:e.nome}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.elementos.length," elementos "," ",e.plataforma,"/",e.formato]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Criado"," ",(t=new Date(e.dataCriacao),a={addSuffix:!0,locale:ts.F},function(e,t,a){let r;let o=(0,e9.q)(),s=a?.locale??o.locale??e7.c,n=tr(e,t);if(isNaN(n))throw RangeError("Invalid time value");let i=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:n}),[l,d]=(0,tt.x)(a?.in,...n>0?[t,e]:[e,t]),c=function(e,t,a){var r;return(r=void 0,e=>{let t=(r?Math[r]:Math.trunc)(e);return 0===t?0:t})((+(0,ta.a)(e)-+(0,ta.a)(t))/1e3)}(d,l),m=Math.round((c-((0,te.G)(d)-(0,te.G)(l))/1e3)/60);if(m<2){if(a?.includeSeconds){if(c<5)return s.formatDistance("lessThanXSeconds",5,i);if(c<10)return s.formatDistance("lessThanXSeconds",10,i);if(c<20)return s.formatDistance("lessThanXSeconds",20,i);else if(c<40)return s.formatDistance("halfAMinute",0,i);else if(c<60)return s.formatDistance("lessThanXMinutes",1,i);else return s.formatDistance("xMinutes",1,i)}return 0===m?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",m,i)}if(m<45)return s.formatDistance("xMinutes",m,i);if(m<90)return s.formatDistance("aboutXHours",1,i);if(m<to.F6){let e=Math.round(m/60);return s.formatDistance("aboutXHours",e,i)}if(m<2520)return s.formatDistance("xDays",1,i);else if(m<to.Nw){let e=Math.round(m/to.F6);return s.formatDistance("xDays",e,i)}else if(m<2*to.Nw)return r=Math.round(m/to.Nw),s.formatDistance("aboutXMonths",r,i);if((r=function(e,t,a){let[r,o,s]=(0,tt.x)(void 0,e,e,t),n=tr(o,s),i=Math.abs(function(e,t,a){let[r,o]=(0,tt.x)(void 0,e,t);return 12*(r.getFullYear()-o.getFullYear())+(r.getMonth()-o.getMonth())}(o,s));if(i<1)return 0;1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-n*i);let l=tr(o,s)===-n;(function(e,t){let a=(0,ta.a)(e,void 0);return+function(e,t){let a=(0,ta.a)(e,t?.in);return a.setHours(23,59,59,999),a}(a,void 0)==+function(e,t){let a=(0,ta.a)(e,t?.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}(a,t)})(r)&&1===i&&1===tr(r,s)&&(l=!1);let d=n*(i-+l);return 0===d?0:d}(d,l))<12){let e=Math.round(m/to.Nw);return s.formatDistance("xMonths",e,i)}{let e=r%12,t=Math.trunc(r/12);return e<3?s.formatDistance("aboutXYears",t,i):e<9?s.formatDistance("overXYears",t,i):s.formatDistance("almostXYears",t+1,i)}}(t,(0,e8.w)(t,Date.now()),a))]})]}),(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:t=>N(e.id,e.nome,t),children:"Remover"})]})})},e.id)})})]})]})}var ti=a(61630),tl=a(3070);let td=(0,c.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),tc=(0,c.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),tm=(0,a(72510).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tu=o.forwardRef(({className:e,variant:t,...a},o)=>(0,r.jsx)("div",{ref:o,role:"alert",className:(0,f.cn)(tm({variant:t}),e),...a}));tu.displayName="Alert";let tp=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("h5",{ref:a,className:(0,f.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));tp.displayName="AlertTitle";let th=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,f.cn)("text-sm [&_p]:leading-relaxed",e),...t}));th.displayName="AlertDescription";var tx="Progress",[tf,tg]=(0,M.A)(tx),[tv,tj]=tf(tx),ty=o.forwardRef((e,t)=>{var a,o;let{__scopeProgress:s,value:n=null,max:i,getValueLabel:l=tw,...d}=e;(i||0===i)&&!tS(i)&&console.error((a=`${i}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=tS(i)?i:100;null===n||tA(n,c)||console.error((o=`${n}`,`Invalid prop \`value\` of value \`${o}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=tA(n,c)?n:null,u=tk(m)?l(m,c):void 0;return(0,r.jsx)(tv,{scope:s,value:m,max:c,children:(0,r.jsx)(I.sG.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":tk(m)?m:void 0,"aria-valuetext":u,role:"progressbar","data-state":tC(m,c),"data-value":m??void 0,"data-max":c,...d,ref:t})})});ty.displayName=tx;var tb="ProgressIndicator",tN=o.forwardRef((e,t)=>{let{__scopeProgress:a,...o}=e,s=tj(tb,a);return(0,r.jsx)(I.sG.div,{"data-state":tC(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...o,ref:t})});function tw(e,t){return`${Math.round(e/t*100)}%`}function tC(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function tk(e){return"number"==typeof e}function tS(e){return tk(e)&&!isNaN(e)&&e>0}function tA(e,t){return tk(e)&&!isNaN(e)&&e<=t&&e>=0}tN.displayName=tb;let tE=o.forwardRef(({className:e,value:t,...a},o)=>(0,r.jsx)(ty,{ref:o,className:(0,f.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:(0,r.jsx)(tN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function t$({etapaAtual:e,totalEtapas:t,mensagem:a,visivel:o=!0}){if(!o)return null;let s=Math.round(e/t*100);return(0,r.jsxs)("div",{className:"space-y-2 my-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{children:["Progresso: ",s,"%"]}),(0,r.jsxs)("span",{children:["Etapa ",e," de ",t]})]}),(0,r.jsx)(tE,{value:s,className:"h-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:a})]})}tE.displayName=ty.displayName;var tD=a(87040),tM=a(49091),tR=a(28391),tz=a(47295),tF=a(79974),tI=a(38226),tO=a(57561),tP=a(41751),tG=a(66066),tT=a(54100),tL=e=>{let{present:t,children:a}=e,r=function(e){var t,a;let[r,s]=o.useState(),n=o.useRef({}),i=o.useRef(e),l=o.useRef("none"),[d,c]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>a[e][t]??e,t));return o.useEffect(()=>{let e=tB(n.current);l.current="mounted"===d?e:"none"},[d]),(0,tT.N)(()=>{let t=n.current,a=i.current;if(a!==e){let r=l.current,o=tB(t);e?c("MOUNT"):"none"===o||t?.display==="none"?c("UNMOUNT"):a&&r!==o?c("ANIMATION_OUT"):c("UNMOUNT"),i.current=e}},[e,c]),(0,tT.N)(()=>{if(r){let e;let t=r.ownerDocument.defaultView??window,a=a=>{let o=tB(n.current).includes(a.animationName);if(a.target===r&&o&&(c("ANIMATION_END"),!i.current)){let a=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=a)})}},o=e=>{e.target===r&&(l.current=tB(n.current))};return r.addEventListener("animationstart",o),r.addEventListener("animationcancel",a),r.addEventListener("animationend",a),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",o),r.removeEventListener("animationcancel",a),r.removeEventListener("animationend",a)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:o.useCallback(e=>{e&&(n.current=getComputedStyle(e)),s(e)},[])}}(t),s="function"==typeof a?a({present:r.isPresent}):o.Children.only(a),n=(0,tR.s)(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s));return"function"==typeof a||r.isPresent?o.cloneElement(s,{ref:n}):null};function tB(e){return e?.animationName||"none"}tL.displayName="Presence";var t_=a(68476),tJ=a(4679),tV=a(53993),tq="Dialog",[tW,tH]=(0,tM.A)(tq),[tU,tX]=tW(tq),tZ=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:i,modal:l=!0}=e,d=o.useRef(null),c=o.useRef(null),[m=!1,u]=(0,tI.i)({prop:s,defaultProp:n,onChange:i});return(0,r.jsx)(tU,{scope:t,triggerRef:d,contentRef:c,contentId:(0,tF.B)(),titleId:(0,tF.B)(),descriptionId:(0,tF.B)(),open:m,onOpenChange:u,onOpenToggle:o.useCallback(()=>u(e=>!e),[u]),modal:l,children:a})};tZ.displayName=tq;var tY="DialogTrigger",tK=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=tX(tY,a),n=(0,tR.s)(t,s.triggerRef);return(0,r.jsx)(t_.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ai(s.open),...o,ref:n,onClick:(0,tz.m)(e.onClick,s.onOpenToggle)})});tK.displayName=tY;var tQ="DialogPortal",[t0,t1]=tW(tQ,{forceMount:void 0}),t2=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:n}=e,i=tX(tQ,t);return(0,r.jsx)(t0,{scope:t,forceMount:a,children:o.Children.map(s,e=>(0,r.jsx)(tL,{present:a||i.open,children:(0,r.jsx)(tG.Z,{asChild:!0,container:n,children:e})}))})};t2.displayName=tQ;var t4="DialogOverlay",t3=o.forwardRef((e,t)=>{let a=t1(t4,e.__scopeDialog),{forceMount:o=a.forceMount,...s}=e,n=tX(t4,e.__scopeDialog);return n.modal?(0,r.jsx)(tL,{present:o||n.open,children:(0,r.jsx)(t5,{...s,ref:t})}):null});t3.displayName=t4;var t5=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=tX(t4,a);return(0,r.jsx)(Z.A,{as:tV.DX,allowPinchZoom:!0,shards:[s.contentRef],children:(0,r.jsx)(t_.sG.div,{"data-state":ai(s.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),t6="DialogContent",t8=o.forwardRef((e,t)=>{let a=t1(t6,e.__scopeDialog),{forceMount:o=a.forceMount,...s}=e,n=tX(t6,e.__scopeDialog);return(0,r.jsx)(tL,{present:o||n.open,children:n.modal?(0,r.jsx)(t7,{...s,ref:t}):(0,r.jsx)(t9,{...s,ref:t})})});t8.displayName=t6;var t7=o.forwardRef((e,t)=>{let a=tX(t6,e.__scopeDialog),s=o.useRef(null),n=(0,tR.s)(t,a.contentRef,s);return o.useEffect(()=>{let e=s.current;if(e)return(0,Y.Eq)(e)},[]),(0,r.jsx)(ae,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,tz.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,tz.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,tz.m)(e.onFocusOutside,e=>e.preventDefault())})}),t9=o.forwardRef((e,t)=>{let a=tX(t6,e.__scopeDialog),s=o.useRef(!1),n=o.useRef(!1);return(0,r.jsx)(ae,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),ae=o.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:i,...l}=e,d=tX(t6,a),c=o.useRef(null),m=(0,tR.s)(t,c);return(0,tJ.Oh)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tP.n,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,r.jsx)(tO.qW,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":ai(d.open),...l,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(am,{titleId:d.titleId}),(0,r.jsx)(au,{contentRef:c,descriptionId:d.descriptionId})]})]})}),at="DialogTitle",aa=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=tX(at,a);return(0,r.jsx)(t_.sG.h2,{id:s.titleId,...o,ref:t})});aa.displayName=at;var ar="DialogDescription",ao=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=tX(ar,a);return(0,r.jsx)(t_.sG.p,{id:s.descriptionId,...o,ref:t})});ao.displayName=ar;var as="DialogClose",an=o.forwardRef((e,t)=>{let{__scopeDialog:a,...o}=e,s=tX(as,a);return(0,r.jsx)(t_.sG.button,{type:"button",...o,ref:t,onClick:(0,tz.m)(e.onClick,()=>s.onOpenChange(!1))})});function ai(e){return e?"open":"closed"}an.displayName=as;var al="DialogTitleWarning",[ad,ac]=(0,tM.q)(al,{contentName:t6,titleName:at,docsSlug:"dialog"}),am=({titleId:e})=>{let t=ac(al),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return o.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},au=({contentRef:e,descriptionId:t})=>{let a=ac("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return o.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&!document.getElementById(t)&&console.warn(r)},[r,e,t]),null},ap="AlertDialog",[ah,ax]=(0,tM.A)(ap,[tH]),af=tH(),ag=e=>{let{__scopeAlertDialog:t,...a}=e,o=af(t);return(0,r.jsx)(tZ,{...o,...a,modal:!0})};ag.displayName=ap,o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,s=af(a);return(0,r.jsx)(tK,{...s,...o,ref:t})}).displayName="AlertDialogTrigger";var av=e=>{let{__scopeAlertDialog:t,...a}=e,o=af(t);return(0,r.jsx)(t2,{...o,...a})};av.displayName="AlertDialogPortal";var aj=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,s=af(a);return(0,r.jsx)(t3,{...s,...o,ref:t})});aj.displayName="AlertDialogOverlay";var ay="AlertDialogContent",[ab,aN]=ah(ay),aw=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:s,...n}=e,i=af(a),l=o.useRef(null),d=(0,tR.s)(t,l),c=o.useRef(null);return(0,r.jsx)(ad,{contentName:ay,titleName:aC,docsSlug:"alert-dialog",children:(0,r.jsx)(ab,{scope:a,cancelRef:c,children:(0,r.jsxs)(t8,{role:"alertdialog",...i,...n,ref:d,onOpenAutoFocus:(0,tz.m)(n.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(tV.xV,{children:s}),(0,r.jsx)(aM,{contentRef:l})]})})})});aw.displayName=ay;var aC="AlertDialogTitle",ak=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,s=af(a);return(0,r.jsx)(aa,{...s,...o,ref:t})});ak.displayName=aC;var aS="AlertDialogDescription",aA=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,s=af(a);return(0,r.jsx)(ao,{...s,...o,ref:t})});aA.displayName=aS;var aE=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,s=af(a);return(0,r.jsx)(an,{...s,...o,ref:t})});aE.displayName="AlertDialogAction";var a$="AlertDialogCancel",aD=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...o}=e,{cancelRef:s}=aN(a$,a),n=af(a),i=(0,tR.s)(t,s);return(0,r.jsx)(an,{...n,...o,ref:i})});aD.displayName=a$;var aM=({contentRef:e})=>{let t=`\`${ay}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ay}\` by passing a \`${aS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ay}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};let aR=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(aj,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));aR.displayName=aj.displayName;let az=o.forwardRef(({className:e,...t},a)=>(0,r.jsxs)(av,{children:[(0,r.jsx)(aR,{}),(0,r.jsx)(aw,{ref:a,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));az.displayName=aw.displayName;let aF=({className:e,...t})=>(0,r.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});aF.displayName="AlertDialogHeader";let aI=({className:e,...t})=>(0,r.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});aI.displayName="AlertDialogFooter";let aO=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(ak,{ref:a,className:(0,f.cn)("text-lg font-semibold",e),...t}));aO.displayName=ak.displayName;let aP=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(aA,{ref:a,className:(0,f.cn)("text-sm text-muted-foreground",e),...t}));aP.displayName=aA.displayName;let aG=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(aE,{ref:a,className:(0,f.cn)((0,d.r)(),e),...t}));aG.displayName=aE.displayName;let aT=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(aD,{ref:a,className:(0,f.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));function aL({elementos:e,plataformaAtual:t,formatoAtual:a,onAplicarElementos:s}){let{toast:i}=(0,e4.d)(),[l,c]=(0,o.useState)([]),[m,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)([]),[x,f]=(0,o.useState)(0),[g,v]=(0,o.useState)(""),[y,b]=(0,o.useState)(!1),[N,w]=(0,o.useState)(null),[C,k]=(0,o.useState)(!1),[S,A]=(0,o.useState)([]),$=(e,t)=>{try{let a=(0,e1.DS)(e,t);return a&&a.elementosPadrao&&a.elementosPadrao.length>0}catch(e){return!1}},D=()=>{try{let t=localStorage.getItem("elementos-compartilhados"),a=[];if(t){let e=JSON.parse(t);if(Array.isArray(e)&&e.length>0){for(let t of e)Array.isArray(t.elementos)&&t.elementos.length>0&&(a=a.concat(t.elementos));console.log("Elementos pr\xe9-carregados do localStorage:",a.length)}}let r=a.map(e=>e.tipo);if(["texto","imagem","botao","cta","logo"].forEach(e=>{if(!r.includes(e)){console.log(`Adicionando elemento padr\xe3o para o tipo: ${e}`);let t={id:`padrao-${e}-${Date.now()}`,tipo:e,posicaoGrid:{x:0,y:0,width:2,height:2},conteudo:"texto"===e?{texto:"Texto de exemplo",fontSize:"16px",color:"#000000",textAlign:"center"}:"imagem"===e?{src:"",alt:"Imagem"}:"logo"===e?{src:"",alt:"Logo"}:"botao"===e||"cta"===e?{texto:"Clique aqui",backgroundColor:"#0070f3",color:"#ffffff"}:{},camada:10};a.push(t)}}),e&&e.length>0){let t=JSON.parse(JSON.stringify(e));a=a.concat(t),console.log("Adicionados elementos do editor atual:",t.length)}return A(a),a}catch(e){return console.error("Erro ao carregar elementos do localStorage:",e),[]}},M=e=>{if(!S.length)return null;let t=S.filter(t=>t.tipo===e);if(t.length>0){let e=t[Math.floor(Math.random()*t.length)];if(e.conteudo)return{...e.conteudo}}return null},R=()=>{let e=[];e1.LG.forEach(r=>{let o=(0,e1.M2)(r.id);console.log(`Formatos encontrados para ${r.id}:`,o.length),o.forEach(o=>{$(r.id,o.nome)&&(r.id!==t||o.nome!==a)&&e.push({plataforma:r.id,formato:o.nome,nome:`${r.nome} - ${o.nome}`,largura:o.largura,altura:o.altura,selecionado:!1})})}),c(e),console.log(`Inicializados ${e.length} formatos dispon\xedveis`),0===e.length&&i({title:"Aviso",description:"N\xe3o foram encontrados formatos adicionais para gerar sugest\xf5es.",variant:"default"})},z=(0,tD.useMutation)({mutationFn:async e=>{let t=await fetch("/api/posicionamento-elementos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elementos:e.elementos,formatoOrigem:e.formatoOrigem,formatosDestino:e.formatosDestino})});if(!t.ok)throw Error((await t.json()).error||"Erro ao obter sugest\xf5es da API");let a=await t.json();if(!a.sugestoes||!Array.isArray(a.sugestoes))throw Error("Formato de resposta inv\xe1lido da API");return a},onSuccess:e=>{if(0===e.sugestoes.length){i({title:"Aviso",description:"N\xe3o foram geradas sugest\xf5es. Tente novamente.",variant:"default"}),f(0);return}h(e.sugestoes||[]),f(3),v("Sugest\xf5es geradas com sucesso!"),i({title:"Sucesso",description:`${e.sugestoes.length} sugest\xf5es geradas com sucesso!`,variant:"default"})},onError:e=>{console.error("Erro ao gerar sugest\xf5es:",e),i({title:"Erro",description:"N\xe3o foi poss\xedvel gerar sugest\xf5es. Tente novamente.",variant:"destructive"}),f(0),v("")}}),F=async()=>{if(!e||0===e.length){i({title:"Erro",description:"N\xe3o h\xe1 elementos para gerar sugest\xf5es.",variant:"destructive"});return}let r=l.filter(e=>e.selecionado);if(0===r.length){i({title:"Aviso",description:"Selecione pelo menos um formato para gerar.",variant:"default"});return}f(1),v("Preparando elementos...");let o=(0,e1.DS)(t,a);if(!o){i({title:"Erro",description:"N\xe3o foi poss\xedvel obter a configura\xe7\xe3o do formato atual.",variant:"destructive"});return}let s={plataforma:t,formato:a,largura:o.width||1080,altura:o.height||1080},n=r.map(e=>({plataforma:e.plataforma,formato:e.formato,largura:e.largura,altura:e.altura}));f(2),v("Consultando IA para sugest\xf5es de posicionamento...");try{let t=e.map(e=>({id:e.id||`elemento-${Date.now()}`,tipo:e.tipo||"texto",posicaoGrid:e.posicaoGrid||{x:0,y:0,width:2,height:2},conteudo:e.conteudo||{},camada:e.camada||10}));z.mutate({elementos:t,formatoOrigem:s,formatosDestino:n})}catch(e){console.error("Erro ao preparar dados para a API:",e),i({title:"Erro",description:"Ocorreu um erro ao preparar os dados. Tente novamente.",variant:"destructive"}),f(0)}},I=t=>{if(e&&t)try{console.log("Aplicando sugest\xe3o:",t);let e=(0,e1.DS)(t.formato.plataforma,t.formato.formato);if(!e){i({title:"Erro",description:`Configura\xe7\xe3o do formato ${t.formato.plataforma}/${t.formato.formato} n\xe3o encontrada.`,variant:"destructive"});return}let a=e.grid?.columns||12,r=e.grid?.rows||12,o=e.width/a,n=e.height/r,l=t.elementos.map(e=>{let t=e.posicao?.x??0,a=e.posicao?.y??0,r=e.dimensoes?.largura??100,s=e.dimensoes?.altura??100,i=Math.floor(t/o),l=Math.floor(a/n),d=Math.max(1,Math.floor(r/o)),c=Math.max(1,Math.floor(s/n)),m=`elemento-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,u=M(e.tipo);return{id:m,tipo:e.tipo||"texto",posicaoGrid:{x:i,y:l,width:d,height:c},conteudo:u||{texto:"texto"===e.tipo?e.conteudo?.texto||"Texto":"",src:"imagem"===e.tipo||"logo"===e.tipo?e.conteudo?.src||"":void 0,fontSize:"texto"===e.tipo?e.conteudo?.fontSize||"16px":void 0,color:"texto"===e.tipo?e.conteudo?.color||"#000000":void 0,backgroundColor:"botao"===e.tipo||"cta"===e.tipo?e.conteudo?.backgroundColor||"#0070f3":void 0,textAlign:"texto"===e.tipo?e.conteudo?.textAlign||"center":void 0,alt:"imagem"===e.tipo?e.conteudo?.alt||"Imagem":void 0},camada:e.camada||10}});s(l,t.formato.formato,t.formato.plataforma),i({title:"Sucesso",description:`Elementos aplicados ao formato ${t.formato.formato}.`,variant:"default"}),u(!1)}catch(e){console.error("Erro ao aplicar sugest\xe3o:",e),i({title:"Erro",description:"N\xe3o foi poss\xedvel aplicar a sugest\xe3o.",variant:"destructive"})}},O=()=>{if(p&&0!==p.length)try{let e=0;p.forEach(t=>{try{let a=(0,e1.DS)(t.formato.plataforma,t.formato.formato);if(!a){console.log({plataforma:t.formato.plataforma,formato:t.formato.formato}),console.error(`Configura\xe7\xe3o do formato ${t.formato.plataforma}/${t.formato.formato} n\xe3o encontrada.`);return}let r=a.grid?.columns||12,o=a.grid?.rows||12,n=a.width/r,i=a.height/o,l=t.elementos.map(e=>{let t=e.posicao?.x??0,a=e.posicao?.y??0,r=e.dimensoes?.largura??100,o=e.dimensoes?.altura??100,s=Math.floor(t/n),l=Math.floor(a/i),d=Math.max(1,Math.floor(r/n)),c=Math.max(1,Math.floor(o/i)),m=`elemento-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,u=M(e.tipo);return{id:m,tipo:e.tipo||"texto",posicaoGrid:{x:s,y:l,width:d,height:c},conteudo:u||{texto:"texto"===e.tipo?e.conteudo?.texto||"Texto":"",src:"imagem"===e.tipo||"logo"===e.tipo?e.conteudo?.src||"":void 0,fontSize:"texto"===e.tipo?e.conteudo?.fontSize||"16px":void 0,color:"texto"===e.tipo?e.conteudo?.color||"#000000":void 0,backgroundColor:"botao"===e.tipo||"cta"===e.tipo?e.conteudo?.backgroundColor||"#0070f3":void 0,textAlign:"texto"===e.tipo?e.conteudo?.textAlign||"center":void 0,alt:"imagem"===e.tipo?e.conteudo?.alt||"Imagem":void 0},camada:e.camada||10}});s(l,t.formato.formato,t.formato.plataforma),e++}catch(e){console.error(`Erro ao aplicar sugest\xe3o para ${t.formato.formato}:`,e)}}),i({title:"Sucesso",description:`${e} de ${p.length} formatos aplicados com sucesso.`,variant:"default"}),u(!1)}catch(e){console.error("Erro ao aplicar todas as sugest\xf5es:",e),i({title:"Erro",description:"Ocorreu um erro ao aplicar todas as sugest\xf5es.",variant:"destructive"})}},P=e=>{let t=[...l];t[e].selecionado=!t[e].selecionado,c(t)},G=e=>{w(e),b(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eo,{open:m,onOpenChange:e=>{u(e),e&&(R(),f(0),h([]),D())},children:[(0,r.jsx)(en,{asChild:!0,children:(0,r.jsx)(d.$,{variant:"outline",children:"Gerar M\xfaltiplos Formatos"})}),(0,r.jsxs)(eF,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(eI,{children:[(0,r.jsx)(eP,{children:"Gerar M\xfaltiplos Formatos"}),(0,r.jsx)(eG,{children:"Selecione os formatos que deseja gerar a partir dos elementos atuais."})]}),x<3?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.tU,{defaultValue:"all",children:[(0,r.jsxs)(n.j7,{className:"grid grid-cols-3 gap-2 mb-4 h-[120px]",children:[(0,r.jsx)(n.Xi,{value:"all",children:"Todos"}),e1.LG.map(e=>(0,r.jsx)(n.Xi,{value:e.id,children:e.nome},e.id))]}),(0,r.jsx)(n.av,{value:"all",className:"space-y-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:l.map((e,t)=>(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{className:"pb-2",children:[(0,r.jsx)(j.ZB,{className:"text-sm font-medium",children:e.nome}),(0,r.jsxs)(j.BT,{className:"text-xs",children:[e.largura,"x",e.altura]}),(0,r.jsx)("div",{className:"mt-2 rounded bg-gray-50 mx-auto",style:{width:"80%",aspectRatio:`${e.largura} / ${e.altura}`,maxHeight:"80px"}})]}),(0,r.jsx)(j.wL,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(E.S,{id:`formato-${t}`,checked:e.selecionado,onCheckedChange:()=>P(t)}),(0,r.jsx)("label",{htmlFor:`formato-${t}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Selecionar"})]})})]},`${e.plataforma}-${e.formato}`))})}),e1.LG.map(e=>(0,r.jsx)(n.av,{value:e.id,className:"space-y-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:l.filter(t=>t.plataforma===e.id).map((e,t)=>{let a=l.findIndex(t=>t.plataforma===e.plataforma&&t.formato===e.formato);return(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{className:"pb-2",children:[(0,r.jsx)(j.ZB,{className:"text-sm font-medium",children:e.nome}),(0,r.jsxs)(j.BT,{className:"text-xs",children:[e.largura,"x",e.altura]}),(0,r.jsx)("div",{className:"mt-2 border rounded bg-gray-50 mx-auto",style:{width:"80%",aspectRatio:`${e.largura} / ${e.altura}`,maxHeight:"80px"}})]}),(0,r.jsx)(j.wL,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(E.S,{id:`formato-tab-${a}`,checked:e.selecionado,onCheckedChange:()=>P(a)}),(0,r.jsx)("label",{htmlFor:`formato-tab-${a}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Selecionar"})]})})]},`${e.plataforma}-${e.formato}`)})})},e.id))]}),(0,r.jsx)(t$,{etapaAtual:x,totalEtapas:3,mensagem:g,visivel:x>0}),(0,r.jsxs)(eO,{children:[(0,r.jsx)(d.$,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),(0,r.jsx)(d.$,{onClick:F,disabled:x>0&&x<3,children:x>0?"Gerando...":"Gerar Sugest\xf5es"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Sugest\xf5es Geradas"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((e,t)=>(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsxs)(j.ZB,{className:"text-sm",children:[e.formato.plataforma," -"," ",e.formato.formato]}),(0,r.jsxs)(j.BT,{children:[e.formato.largura,"x",e.formato.altura," (",e.elementos.length," elementos)"]})]}),(0,r.jsx)(j.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"border rounded-md p-2 bg-gray-50 relative",style:{width:"100%",aspectRatio:`${e.formato.largura} / ${e.formato.altura}`,maxHeight:e.formato.altura>e.formato.largura?"200px":"150px",overflow:"hidden"},children:e.elementos.map((t,a)=>{t.tipo;let o=t.tipo,s="",n="",i="",l=M(t.tipo);return l&&("texto"===t.tipo&&l.texto?(o=l.texto,i=l.color||""):("imagem"===t.tipo||"logo"===t.tipo)&&l.src?s=l.src:("botao"===t.tipo||"cta"===t.tipo)&&l&&(l.texto&&(o=l.texto),l.backgroundColor&&(n=l.backgroundColor),l.color&&(i=l.color))),(0,r.jsx)("div",{className:"absolute flex items-center justify-center text-xs overflow-hidden",style:{left:`${t.posicao.x/e.formato.largura*100}%`,top:`${t.posicao.y/e.formato.altura*100}%`,width:`${t.dimensoes.largura/e.formato.largura*100}%`,height:`${t.dimensoes.altura/e.formato.altura*100}%`,zIndex:t.camada||10,fontSize:"9px",opacity:.85,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",...n?{backgroundColor:n}:{},...i?{color:i}:{}},children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-1",children:["imagem"===t.tipo&&!s&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"imagem"===t.tipo&&s&&(0,r.jsx)("img",{src:s,alt:"Preview",className:"w-full h-full object-cover",style:{minWidth:"100%",minHeight:"100%"}}),"logo"===t.tipo&&!s&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"logo"===t.tipo&&s&&(0,r.jsx)("img",{src:s,alt:"Logo",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"100%"}}),("botao"===t.tipo||"cta"===t.tipo)&&(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full rounded-sm border border-current p-1",children:(0,r.jsx)("span",{className:"block truncate text-center w-full",children:o.length>20?o.substring(0,20)+"...":o})}),"texto"===t.tipo&&(0,r.jsx)("span",{className:"block truncate text-center w-full",children:o.length>20?o.substring(0,20)+"...":o})]})},a)})}),(0,r.jsx)("div",{className:"mt-2 text-xs",children:(0,r.jsxs)("details",{className:"border rounded-md p-2",children:[(0,r.jsx)("summary",{className:"font-medium cursor-pointer",children:"Detalhes dos elementos"}),(0,r.jsx)("div",{className:"mt-2 space-y-2",children:e.elementos.map((e,t)=>(0,r.jsxs)("div",{className:"border-b pb-1 last:border-0",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${"imagem"===e.tipo?"bg-blue-400":"texto"===e.tipo?"bg-green-400":"botao"===e.tipo||"cta"===e.tipo?"bg-orange-400":"logo"===e.tipo?"bg-purple-400":"bg-gray-400"}`}),(0,r.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]}),e.conteudo?.texto&&(0,r.jsxs)("div",{className:"ml-4 text-[10px] text-gray-600 truncate",children:['"',e.conteudo.texto.substring(0,30),e.conteudo.texto.length>30?"...":"",'"']}),(0,r.jsxs)("div",{className:"ml-4 text-[10px] text-gray-500",children:["Posi\xe7\xe3o:"," ",Math.round(e.posicao.x),",",Math.round(e.posicao.y)," | Tamanho:"," ",Math.round(e.dimensoes.largura),"\xd7",Math.round(e.dimensoes.altura)]})]},t))})]})})]})}),(0,r.jsx)(j.wL,{children:(0,r.jsx)(d.$,{onClick:()=>G(e),className:"w-full",children:"Aplicar este formato"})})]},t))})]}),(0,r.jsxs)(eO,{children:[(0,r.jsx)(d.$,{variant:"outline",onClick:()=>f(0),children:"Voltar"}),(0,r.jsx)(d.$,{variant:"outline",onClick:()=>u(!1),children:"Fechar"}),(0,r.jsx)(d.$,{onClick:()=>{k(!0)},children:"Aplicar Todos"})]})]})]})]}),(0,r.jsx)(ag,{open:y,onOpenChange:b,children:(0,r.jsxs)(az,{children:[(0,r.jsxs)(aF,{children:[(0,r.jsx)(aO,{children:"Aplicar elementos ao formato"}),(0,r.jsxs)(aP,{children:["Voc\xea est\xe1 prestes a aplicar"," ",N?.elementos.length||0," elementos ao formato"," ",N?.formato.plataforma," -"," ",N?.formato.formato,". Isto substituir\xe1 os elementos existentes neste formato."]})]}),N&&(0,r.jsxs)("div",{className:"my-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-2",children:"Visualiza\xe7\xe3o dos elementos:"}),(0,r.jsx)("div",{className:"border rounded-md p-2 bg-gray-50 relative",style:{width:"100%",aspectRatio:`${N.formato.largura} / ${N.formato.altura}`,maxHeight:N.formato.altura>N.formato.largura?"250px":"200px",overflow:"hidden"},children:N.elementos.map((e,t)=>{e.tipo;let a=e.tipo,o="",s="",n="",i=M(e.tipo);return i&&("texto"===e.tipo&&i.texto?(a=i.texto,n=i.color||""):("imagem"===e.tipo||"logo"===e.tipo)&&i.src?o=i.src:("botao"===e.tipo||"cta"===e.tipo)&&i&&(i.texto&&(a=i.texto),i.backgroundColor&&(s=i.backgroundColor),i.color&&(n=i.color))),(0,r.jsx)("div",{className:"absolute flex items-center justify-center text-xs overflow-hidden",style:{left:`${e.posicao.x/N.formato.largura*100}%`,top:`${e.posicao.y/N.formato.altura*100}%`,width:`${e.dimensoes.largura/N.formato.largura*100}%`,height:`${e.dimensoes.altura/N.formato.altura*100}%`,zIndex:e.camada||10,fontSize:"9px",opacity:.85,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",...s?{backgroundColor:s}:{},...n?{color:n}:{}},children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-1",children:["imagem"===e.tipo&&!o&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"imagem"===e.tipo&&o&&(0,r.jsx)("img",{src:o,alt:"Preview",className:"w-full h-full object-cover",style:{minWidth:"100%",minHeight:"100%"}}),"logo"===e.tipo&&!o&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"logo"===e.tipo&&o&&(0,r.jsx)("img",{src:o,alt:"Logo",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"100%"}}),("botao"===e.tipo||"cta"===e.tipo)&&(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full rounded-sm border border-current p-1",children:(0,r.jsx)("span",{className:"block truncate text-center w-full",children:a.length>20?a.substring(0,20)+"...":a})}),"texto"===e.tipo&&(0,r.jsx)("span",{className:"block truncate text-center w-full",children:a.length>20?a.substring(0,20)+"...":a})]})},t)})}),(0,r.jsxs)("div",{className:"mt-4 space-y-1 text-xs",children:[(0,r.jsx)("div",{className:"font-medium",children:"Elementos a serem aplicados:"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2 border rounded p-2",children:N.elementos.map((e,t)=>(0,r.jsx)("div",{className:"border-b pb-1 last:border-0",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 "}),(0,r.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]})},t))})]})]}),(0,r.jsxs)(aI,{children:[(0,r.jsx)(aT,{children:"Cancelar"}),(0,r.jsx)(aG,{onClick:()=>{N&&(I(N),b(!1),w(null))},children:"Aplicar Elementos"})]})]})}),(0,r.jsx)(ag,{open:C,onOpenChange:k,children:(0,r.jsxs)(az,{children:[(0,r.jsxs)(aF,{children:[(0,r.jsx)(aO,{children:"Aplicar todos os formatos"}),(0,r.jsxs)(aP,{children:["Voc\xea est\xe1 prestes a aplicar ",p.length," formatos diferentes. Isto substituir\xe1 os elementos existentes em cada um destes formatos."]})]}),(0,r.jsxs)("div",{className:"my-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-2",children:"Formatos que ser\xe3o modificados:"}),(0,r.jsx)("div",{className:"max-h-[300px] overflow-y-auto border rounded p-3",children:(0,r.jsx)("ul",{className:"space-y-2",children:p.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between border-b last:border-b-0 pb-2 last:pb-0",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2 bg-blue-500"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.formato.plataforma," -"," ",e.formato.formato]})]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[e.formato.largura,"\xd7",e.formato.altura," "," ",e.elementos.length," elementos"]})]},t))})})]}),(0,r.jsxs)(aI,{children:[(0,r.jsx)(aT,{children:"Cancelar"}),(0,r.jsx)(aG,{onClick:()=>{O(),k(!1)},children:"Aplicar Todos os Formatos"})]})]})})]})}function aB(){let e=(0,s.useParams)();(0,s.useRouter)();let{toast:t}=(0,e4.d)(),a=e.id,[c,m]=(0,o.useState)("instagram"),[u,p]=(0,o.useState)(""),[h,x]=(0,o.useState)([]),[f,g]=(0,o.useState)(null),[j,y]=(0,o.useState)(!1),[b,N]=(0,o.useState)("preview"),[w,C]=(0,o.useState)(!0),[k,S]=(0,o.useState)(null),{elementos:A,setElementos:E,resetElementos:$,salvarVersao:D,versoes:M}=eU(),{campanhas:R,campanhaAtual:z,selecionarCampanha:F,adicionarAsset:I,obterAsset:O,atualizarCampanha:P}=(0,tl.V)(),G=()=>{if(!a||!c||!u){t({title:"Erro ao salvar",description:"Selecione uma plataforma e formato antes de salvar.",variant:"destructive"});return}try{D({plataforma:c,formato:u,elementos:[...A],timestamp:new Date().toISOString()}),I(a,{plataforma:c,formato:u,elementos:A}),P(a,{}),S(new Date().toLocaleTimeString()),t({title:"Vers\xe3o salva",description:"A vers\xe3o atual foi salva com sucesso."})}catch(e){console.error("Erro ao salvar vers\xe3o:",e),t({title:"Erro ao salvar",description:"Ocorreu um erro ao salvar a vers\xe3o.",variant:"destructive"})}},T=(e,t)=>{if(!t)return e;console.log("Adaptando elementos para o formato:",t.nome);try{let a=JSON.parse(JSON.stringify(e));return console.log("Elementos clonados:",a),a.map((e,a)=>{if(!e.posicaoGrid)return console.warn(`Elemento ${a} n\xe3o tem posicaoGrid, criando padr\xe3o`),e.posicaoGrid={x:0,y:0,width:2,height:2},e;let r={...e.posicaoGrid};return r.x+r.width>t.grid.columns&&(r.width>t.grid.columns?(r.width=t.grid.columns,r.x=0):r.x=t.grid.columns-r.width),r.y+r.height>t.grid.rows&&(r.height>t.grid.rows?(r.height=t.grid.rows,r.y=0):r.y=t.grid.rows-r.height),{...e,id:`elemento-${Date.now()}-${a}-${Math.random().toString(36).substr(2,9)}`,posicaoGrid:r}})}catch(t){return console.error("Erro ao adaptar elementos para o formato:",t),e}};return(0,r.jsxs)("div",{className:"container px-4 py-6 mx-auto md:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:z?`Editor: ${z.nome}`:"Editor de Pe\xe7as"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:k&&(0,r.jsxs)("span",{children:["\xdaltimo salvamento: ",k]})}),(0,r.jsxs)(d.$,{onClick:G,disabled:!f,children:[(0,r.jsx)(td,{className:"w-4 h-4 mr-2"}),"Salvar Vers\xe3o"]})]})]}),!z&&(0,r.jsxs)(tu,{className:"mb-6",children:[(0,r.jsx)(tc,{className:"h-4 w-4"}),(0,r.jsx)(tp,{children:"Campanha n\xe3o encontrada"}),(0,r.jsx)(th,{children:"A campanha que voc\xea est\xe1 tentando editar n\xe3o existe ou n\xe3o foi carregada corretamente."})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,r.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,r.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,r.jsx)("h2",{className:"mb-4 text-lg font-medium",children:"Plataforma e Formato"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"platform",children:"Plataforma"}),(0,r.jsxs)(i.l6,{value:c,onValueChange:m,children:[(0,r.jsx)(i.bq,{id:"platform",children:(0,r.jsx)(i.yv,{placeholder:"Selecione a plataforma"})}),(0,r.jsx)(i.gC,{children:z?.plataformas.map(e=>r.jsx(i.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"format",children:"Formato"}),(0,r.jsxs)(i.l6,{value:u,onValueChange:p,disabled:0===h.length,children:[(0,r.jsx)(i.bq,{id:"format",children:(0,r.jsx)(i.yv,{placeholder:"Selecione o formato"})}),(0,r.jsx)(i.gC,{children:h.map(e=>(0,r.jsx)(i.eb,{value:e.nome,children:e.nome},e.nome))})]})]})]}),f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["Tamanho: ",f.width," \xd7 ",f.height," px"]}),(0,r.jsxs)("p",{children:["Grid: ",f.grid.columns," \xd7 ",f.grid.rows]})]}),(0,r.jsx)(e0,{formatConfig:f})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(l.J,{htmlFor:"autoSave",className:"cursor-pointer",children:"Auto-salvar"}),(0,r.jsx)("input",{type:"checkbox",id:"autoSave",checked:w,onChange:e=>C(e.target.checked),className:"w-4 h-4"})]}),(0,r.jsx)(d.$,{className:"w-full",variant:"outline",onClick:G,disabled:!f,children:"Salvar Vers\xe3o Atual"}),(0,r.jsx)(d.$,{className:"w-full",variant:"outline",onClick:()=>y(!j),disabled:0===M.length,children:j?"Ocultar Hist\xf3rico":"Ver Hist\xf3rico de Vers\xf5es"}),j&&(0,r.jsx)(eY,{})]}),(0,r.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,r.jsx)("h2",{className:"mb-4 text-lg font-medium",children:"Compartilhar Elementos"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Salve e reutilize elementos entre diferentes formatos."}),(0,r.jsx)(tn,{elementos:A,plataforma:c,formato:u,onAplicarElementos:e=>{try{if(console.log("Recebendo elementos para aplicar:",e),!e||0===e.length){t({title:"Sem elementos",description:"N\xe3o h\xe1 elementos para aplicar.",variant:"destructive"});return}let a=T(e,f);console.log("Elementos adaptados para o formato atual:",a),E(a),t({title:"Elementos aplicados",description:`${a.length} elementos foram aplicados com sucesso.`})}catch(e){console.error("Erro ao aplicar elementos:",e),t({title:"Erro ao aplicar elementos",description:"Ocorreu um erro ao aplicar os elementos.",variant:"destructive"})}}}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Gere m\xfaltiplos formatos com ajuda de IA."}),(0,r.jsx)(aL,{elementos:A,plataformaAtual:c,formatoAtual:u,onAplicarElementos:(e,r,o)=>{if(console.log("Aplicando elementos ao formato:",r,o,e),!(0,e1.Ss)(`${o}/${r}`)){console.log("Formato inv\xe1lido:",r,h),t({title:"Formato inv\xe1lido",description:`O formato ${r} n\xe3o est\xe1 dispon\xedvel para esta plataforma.`,variant:"destructive"});return}p(r),setTimeout(()=>{let s=(0,e1.DS)(o,r);if(s){let n=T(e,s);E(n),w&&a&&(I(a,{plataforma:o,formato:r,elementos:n}),S(new Date().toLocaleTimeString())),t({title:"Elementos aplicados",description:`${n.length} elementos foram aplicados ao formato ${r}.`})}},100)}})]})]})]}),(0,r.jsx)(eq,{plataforma:c,formato:u,formatConfig:f,elementos:A})]}),(0,r.jsx)("div",{className:"lg:col-span-9",children:(0,r.jsxs)(n.tU,{value:b,onValueChange:N,children:[(0,r.jsxs)(n.j7,{className:"mb-4",children:[(0,r.jsx)(n.Xi,{value:"preview",children:"Preview"}),(0,r.jsx)(n.Xi,{value:"elementos",children:"Elementos"})]}),(0,r.jsx)(n.av,{value:"preview",className:"p-4 border rounded-lg",children:f?(0,r.jsx)(e2,{formatConfig:f,children:(0,r.jsx)(v,{formatConfig:f,elementos:A,onElementosChange:E,editMode:!0})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Selecione uma plataforma e formato para visualizar"})}),(0,r.jsx)(n.av,{value:"elementos",children:f?(0,r.jsx)(eB,{formatConfig:f,elementos:A,setElementos:E}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Selecione uma plataforma e formato para editar elementos"})})]})})]}),(0,r.jsx)(ti.Toaster,{})]})}aT.displayName=aD.displayName},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67646:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(64731),o=a(35006),s=a(24399),n=a(72510),i=a(69521);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s.b,{ref:a,className:(0,i.cn)(l(),e),...t}));d.displayName=s.b.displayName},89462:(e,t,a)=>{Promise.resolve().then(a.bind(a,48315))},91934:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(44487).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/devleor/Personal/GitHub/mkt-pupila-ad/app/campanhas/[id]/editor/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/devleor/Personal/GitHub/mkt-pupila-ad/app/campanhas/[id]/editor/page.tsx","default")},97244:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(64731),o=a(35006),s=a(69521);let n=o.forwardRef(({className:e,type:t,...a},o)=>(0,r.jsx)("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...a}));n.displayName="Input"}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[151,447,86,165,283,242],()=>a(27606));module.exports=r})();