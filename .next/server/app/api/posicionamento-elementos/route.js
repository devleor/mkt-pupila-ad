(()=>{var e={};e.id=687,e.ids=[687],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7498:(e,t)=>{"use strict";function r(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return r}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30931:()=>{},41986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isBot:function(){return n},userAgent:function(){return i},userAgentFromString:function(){return s}});let a=function(e){return e&&e.__esModule?e:{default:e}}(r(47457));function n(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function s(e){return{...(0,a.default)(e),isBot:void 0!==e&&n(e)}}function i({headers:e}){return s(e.get("user-agent")||void 0)}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rootParams",{enumerable:!0,get:function(){return c}});let a=r(66285),n=r(64655),s=r(29294),i=r(63033),o=r(34144),l=r(34829),u=new WeakMap;async function c(){let e=s.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new a.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let t=i.workUnitAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(t.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${e.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return function(e,t,r){let a=t.fallbackRouteParams;if(a){let s=!1;for(let t in e)if(a.has(t)){s=!0;break}if(s){if("prerender"===r.type){let t=u.get(e);if(t)return t;let a=(0,o.makeHangingPromise)(r.renderSignal,"`unstable_rootParams`");return u.set(e,a),a}return function(e,t,r,a){let s=u.get(e);if(s)return s;let i={...e},o=Promise.resolve(i);return u.set(e,o),Object.keys(e).forEach(s=>{l.wellKnownProperties.has(s)||(t.has(s)?Object.defineProperty(i,s,{get(){let e=(0,l.describeStringPropertyAccess)("unstable_rootParams",s);"prerender-ppr"===a.type?(0,n.postponeWithTracking)(r.route,e,a.dynamicTracking):(0,n.throwToInterruptStaticGeneration)(e,r,a)},enumerable:!0}):o[s]=e[s])}),o}(e,a,t,r)}}return Promise.resolve(e)}(t.rootParams,e,t);default:return Promise.resolve(t.rootParams)}}},47428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return u}});let a=r(29294),n=r(63033),s=r(64655),i=r(19115),o=r(34144),l=r(8011);function u(){let e=a.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(t){if("prerender"===t.type)return(0,o.makeHangingPromise)(t.renderSignal,"`connection()`");"prerender-ppr"===t.type?(0,s.postponeWithTracking)(e.route,"connection",t.dynamicTracking):"prerender-legacy"===t.type&&(0,s.throwToInterruptStaticGeneration)("connection",e,t)}(0,s.trackDynamicDataInDynamicRender)(e,t)}return Promise.resolve(void 0)}},47457:(e,t,r)=>{var a;(()=>{var n={226:function(n,s){!function(i,o){"use strict";var l="function",u="undefined",c="object",d="string",p="major",m="model",h="name",f="type",g="vendor",y="version",v="architecture",b="console",_="mobile",w="tablet",x="smarttv",k="wearable",T="embedded",S="Amazon",E="Apple",I="ASUS",A="BlackBerry",j="Browser",R="Chrome",O="Firefox",N="Google",P="Huawei",C="Microsoft",M="Motorola",Z="Opera",$="Samsung",U="Sharp",D="Sony",F="Xiaomi",L="Zebra",q="Facebook",z="Chromium OS",B="Mac OS",V=function(e,t){var r={};for(var a in e)t[a]&&t[a].length%2==0?r[a]=t[a].concat(e[a]):r[a]=e[a];return r},J=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},W=function(e,t){return typeof e===d&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===u?e:e.substring(0,350)},G=function(e,t){for(var r,a,n,s,i,u,d=0;d<t.length&&!i;){var p=t[d],m=t[d+1];for(r=a=0;r<p.length&&!i&&p[r];)if(i=p[r++].exec(e))for(n=0;n<m.length;n++)u=i[++a],typeof(s=m[n])===c&&s.length>0?2===s.length?typeof s[1]==l?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==l||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):void 0:this[s[0]]=u?s[1].call(this,u,s[2]):void 0:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;d+=2}},Y=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var a=0;a<t[r].length;a++)if(W(t[r][a],e))return"?"===r?o:r}else if(W(t[r],e))return"?"===r?o:r;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,y],[/opios[\/ ]+([\w\.]+)/i],[y,[h,Z+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[h,Z]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[h,"UC"+j]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[y,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+j],y],[/\bfocus\/([\w\.]+)/i],[y,[h,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[h,Z+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[h,Z+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[h,"MIUI "+j]],[/fxios\/([-\w\.]+)/i],[y,[h,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+j]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+j],y],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,q],y],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[h,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,R+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[h,"Android "+j]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[y,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[h,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,y],[/(cobalt)\/([\w\.]+)/i],[h,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,K]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[g,$],[f,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[g,$],[f,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[g,E],[f,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[g,E],[f,w]],[/(macintosh);/i],[m,[g,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[g,U],[f,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[g,P],[f,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[g,P],[f,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[g,F],[f,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[g,F],[f,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[g,"OPPO"],[f,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[g,"Vivo"],[f,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[m,[g,"Realme"],[f,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[g,M],[f,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[g,M],[f,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[g,"LG"],[f,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[g,"LG"],[f,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[g,"Lenovo"],[f,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[g,"Nokia"],[f,_]],[/(pixel c)\b/i],[m,[g,N],[f,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[g,N],[f,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[g,D],[f,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[g,D],[f,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[g,"OnePlus"],[f,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[g,S],[f,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[g,S],[f,_]],[/(playbook);[-\w\),; ]+(rim)/i],[m,g,[f,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[g,A],[f,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[g,I],[f,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[g,I],[f,_]],[/(nexus 9)/i],[m,[g,"HTC"],[f,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[m,/_/g," "],[f,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[g,"Acer"],[f,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[g,"Meizu"],[f,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,m,[f,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,m,[f,w]],[/(surface duo)/i],[m,[g,C],[f,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[g,"Fairphone"],[f,_]],[/(u304aa)/i],[m,[g,"AT&T"],[f,_]],[/\bsie-(\w*)/i],[m,[g,"Siemens"],[f,_]],[/\b(rct\w+) b/i],[m,[g,"RCA"],[f,w]],[/\b(venue[\d ]{2,7}) b/i],[m,[g,"Dell"],[f,w]],[/\b(q(?:mv|ta)\w+) b/i],[m,[g,"Verizon"],[f,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[g,"Barnes & Noble"],[f,w]],[/\b(tm\d{3}\w+) b/i],[m,[g,"NuVision"],[f,w]],[/\b(k88) b/i],[m,[g,"ZTE"],[f,w]],[/\b(nx\d{3}j) b/i],[m,[g,"ZTE"],[f,_]],[/\b(gen\d{3}) b.+49h/i],[m,[g,"Swiss"],[f,_]],[/\b(zur\d{3}) b/i],[m,[g,"Swiss"],[f,w]],[/\b((zeki)?tb.*\b) b/i],[m,[g,"Zeki"],[f,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],m,[f,w]],[/\b(ns-?\w{0,9}) b/i],[m,[g,"Insignia"],[f,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[g,"NextBook"],[f,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],m,[f,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],m,[f,_]],[/\b(ph-1) /i],[m,[g,"Essential"],[f,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[g,"Envizen"],[f,w]],[/\b(trio[-\w\. ]+) b/i],[m,[g,"MachSpeed"],[f,w]],[/\btu_(1491) b/i],[m,[g,"Rotor"],[f,w]],[/(shield[\w ]+) b/i],[m,[g,"Nvidia"],[f,w]],[/(sprint) (\w+)/i],[g,m,[f,_]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[g,C],[f,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[g,L],[f,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[g,L],[f,_]],[/smart-tv.+(samsung)/i],[g,[f,x]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[g,$],[f,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,"LG"],[f,x]],[/(apple) ?tv/i],[g,[m,E+" TV"],[f,x]],[/crkey/i],[[m,R+"cast"],[g,N],[f,x]],[/droid.+aft(\w)( bui|\))/i],[m,[g,S],[f,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[g,U],[f,x]],[/(bravia[\w ]+)( bui|\))/i],[m,[g,D],[f,x]],[/(mitv-\w{5}) bui/i],[m,[g,F],[f,x]],[/Hbbtv.*(technisat) (.*);/i],[g,m,[f,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,H],[m,H],[f,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,m,[f,b]],[/droid.+; (shield) bui/i],[m,[g,"Nvidia"],[f,b]],[/(playstation [345portablevi]+)/i],[m,[g,D],[f,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[g,C],[f,b]],[/((pebble))app/i],[g,m,[f,k]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[g,E],[f,k]],[/droid.+; (glass) \d/i],[m,[g,N],[f,k]],[/droid.+; (wt63?0{2,3})\)/i],[m,[g,L],[f,k]],[/(quest( 2| pro)?)/i],[m,[g,q],[f,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[f,T]],[/(aeobc)\b/i],[m,[g,S],[f,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[m,[f,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[f,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,_]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[y,Y,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[y,Y,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,B],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,y],[/\(bb(10);/i],[y,[h,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[h,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[y,[h,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,z],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,y],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,y]]},ee=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof i!==u&&i.navigator?i.navigator:o,a=e||(r&&r.userAgent?r.userAgent:""),n=r&&r.userAgentData?r.userAgentData:o,s=t?V(Q,t):Q,b=r&&r.userAgent==a;return this.getBrowser=function(){var e,t={};return t[h]=o,t[y]=o,G.call(t,a,s.browser),t[p]=typeof(e=t[y])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:o,b&&r&&r.brave&&typeof r.brave.isBrave==l&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[v]=o,G.call(e,a,s.cpu),e},this.getDevice=function(){var e={};return e[g]=o,e[m]=o,e[f]=o,G.call(e,a,s.device),b&&!e[f]&&n&&n.mobile&&(e[f]=_),b&&"Macintosh"==e[m]&&r&&typeof r.standalone!==u&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[m]="iPad",e[f]=w),e},this.getEngine=function(){var e={};return e[h]=o,e[y]=o,G.call(e,a,s.engine),e},this.getOS=function(){var e={};return e[h]=o,e[y]=o,G.call(e,a,s.os),b&&!e[h]&&n&&"Unknown"!=n.platform&&(e[h]=n.platform.replace(/chrome os/i,z).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(e){return a=typeof e===d&&e.length>350?H(e,350):e,this},this.setUA(a),this};ee.VERSION="1.0.35",ee.BROWSER=J([h,y,p]),ee.CPU=J([v]),ee.DEVICE=J([m,g,f,b,_,x,w,k,T]),ee.ENGINE=ee.OS=J([h,y]),typeof s!==u?(n.exports&&(s=n.exports=ee),s.UAParser=ee):r.amdO?void 0!==(a=(function(){return ee}).call(t,r,t,e))&&(e.exports=a):typeof i!==u&&(i.UAParser=ee);var et=typeof i!==u&&(i.jQuery||i.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},a=!0;try{n[e].call(r.exports,r,r.exports,i),a=!1}finally{a&&delete s[e]}return r.exports}i.ab=__dirname+"/",e.exports=i(226)})()},59833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ImageResponse:function(){return a.ImageResponse},NextRequest:function(){return n.NextRequest},NextResponse:function(){return s.NextResponse},URLPattern:function(){return o.URLPattern},after:function(){return l.after},connection:function(){return u.connection},unstable_rootParams:function(){return c.unstable_rootParams},userAgent:function(){return i.userAgent},userAgentFromString:function(){return i.userAgentFromString}});let a=r(7498),n=r(38432),s=r(87870),i=r(41986),o=r(88551),l=r(80745),u=r(47428),c=r(45979)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72779:(e,t,r)=>{"use strict";e.exports=r(44870)},77787:()=>{},80298:(e,t,r)=>{"use strict";let a,n;r.r(t),r.d(t,{patchFetch:()=>iT,routeModule:()=>i_,serverHooks:()=>ik,workAsyncStorage:()=>iw,workUnitAsyncStorage:()=>ix});var s,i,o,l,u,c,d,p,m,h,f,g,y,v,b,_,w,x,k,T,S,E,I,A,j,R,O,N,P,C,M,Z,$={};r.r($),r.d($,{POST:()=>ib});var U=r(72779),D=r(72148),F=r(85707),L=r(59833),q="vercel.ai.error",z=Symbol.for(q),B=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[s]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,q)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};s=z;var V=B,J="AI_APICallError",W=`vercel.ai.error.${J}`,K=Symbol.for(W),H=class extends V{constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:o,isRetryable:l=null!=a&&(408===a||409===a||429===a||a>=500),data:u}){super({name:J,message:e,cause:o}),this[i]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return V.hasMarker(e,W)}};i=K;var G="AI_EmptyResponseBodyError",Y=`vercel.ai.error.${G}`,X=Symbol.for(Y),Q=class extends V{constructor({message:e="Empty response body"}={}){super({name:G,message:e}),this[o]=!0}static isInstance(e){return V.hasMarker(e,Y)}};function ee(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}o=X;var et="AI_InvalidArgumentError",er=`vercel.ai.error.${et}`,ea=Symbol.for(er),en=class extends V{constructor({message:e,cause:t,argument:r}){super({name:et,message:e,cause:t}),this[l]=!0,this.argument=r}static isInstance(e){return V.hasMarker(e,er)}};l=ea;var es="AI_InvalidPromptError",ei=`vercel.ai.error.${es}`,eo=Symbol.for(ei),el=class extends V{constructor({prompt:e,message:t,cause:r}){super({name:es,message:`Invalid prompt: ${t}`,cause:r}),this[u]=!0,this.prompt=e}static isInstance(e){return V.hasMarker(e,ei)}};u=eo;var eu=Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),ec="AI_JSONParseError",ed=`vercel.ai.error.${ec}`,ep=Symbol.for(ed),em=class extends V{constructor({text:e,cause:t}){super({name:ec,message:`JSON parsing failed: Text: ${e}.
Error message: ${ee(t)}`,cause:t}),this[c]=!0,this.text=e}static isInstance(e){return V.hasMarker(e,ed)}};c=ep;var eh="AI_LoadAPIKeyError",ef=`vercel.ai.error.${eh}`,eg=Symbol.for(ef),ey=class extends V{constructor({message:e}){super({name:eh,message:e}),this[d]=!0}static isInstance(e){return V.hasMarker(e,ef)}};d=eg;var ev=Symbol.for("vercel.ai.error.AI_LoadSettingError"),eb=Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),e_="AI_NoSuchModelError",ew=`vercel.ai.error.${e_}`,ex=Symbol.for(ew),ek=class extends V{constructor({errorName:e=e_,modelId:t,modelType:r,message:a=`No such ${r}: ${t}`}){super({name:e,message:a}),this[p]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return V.hasMarker(e,ew)}};p=ex;var eT=Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),eS="AI_TypeValidationError",eE=`vercel.ai.error.${eS}`,eI=Symbol.for(eE),eA=class e extends V{constructor({value:e,cause:t}){super({name:eS,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${ee(t)}`,cause:t}),this[m]=!0,this.value=e}static isInstance(e){return V.hasMarker(e,eE)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};m=eI;var ej="AI_UnsupportedFunctionalityError",eR=`vercel.ai.error.${ej}`,eO=Symbol.for(eR),eN=class extends V{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:ej,message:t}),this[h]=!0,this.functionality=e}static isInstance(e){return V.hasMarker(e,eR)}};function eP(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(eP):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&eP(t)))}h=eO;let eC=(e,t=21)=>(r=t)=>{let a="",n=0|r;for(;n--;)a+=e[Math.random()*e.length|0];return a};var eM=r(85869);async function eZ(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}function e$(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var eU=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let n=eC(r,t);if(null==e)return n;if(r.includes(a))throw new en({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return t=>`${e}${a}${n(t)}`};eU();function eD(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var eF=Symbol.for("vercel.ai.validator");function eL({value:e,schema:t}){var r;let a="object"==typeof t&&null!==t&&eF in t&&!0===t[eF]&&"validate"in t?t:(r=t,{[eF]:!0,validate:e=>{let t=r.safeParse(e);return t.success?{success:!0,value:t.data}:{success:!1,error:t.error}}});try{if(null==a.validate)return{success:!0,value:e};let t=a.validate(e);if(t.success)return t;return{success:!1,error:eA.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:eA.wrap({value:e,cause:t})}}}function eq({text:e,schema:t}){try{let r=eM.parse(e);if(null==t)return{success:!0,value:r,rawValue:r};let a=eL({value:r,schema:t});return a.success?{...a,rawValue:r}:a}catch(t){return{success:!1,error:em.isInstance(t)?t:new em({text:e,cause:t})}}}var ez=()=>globalThis.fetch,eB=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>eV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),eV=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=ez()})=>{try{var o;let l=await i(e,{method:"POST",headers:(o=t,Object.fromEntries(Object.entries(o).filter(([e,t])=>null!=t))),body:r.content,signal:s}),u=e$(l);if(!l.ok){let t;try{t=await n({response:l,url:e,requestBodyValues:r.values})}catch(t){if(eD(t)||H.isInstance(t))throw t;throw new H({message:"Failed to process error response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}throw t.value}try{return await a({response:l,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(eD(t)||H.isInstance(t)))throw t;throw new H({message:"Failed to process successful response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}}catch(t){if(eD(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let a=t.cause;if(null!=a)throw new H({message:`Cannot connect to API: ${a.message}`,cause:a,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}};async function eJ(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var eW=e=>async({response:t})=>{let r=e$(t);if(null==t.body)throw new Q({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(function(){let e,t,r,a="",n=[];function s(e,t){if(""===e){i(t);return}if(e.startsWith(":"))return;let r=e.indexOf(":");if(-1===r){o(e,"");return}let a=e.slice(0,r),n=r+1;o(a,n<e.length&&" "===e[n]?e.slice(n+1):e.slice(n))}function i(a){n.length>0&&(a.enqueue({event:e,data:n.join("\n"),id:t,retry:r}),n=[],e=void 0,r=void 0)}function o(a,s){switch(a){case"event":e=s;break;case"data":n.push(s);break;case"id":t=s;break;case"retry":let i=parseInt(s,10);isNaN(i)||(r=i)}}return new TransformStream({transform(e,t){let{lines:r,incompleteLine:n}=function(e,t){let r=[],a=e;for(let e=0;e<t.length;){let n=t[e++];"\n"===n?(r.push(a),a=""):"\r"===n?(r.push(a),a="","\n"===t[e]&&e++):a+=n}return{lines:r,incompleteLine:a}}(a,e);a=n;for(let e=0;e<r.length;e++)s(r[e],t)},flush(e){s(a,e),i(e)}})}()).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(eq({text:t,schema:e}))}}))}},eK=e=>async({response:t,url:r,requestBodyValues:a})=>{let n=await t.text(),s=eq({text:n,schema:e}),i=e$(t);if(!s.success)throw new H({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},{btoa:eH,atob:eG}=globalThis;function eY(e){let t=eG(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function eX(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return eH(t)}var eQ=r(90678),e0=r(69303);(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),a={};for(let e of r)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(f||(f={})),(g||(g={})).mergeShapes=(e,t)=>({...e,...t});let e1=f.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),e2=e=>{switch(typeof e){case"undefined":return e1.undefined;case"string":return e1.string;case"number":return isNaN(e)?e1.nan:e1.number;case"boolean":return e1.boolean;case"function":return e1.function;case"bigint":return e1.bigint;case"symbol":return e1.symbol;case"object":if(Array.isArray(e))return e1.array;if(null===e)return e1.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return e1.promise;if("undefined"!=typeof Map&&e instanceof Map)return e1.map;if("undefined"!=typeof Set&&e instanceof Set)return e1.set;if("undefined"!=typeof Date&&e instanceof Date)return e1.date;return e1.object;default:return e1.unknown}},e4=f.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class e9 extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(e){if(!(e instanceof e9))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,f.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}e9.create=e=>new e9(e);let e6=(e,t)=>{let r;switch(e.code){case e4.invalid_type:r=e.received===e1.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case e4.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,f.jsonStringifyReplacer)}`;break;case e4.unrecognized_keys:r=`Unrecognized key(s) in object: ${f.joinValues(e.keys,", ")}`;break;case e4.invalid_union:r="Invalid input";break;case e4.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${f.joinValues(e.options)}`;break;case e4.invalid_enum_value:r=`Invalid enum value. Expected ${f.joinValues(e.options)}, received '${e.received}'`;break;case e4.invalid_arguments:r="Invalid function arguments";break;case e4.invalid_return_type:r="Invalid function return type";break;case e4.invalid_date:r="Invalid date";break;case e4.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:f.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case e4.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case e4.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case e4.custom:r="Invalid input";break;case e4.invalid_intersection_types:r="Intersection results could not be merged";break;case e4.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case e4.not_finite:r="Number must be finite";break;default:r=t.defaultError,f.assertNever(e)}return{message:r}},e3=e6;function e5(){return e3}let e7=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function e8(e,t){let r=e5(),a=e7({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===e6?void 0:e6].filter(e=>!!e)});e.common.issues.push(a)}class te{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return tt;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,a=await e.value;r.push({key:t,value:a})}return te.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return tt;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let tt=Object.freeze({status:"aborted"}),tr=e=>({status:"dirty",value:e}),ta=e=>({status:"valid",value:e}),tn=e=>"aborted"===e.status,ts=e=>"dirty"===e.status,ti=e=>"valid"===e.status,to=e=>"undefined"!=typeof Promise&&e instanceof Promise;function tl(e,t,r,a){if("a"===r&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)}function tu(e,t,r,a,n){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(e,r):n?n.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(y||(y={}));class tc{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let td=(e,t)=>{if(ti(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new e9(e.common.issues);return this._error=t,this._error}}};function tp(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:n.defaultError}:void 0===n.data?{message:null!==(s=null!=o?o:a)&&void 0!==s?s:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:n.defaultError}},description:n}}class tm{get description(){return this._def.description}_getType(e){return e2(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:e2(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:e2(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(to(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let a={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:e2(e)},n=this._parseSync({data:e,path:a.path,parent:a});return td(a,n)}"~validate"(e){var t,r;let a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:e2(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:a});return ti(t)?{value:t.value}:{issues:a.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(e=>ti(e)?{value:e.value}:{issues:a.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:e2(e)},a=this._parse({data:e,path:r.path,parent:r});return td(r,await (to(a)?a:Promise.resolve(a)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{let n=e(t),s=()=>a.addIssue({code:e4.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new t5({schema:this,typeName:_.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return t7.create(this,this._def)}nullable(){return t8.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tB.create(this)}promise(){return t3.create(this,this._def)}or(e){return tJ.create([this,e],this._def)}and(e){return tH.create(this,e,this._def)}transform(e){return new t5({...tp(this._def),schema:this,typeName:_.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new re({...tp(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:_.ZodDefault})}brand(){return new rn({typeName:_.ZodBranded,type:this,...tp(this._def)})}catch(e){return new rt({...tp(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:_.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return rs.create(this,e)}readonly(){return ri.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let th=/^c[^\s-]{8,}$/i,tf=/^[0-9a-z]+$/,tg=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ty=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tv=/^[a-z0-9_-]{21}$/i,tb=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,t_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tw=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tk=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tE=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tj=RegExp(`^${tA}$`);function tR(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function tO(e){let t=`${tA}T${tR(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class tN extends tm{_parse(e){var t,r,n,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==e1.string){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.string,received:t.parsedType}),tt}let o=new te;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(e8(i=this._getOrReturnCtx(e,i),{code:e4.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(e8(i=this._getOrReturnCtx(e,i),{code:e4.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?e8(i,{code:e4.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&e8(i,{code:e4.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)tw.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"email",code:e4.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)a||(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:e4.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)ty.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:e4.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)tv.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:e4.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)th.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:e4.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)tf.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:e4.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)tg.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:e4.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){e8(i=this._getOrReturnCtx(e,i),{validation:"url",code:e4.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"regex",code:e4.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?tO(l).test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?tj.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${tR(l)}$`).test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{code:e4.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?t_.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"duration",code:e4.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(r=l.version)||!r)&&tx.test(t)||("v6"===r||!r)&&tT.test(t))&&(e8(i=this._getOrReturnCtx(e,i),{validation:"ip",code:e4.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!tb.test(e))return!1;try{let[r]=e.split("."),a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));if("object"!=typeof n||null===n||!n.typ||!n.alg||t&&n.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(e8(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:e4.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(n=e.data,!(("v4"===(s=l.version)||!s)&&tk.test(n)||("v6"===s||!s)&&tS.test(n))&&(e8(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:e4.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?tE.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"base64",code:e4.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?tI.test(e.data)||(e8(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:e4.invalid_string,message:l.message}),o.dirty()):f.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:e4.invalid_string,...y.errToObj(r)})}_addCheck(e){return new tN({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...y.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...y.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...y.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...y.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new tN({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new tN({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new tN({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tN.create=e=>{var t;return new tN({checks:[],typeName:_.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tp(e)})};class tP extends tm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==e1.number){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.number,received:t.parsedType}),tt}let r=new te;for(let a of this._def.checks)"int"===a.kind?f.isInteger(e.data)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}(e.data,a.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_finite,message:a.message}),r.dirty()):f.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,a){return new tP({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(a)}]})}_addCheck(e){return new tP({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&f.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}tP.create=e=>new tP({checks:[],typeName:_.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...tp(e)});class tC extends tm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==e1.bigint)return this._getInvalidInput(e);let r=new te;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):f.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.bigint,received:t.parsedType}),tt}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,r,a){return new tC({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:y.toString(a)}]})}_addCheck(e){return new tC({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tC.create=e=>{var t;return new tC({checks:[],typeName:_.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...tp(e)})};class tM extends tm{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==e1.boolean){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.boolean,received:t.parsedType}),tt}return ta(e.data)}}tM.create=e=>new tM({typeName:_.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...tp(e)});class tZ extends tm{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==e1.date){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.date,received:t.parsedType}),tt}if(isNaN(e.data.getTime()))return e8(this._getOrReturnCtx(e),{code:e4.invalid_date}),tt;let r=new te;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(e8(t=this._getOrReturnCtx(e,t),{code:e4.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):f.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tZ({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}tZ.create=e=>new tZ({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:_.ZodDate,...tp(e)});class t$ extends tm{_parse(e){if(this._getType(e)!==e1.symbol){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.symbol,received:t.parsedType}),tt}return ta(e.data)}}t$.create=e=>new t$({typeName:_.ZodSymbol,...tp(e)});class tU extends tm{_parse(e){if(this._getType(e)!==e1.undefined){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.undefined,received:t.parsedType}),tt}return ta(e.data)}}tU.create=e=>new tU({typeName:_.ZodUndefined,...tp(e)});class tD extends tm{_parse(e){if(this._getType(e)!==e1.null){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.null,received:t.parsedType}),tt}return ta(e.data)}}tD.create=e=>new tD({typeName:_.ZodNull,...tp(e)});class tF extends tm{constructor(){super(...arguments),this._any=!0}_parse(e){return ta(e.data)}}tF.create=e=>new tF({typeName:_.ZodAny,...tp(e)});class tL extends tm{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ta(e.data)}}tL.create=e=>new tL({typeName:_.ZodUnknown,...tp(e)});class tq extends tm{_parse(e){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.never,received:t.parsedType}),tt}}tq.create=e=>new tq({typeName:_.ZodNever,...tp(e)});class tz extends tm{_parse(e){if(this._getType(e)!==e1.undefined){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.void,received:t.parsedType}),tt}return ta(e.data)}}tz.create=e=>new tz({typeName:_.ZodVoid,...tp(e)});class tB extends tm{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==e1.array)return e8(t,{code:e4.invalid_type,expected:e1.array,received:t.parsedType}),tt;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(e8(t,{code:e?e4.too_big:e4.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(e8(t,{code:e4.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(e8(t,{code:e4.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new tc(t,e,t.path,r)))).then(e=>te.mergeArray(r,e));let n=[...t.data].map((e,r)=>a.type._parseSync(new tc(t,e,t.path,r)));return te.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new tB({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new tB({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new tB({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}tB.create=(e,t)=>new tB({type:e,minLength:null,maxLength:null,exactLength:null,typeName:_.ZodArray,...tp(t)});class tV extends tm{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=f.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==e1.object){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.object,received:t.parsedType}),tt}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof tq&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new tc(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof tq){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(e8(r,{code:e4.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new tc(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>te.mergeObjectSync(t,e)):te.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new tV({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var a,n,s,i;let o=null!==(s=null===(n=(a=this._def).errorMap)||void 0===n?void 0:n.call(a,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=y.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new tV({...this._def,unknownKeys:"strip"})}passthrough(){return new tV({...this._def,unknownKeys:"passthrough"})}extend(e){return new tV({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tV({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new tV({...this._def,catchall:e})}pick(e){let t={};return f.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new tV({...this._def,shape:()=>t})}omit(e){let t={};return f.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new tV({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof tV){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=t7.create(e(n))}return new tV({...t._def,shape:()=>r})}if(t instanceof tB)return new tB({...t._def,type:e(t.element)});if(t instanceof t7)return t7.create(e(t.unwrap()));if(t instanceof t8)return t8.create(e(t.unwrap()));if(t instanceof tG)return tG.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return f.objectKeys(this.shape).forEach(r=>{let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new tV({...this._def,shape:()=>t})}required(e){let t={};return f.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof t7;)e=e._def.innerType;t[r]=e}}),new tV({...this._def,shape:()=>t})}keyof(){return t4(f.objectKeys(this.shape))}}tV.create=(e,t)=>new tV({shape:()=>e,unknownKeys:"strip",catchall:tq.create(),typeName:_.ZodObject,...tp(t)}),tV.strictCreate=(e,t)=>new tV({shape:()=>e,unknownKeys:"strict",catchall:tq.create(),typeName:_.ZodObject,...tp(t)}),tV.lazycreate=(e,t)=>new tV({shape:e,unknownKeys:"strip",catchall:tq.create(),typeName:_.ZodObject,...tp(t)});class tJ extends tm{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new e9(e.ctx.common.issues));return e8(t,{code:e4.invalid_union,unionErrors:r}),tt});{let e;let a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new e9(e));return e8(t,{code:e4.invalid_union,unionErrors:n}),tt}}get options(){return this._def.options}}tJ.create=(e,t)=>new tJ({options:e,typeName:_.ZodUnion,...tp(t)});let tW=e=>{if(e instanceof t1)return tW(e.schema);if(e instanceof t5)return tW(e.innerType());if(e instanceof t2)return[e.value];if(e instanceof t9)return e.options;if(e instanceof t6)return f.objectValues(e.enum);else if(e instanceof re)return tW(e._def.innerType);else if(e instanceof tU)return[void 0];else if(e instanceof tD)return[null];else if(e instanceof t7)return[void 0,...tW(e.unwrap())];else if(e instanceof t8)return[null,...tW(e.unwrap())];else if(e instanceof rn)return tW(e.unwrap());else if(e instanceof ri)return tW(e.unwrap());else if(e instanceof rt)return tW(e._def.innerType);else return[]};class tK extends tm{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==e1.object)return e8(t,{code:e4.invalid_type,expected:e1.object,received:t.parsedType}),tt;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(e8(t,{code:e4.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=tW(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new tK({typeName:_.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...tp(r)})}}class tH extends tm{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(tn(e)||tn(a))return tt;let n=function e(t,r){let a=e2(t),n=e2(r);if(t===r)return{valid:!0,data:t};if(a===e1.object&&n===e1.object){let a=f.objectKeys(r),n=f.objectKeys(t).filter(e=>-1!==a.indexOf(e)),s={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};s[a]=n.data}return{valid:!0,data:s}}if(a===e1.array&&n===e1.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}if(a===e1.date&&n===e1.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,a.value);return n.valid?((ts(e)||ts(a))&&t.dirty(),{status:t.value,value:n.data}):(e8(r,{code:e4.invalid_intersection_types}),tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}tH.create=(e,t,r)=>new tH({left:e,right:t,typeName:_.ZodIntersection,...tp(r)});class tG extends tm{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==e1.array)return e8(r,{code:e4.invalid_type,expected:e1.array,received:r.parsedType}),tt;if(r.data.length<this._def.items.length)return e8(r,{code:e4.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&r.data.length>this._def.items.length&&(e8(r,{code:e4.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new tc(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>te.mergeArray(t,e)):te.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new tG({...this._def,rest:e})}}tG.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new tG({items:e,typeName:_.ZodTuple,rest:null,...tp(t)})};class tY extends tm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==e1.object)return e8(r,{code:e4.invalid_type,expected:e1.object,received:r.parsedType}),tt;let a=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new tc(r,e,r.path,e)),value:s._parse(new tc(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?te.mergeObjectAsync(t,a):te.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new tY(t instanceof tm?{keyType:e,valueType:t,typeName:_.ZodRecord,...tp(r)}:{keyType:tN.create(),valueType:e,typeName:_.ZodRecord,...tp(t)})}}class tX extends tm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==e1.map)return e8(r,{code:e4.invalid_type,expected:e1.map,received:r.parsedType}),tt;let a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new tc(r,e,r.path,[s,"key"])),value:n._parse(new tc(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return tt;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return tt;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}tX.create=(e,t,r)=>new tX({valueType:t,keyType:e,typeName:_.ZodMap,...tp(r)});class tQ extends tm{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==e1.set)return e8(r,{code:e4.invalid_type,expected:e1.set,received:r.parsedType}),tt;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(e8(r,{code:e4.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(e8(r,{code:e4.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return tt;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new tc(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new tQ({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new tQ({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tQ.create=(e,t)=>new tQ({valueType:e,minSize:null,maxSize:null,typeName:_.ZodSet,...tp(t)});class t0 extends tm{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==e1.function)return e8(t,{code:e4.invalid_type,expected:e1.function,received:t.parsedType}),tt;function r(e,r){return e7({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,e5(),e6].filter(e=>!!e),issueData:{code:e4.invalid_arguments,argumentsError:r}})}function a(e,r){return e7({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,e5(),e6].filter(e=>!!e),issueData:{code:e4.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof t3){let e=this;return ta(async function(...t){let i=new e9([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(a(l,e)),i})})}{let e=this;return ta(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new e9([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new e9([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t0({...this._def,args:tG.create(e).rest(tL.create())})}returns(e){return new t0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new t0({args:e||tG.create([]).rest(tL.create()),returns:t||tL.create(),typeName:_.ZodFunction,...tp(r)})}}class t1 extends tm{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t1.create=(e,t)=>new t1({getter:e,typeName:_.ZodLazy,...tp(t)});class t2 extends tm{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return e8(t,{received:t.data,code:e4.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function t4(e,t){return new t9({values:e,typeName:_.ZodEnum,...tp(t)})}t2.create=(e,t)=>new t2({value:e,typeName:_.ZodLiteral,...tp(t)});class t9 extends tm{constructor(){super(...arguments),v.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return e8(t,{expected:f.joinValues(r),received:t.parsedType,code:e4.invalid_type}),tt}if(tl(this,v,"f")||tu(this,v,new Set(this._def.values),"f"),!tl(this,v,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return e8(t,{received:t.data,code:e4.invalid_enum_value,options:r}),tt}return ta(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return t9.create(e,{...this._def,...t})}exclude(e,t=this._def){return t9.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}v=new WeakMap,t9.create=t4;class t6 extends tm{constructor(){super(...arguments),b.set(this,void 0)}_parse(e){let t=f.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==e1.string&&r.parsedType!==e1.number){let e=f.objectValues(t);return e8(r,{expected:f.joinValues(e),received:r.parsedType,code:e4.invalid_type}),tt}if(tl(this,b,"f")||tu(this,b,new Set(f.getValidEnumValues(this._def.values)),"f"),!tl(this,b,"f").has(e.data)){let e=f.objectValues(t);return e8(r,{received:r.data,code:e4.invalid_enum_value,options:e}),tt}return ta(e.data)}get enum(){return this._def.values}}b=new WeakMap,t6.create=(e,t)=>new t6({values:e,typeName:_.ZodNativeEnum,...tp(t)});class t3 extends tm{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==e1.promise&&!1===t.common.async?(e8(t,{code:e4.invalid_type,expected:e1.promise,received:t.parsedType}),tt):ta((t.parsedType===e1.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t3.create=(e,t)=>new t3({type:e,typeName:_.ZodPromise,...tp(t)});class t5 extends tm{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{e8(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return tt;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?tt:"dirty"===a.status||"dirty"===t.value?tr(a.value):a});{if("aborted"===t.value)return tt;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?tt:"dirty"===a.status||"dirty"===t.value?tr(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?tt:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?tt:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>ti(e)?Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ti(e))return e;let s=a.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}f.assertNever(a)}}t5.create=(e,t,r)=>new t5({schema:e,typeName:_.ZodEffects,effect:t,...tp(r)}),t5.createWithPreprocess=(e,t,r)=>new t5({schema:t,effect:{type:"preprocess",transform:e},typeName:_.ZodEffects,...tp(r)});class t7 extends tm{_parse(e){return this._getType(e)===e1.undefined?ta(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t7.create=(e,t)=>new t7({innerType:e,typeName:_.ZodOptional,...tp(t)});class t8 extends tm{_parse(e){return this._getType(e)===e1.null?ta(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t8.create=(e,t)=>new t8({innerType:e,typeName:_.ZodNullable,...tp(t)});class re extends tm{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===e1.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}re.create=(e,t)=>new re({innerType:e,typeName:_.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...tp(t)});class rt extends tm{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return to(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new e9(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new e9(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rt.create=(e,t)=>new rt({innerType:e,typeName:_.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...tp(t)});class rr extends tm{_parse(e){if(this._getType(e)!==e1.nan){let t=this._getOrReturnCtx(e);return e8(t,{code:e4.invalid_type,expected:e1.nan,received:t.parsedType}),tt}return{status:"valid",value:e.data}}}rr.create=e=>new rr({typeName:_.ZodNaN,...tp(e)});let ra=Symbol("zod_brand");class rn extends tm{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class rs extends tm{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tt:"dirty"===e.status?(t.dirty(),tr(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new rs({in:e,out:t,typeName:_.ZodPipeline})}}class ri extends tm{_parse(e){let t=this._def.innerType._parse(e),r=e=>(ti(e)&&(e.value=Object.freeze(e.value)),e);return to(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function ro(e,t={},r){return e?tF.create().superRefine((a,n)=>{var s,i;if(!e(a)){let e="function"==typeof t?t(a):"string"==typeof t?{message:t}:t,o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i,l="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...l,fatal:o})}}):tF.create()}ri.create=(e,t)=>new ri({innerType:e,typeName:_.ZodReadonly,...tp(t)});let rl={object:tV.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(_||(_={}));let ru=tN.create,rc=tP.create,rd=rr.create,rp=tC.create,rm=tM.create,rh=tZ.create,rf=t$.create,rg=tU.create,ry=tD.create,rv=tF.create,rb=tL.create,r_=tq.create,rw=tz.create,rx=tB.create,rk=tV.create,rT=tV.strictCreate,rS=tJ.create,rE=tK.create,rI=tH.create,rA=tG.create,rj=tY.create,rR=tX.create,rO=tQ.create,rN=t0.create,rP=t1.create,rC=t2.create,rM=t9.create,rZ=t6.create,r$=t3.create,rU=t5.create,rD=t7.create,rF=t8.create,rL=t5.createWithPreprocess,rq=rs.create;var rz=Object.freeze({__proto__:null,defaultErrorMap:e6,setErrorMap:function(e){e3=e},getErrorMap:e5,makeIssue:e7,EMPTY_PATH:[],addIssueToContext:e8,ParseStatus:te,INVALID:tt,DIRTY:tr,OK:ta,isAborted:tn,isDirty:ts,isValid:ti,isAsync:to,get util(){return f},get objectUtil(){return g},ZodParsedType:e1,getParsedType:e2,ZodType:tm,datetimeRegex:tO,ZodString:tN,ZodNumber:tP,ZodBigInt:tC,ZodBoolean:tM,ZodDate:tZ,ZodSymbol:t$,ZodUndefined:tU,ZodNull:tD,ZodAny:tF,ZodUnknown:tL,ZodNever:tq,ZodVoid:tz,ZodArray:tB,ZodObject:tV,ZodUnion:tJ,ZodDiscriminatedUnion:tK,ZodIntersection:tH,ZodTuple:tG,ZodRecord:tY,ZodMap:tX,ZodSet:tQ,ZodFunction:t0,ZodLazy:t1,ZodLiteral:t2,ZodEnum:t9,ZodNativeEnum:t6,ZodPromise:t3,ZodEffects:t5,ZodTransformer:t5,ZodOptional:t7,ZodNullable:t8,ZodDefault:re,ZodCatch:rt,ZodNaN:rr,BRAND:ra,ZodBranded:rn,ZodPipeline:rs,ZodReadonly:ri,custom:ro,Schema:tm,ZodSchema:tm,late:rl,get ZodFirstPartyTypeKind(){return _},coerce:{string:e=>tN.create({...e,coerce:!0}),number:e=>tP.create({...e,coerce:!0}),boolean:e=>tM.create({...e,coerce:!0}),bigint:e=>tC.create({...e,coerce:!0}),date:e=>tZ.create({...e,coerce:!0})},any:rv,array:rx,bigint:rp,boolean:rm,date:rh,discriminatedUnion:rE,effect:rU,enum:rM,function:rN,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ro(t=>t instanceof e,t),intersection:rI,lazy:rP,literal:rC,map:rR,nan:rd,nativeEnum:rZ,never:r_,null:ry,nullable:rF,number:rc,object:rk,oboolean:()=>rm().optional(),onumber:()=>rc().optional(),optional:rD,ostring:()=>ru().optional(),pipeline:rq,preprocess:rL,promise:r$,record:rj,set:rO,strictObject:rT,string:ru,symbol:rf,transformer:rU,tuple:rA,undefined:rg,union:rS,unknown:rb,void:rw,NEVER:tt,ZodIssueCode:e4,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:e9});let rB=Symbol("Let zodToJsonSchema decide on which parser to use"),rV={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},rJ=e=>"string"==typeof e?{...rV,name:e}:{...rV,...e},rW=e=>{let t=rJ(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function rK(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function rH(e,t,r,a,n){e[t]=r,rK(e,t,a,n)}function rG(e,t){return an(e.type._def,t)}let rY=(e,t)=>an(e.innerType._def,t),rX=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let a of e.checks)switch(a.kind){case"min":rH(r,"minimum",a.value,a.message,t);break;case"max":rH(r,"maximum",a.value,a.message,t)}return r},rQ=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,r0={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===n&&(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function r1(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":rH(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":rH(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":r9(r,"email",a.message,t);break;case"format:idn-email":r9(r,"idn-email",a.message,t);break;case"pattern:zod":r6(r,r0.email,a.message,t)}break;case"url":r9(r,"uri",a.message,t);break;case"uuid":r9(r,"uuid",a.message,t);break;case"regex":r6(r,a.regex,a.message,t);break;case"cuid":r6(r,r0.cuid,a.message,t);break;case"cuid2":r6(r,r0.cuid2,a.message,t);break;case"startsWith":r6(r,RegExp(`^${r2(a.value,t)}`),a.message,t);break;case"endsWith":r6(r,RegExp(`${r2(a.value,t)}$`),a.message,t);break;case"datetime":r9(r,"date-time",a.message,t);break;case"date":r9(r,"date",a.message,t);break;case"time":r9(r,"time",a.message,t);break;case"duration":r9(r,"duration",a.message,t);break;case"length":rH(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),rH(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":r6(r,RegExp(r2(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&r9(r,"ipv4",a.message,t),"v4"!==a.version&&r9(r,"ipv6",a.message,t);break;case"base64url":r6(r,r0.base64url,a.message,t);break;case"jwt":r6(r,r0.jwt,a.message,t);break;case"cidr":"v6"!==a.version&&r6(r,r0.ipv4Cidr,a.message,t),"v4"!==a.version&&r6(r,r0.ipv6Cidr,a.message,t);break;case"emoji":r6(r,r0.emoji(),a.message,t);break;case"ulid":r6(r,r0.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":r9(r,"binary",a.message,t);break;case"contentEncoding:base64":rH(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":r6(r,r0.base64,a.message,t)}break;case"nanoid":r6(r,r0.nanoid,a.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function r2(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)r4.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let r4=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function r9(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):rH(e,"format",t,r,a)}function r6(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:r3(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):rH(e,"pattern",r3(t,a),r,a)}function r3(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=r.i?e.source.toLowerCase():e.source,n="",s=!1,i=!1,o=!1;for(let e=0;e<a.length;e++){if(s){n+=a[e],s=!1;continue}if(r.i){if(i){if(a[e].match(/[a-z]/)){o?(n+=a[e],n+=`${a[e-2]}-${a[e]}`.toUpperCase(),o=!1):"-"===a[e+1]&&a[e+2]?.match(/[a-z]/)?(n+=a[e],o=!0):n+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){n+=`[${a[e]}${a[e].toUpperCase()}]`;continue}}if(r.m){if("^"===a[e]){n+=`(^|(?<=[\r
]))`;continue}if("$"===a[e]){n+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===a[e]){n+=i?`${a[e]}\r
`:`[${a[e]}\r
]`;continue}n+=a[e],"\\"===a[e]?s=!0:i&&"]"===a[e]?i=!1:i||"["!==a[e]||(i=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}function r5(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===_.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===_.ZodString&&e.keyType._def.checks?.length){let{type:a,...n}=r1(e.keyType._def,t);return{...r,propertyNames:n}}if(e.keyType?._def.typeName===_.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===_.ZodBranded&&e.keyType._def.type._def.typeName===_.ZodString&&e.keyType._def.type._def.checks?.length){let{type:a,...n}=rG(e.keyType._def,t);return{...r,propertyNames:n}}return r}let r7={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},r8=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>an(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},ae=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return an(e.innerType._def,t);let r=an(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},at=(e,t)=>{if("input"===t.pipeStrategy)return an(e.in._def,t);if("output"===t.pipeStrategy)return an(e.out._def,t);let r=an(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=an(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(e=>void 0!==e)}},ar=(e,t)=>an(e.innerType._def,t),aa=(e,t,r)=>{switch(t){case _.ZodString:return r1(e,r);case _.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",rK(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?rH(r,"minimum",a.value,a.message,t):rH(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),rH(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?rH(r,"maximum",a.value,a.message,t):rH(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),rH(r,"maximum",a.value,a.message,t));break;case"multipleOf":rH(r,"multipleOf",a.value,a.message,t)}return r}(e,r);case _.ZodObject:return function(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},n=[],s=e.shape();for(let e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch{return!0}}(i);o&&r&&(i instanceof t7&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);let l=an(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,o||n.push(e))}n.length&&(a.required=n);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return an(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(a.additionalProperties=i),a}(e,r);case _.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?rH(r,"minimum",a.value,a.message,t):rH(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),rH(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?rH(r,"maximum",a.value,a.message,t):rH(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),rH(r,"maximum",a.value,a.message,t));break;case"multipleOf":rH(r,"multipleOf",a.value,a.message,t)}return r}(e,r);case _.ZodBoolean:return{type:"boolean"};case _.ZodDate:return function e(t,r,a){let n=a??r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,n)=>e(t,r,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rX(t,r)}}(e,r);case _.ZodUndefined:return{not:{}};case _.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case _.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==_.ZodAny&&(r.items=an(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&rH(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&rH(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(rH(r,"minItems",e.exactLength.value,e.exactLength.message,t),rH(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case _.ZodUnion:case _.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return r8(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in r7&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=r7[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return r8(e,t)}(e,r);case _.ZodIntersection:return function(e,t){let r=[an(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),an(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,n=[];return r.forEach(e=>{if(rQ(e))n.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else a=void 0;n.push(t)}}),n.length?{allOf:n,...a}:void 0}(e,r);case _.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>an(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:an(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>an(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case _.ZodRecord:return r5(e,r);case _.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case _.ZodEnum:return{type:"string",enum:Array.from(e.values)};case _.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),a=Array.from(new Set(r.map(e=>typeof e)));return{type:1===a.length?"string"===a[0]?"string":"number":["string","number"],enum:r}}(e);case _.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:r7[e.innerType._def.typeName],nullable:!0}:{type:[r7[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=an(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=an(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case _.ZodOptional:return ae(e,r);case _.ZodMap:return function(e,t){return"record"===t.mapStrategy?r5(e,t):{type:"array",maxItems:125,items:{type:"array",items:[an(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},an(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case _.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:an(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&rH(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&rH(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case _.ZodLazy:return()=>e.getter()._def;case _.ZodPromise:return an(e.type._def,r);case _.ZodNaN:case _.ZodNever:return{not:{}};case _.ZodEffects:return function(e,t){return"input"===t.effectStrategy?an(e.schema._def,t):{}}(e,r);case _.ZodAny:case _.ZodUnknown:return{};case _.ZodDefault:return function(e,t){return{...an(e.innerType._def,t),default:e.defaultValue()}}(e,r);case _.ZodBranded:return rG(e,r);case _.ZodReadonly:return ar(e,r);case _.ZodCatch:return rY(e,r);case _.ZodPipeline:return at(e,r);case _.ZodFunction:case _.ZodVoid:case _.ZodSymbol:default:return}};function an(e,t,r=!1){let a=t.seen.get(e);if(t.override){let n=t.override?.(e,t,a,r);if(n!==rB)return n}if(a&&!r){let e=as(a,t);if(void 0!==e)return e}let n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);let s=aa(e,e.typeName,t),i="function"==typeof s?an(s(),t):s;if(i&&ao(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return n.jsonSchema=i,r}return n.jsonSchema=i,i}let as=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ai(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},ai=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},ao=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),al=(e,t)=>{let r=rW(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:an(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,n="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,s=an(e._def,void 0===n?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??{},i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(s.title=i);let o=void 0===n?a?{...s,[r.definitionPath]:a}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...a,[n]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var au={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},ac={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},ad={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ap={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},am={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},ah=[au,ac,ad,ap,am],af={[au.code]:au,[ac.code]:ac,[ad.code]:ad,[ap.code]:ap,[am.code]:am};au.name,au.code,ac.name,ac.code,ad.name,ad.code,ap.name,ap.code,am.name,am.code;var ag=ah.map(e=>e.code);function ay(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=eq({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=eq({text:function(e){let t=["ROOT"],r=-1,a=null;function n(e,n,s){switch(e){case'"':r=n,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=n,a=n,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=n,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":r=n,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":r=n,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,a){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=a,t.pop()}}function i(e,a){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=a,t.pop()}}for(let o=0;o<e.length;o++){let l=e[o];switch(t[t.length-1]){case"ROOT":n(l,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(l,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,o);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=o}break;case"INSIDE_ARRAY_START":"]"===l?(r=o,t.pop()):(r=o,n(l,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop();break;default:r=o}break;case"INSIDE_ARRAY_AFTER_COMMA":n(l,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=o;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(a,o+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?r=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o))}}}let o=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(a,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}return o}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}var av=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],ab=Object.fromEntries(av.map(e=>[e.code,e]));Object.fromEntries(av.map(e=>[e.name,e.code]));var a_=av.map(e=>e.code),aw=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!a_.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let a=JSON.parse(e.slice(t+1));return ab[r].parse(a)};function ax(e,t){let r=av.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}async function ak({stream:e,onTextPart:t,onReasoningPart:r,onReasoningSignaturePart:a,onRedactedReasoningPart:n,onSourcePart:s,onFilePart:i,onDataPart:o,onErrorPart:l,onToolCallStreamingStartPart:u,onToolCallDeltaPart:c,onToolCallPart:d,onToolResultPart:p,onMessageAnnotationsPart:m,onFinishMessagePart:h,onFinishStepPart:f,onStartStepPart:g}){let y=e.getReader(),v=new TextDecoder,b=[],_=0;for(;;){let{value:e}=await y.read();if(e&&(b.push(e),_+=e.length,10!==e[e.length-1]))continue;if(0===b.length)break;let w=function(e,t){let r=new Uint8Array(t),a=0;for(let t of e)r.set(t,a),a+=t.length;return e.length=0,r}(b,_);for(let{type:e,value:y}of(_=0,v.decode(w,{stream:!0}).split("\n").filter(e=>""!==e).map(aw)))switch(e){case"text":await (null==t?void 0:t(y));break;case"reasoning":await (null==r?void 0:r(y));break;case"reasoning_signature":await (null==a?void 0:a(y));break;case"redacted_reasoning":await (null==n?void 0:n(y));break;case"file":await (null==i?void 0:i(y));break;case"source":await (null==s?void 0:s(y));break;case"data":await (null==o?void 0:o(y));break;case"error":await (null==l?void 0:l(y));break;case"message_annotations":await (null==m?void 0:m(y));break;case"tool_call_streaming_start":await (null==u?void 0:u(y));break;case"tool_call_delta":await (null==c?void 0:c(y));break;case"tool_call":await (null==d?void 0:d(y));break;case"tool_result":await (null==p?void 0:p(y));break;case"finish_message":await (null==h?void 0:h(y));break;case"finish_step":await (null==f?void 0:f(y));break;case"start_step":await (null==g?void 0:g(y));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function aT({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:a}=await r.read();if(e)break;await t(a)}}var aS=Symbol.for("vercel.ai.schema");function aE(e){return"object"==typeof e&&null!==e&&aS in e&&!0===e[aS]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[aS]:!0,_type:void 0,[eF]:!0,jsonSchema:e,validate:t}}(al(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var aI=Object.defineProperty,aA=(e,t)=>{for(var r in t)aI(e,r,{get:t[r],enumerable:!0})};function aj(e,{contentType:t,dataStreamVersion:r}){let a=new Headers(null!=e?e:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}function aR(e,{contentType:t,dataStreamVersion:r}){let a={};if(null!=e)for(let[t,r]of Object.entries(e))a[t]=r;return null==a["Content-Type"]&&(a["Content-Type"]=t),void 0!==r&&(a["X-Vercel-AI-Data-Stream"]=r),a}function aO({response:e,status:t,statusText:r,headers:a,stream:n}){e.writeHead(null!=t?t:200,r,a);let s=n.getReader();(async()=>{try{for(;;){let{done:t,value:r}=await s.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}var aN="AI_InvalidArgumentError",aP=`vercel.ai.error.${aN}`,aC=Symbol.for(aP),aM=class extends V{constructor({parameter:e,value:t,message:r}){super({name:aN,message:`Invalid argument for parameter ${e}: ${r}`}),this[w]=!0,this.parameter=e,this.value=t}static isInstance(e){return V.hasMarker(e,aP)}};w=aC;var aZ="AI_RetryError",a$=`vercel.ai.error.${aZ}`,aU=Symbol.for(a$),aD=class extends V{constructor({message:e,reason:t,errors:r}){super({name:aZ,message:e}),this[x]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return V.hasMarker(e,a$)}};x=aU;var aF=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async a=>aL(a,{maxRetries:e,delayInMs:t,backoffFactor:r});async function aL(e,{maxRetries:t,delayInMs:r,backoffFactor:a},n=[]){try{return await e()}catch(l){if(eD(l)||0===t)throw l;let s=null==l?"unknown error":"string"==typeof l?l:l instanceof Error?l.message:JSON.stringify(l),i=[...n,l],o=i.length;if(o>t)throw new aD({message:`Failed after ${o} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:i});if(l instanceof Error&&H.isInstance(l)&&!0===l.isRetryable&&o<=t)return await eZ(r),aL(e,{maxRetries:t,delayInMs:a*r,backoffFactor:a},i);if(1===o)throw l;throw new aD({message:`Failed after ${o} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:i})}}function aq({maxRetries:e}){if(null!=e){if(!Number.isInteger(e))throw new aM({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new aM({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=null!=e?e:2;return{maxRetries:t,retry:aF({maxRetries:t})}}function az({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function aB({model:e,settings:t,telemetry:r,headers:a}){var n;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(n=null==r?void 0:r.metadata)?n:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=a?a:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}var aV={startSpan:()=>aJ,startActiveSpan:(e,t,r,a)=>"function"==typeof t?t(aJ):"function"==typeof r?r(aJ):"function"==typeof a?a(aJ):void 0},aJ={spanContext:()=>aW,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},aW={traceId:"",spanId:"",traceFlags:0};function aK({isEnabled:e=!1,tracer:t}={}){return e?t||eQ.u.getTracer("ai"):aV}function aH({name:e,tracer:t,attributes:r,fn:a,endWhenDone:n=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await a(e);return n&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:e0.s.ERROR,message:t.message})):e.setStatus({code:e0.s.ERROR})}finally{e.end()}throw t}})}function aG({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,a])=>{if(void 0===a)return t;if("object"==typeof a&&"input"in a&&"function"==typeof a.input){if((null==e?void 0:e.recordInputs)===!1)return t;let n=a.input();return void 0===n?t:{...t,[r]:n}}if("object"==typeof a&&"output"in a&&"function"==typeof a.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let n=a.output();return void 0===n?t:{...t,[r]:n}}return{...t,[r]:a}},{})}var aY="AI_NoImageGeneratedError",aX=`vercel.ai.error.${aY}`;k=Symbol.for(aX);var aQ=class{constructor({data:e,mimeType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mimeType=t}get base64(){return null==this.base64Data&&(this.base64Data=eX(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=eY(this.base64Data)),this.uint8ArrayData}},a0=class extends aQ{constructor(e){super(e),this.type="file"}},a1=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],a2=e=>{let t="string"==typeof e?eY(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)},a4="AI_NoObjectGeneratedError",a9=`vercel.ai.error.${a4}`,a6=Symbol.for(a9),a3=class extends V{constructor({message:e="No object generated.",cause:t,text:r,response:a,usage:n,finishReason:s}){super({name:a4,message:e,cause:t}),this[T]=!0,this.text=r,this.response=a,this.usage=n,this.finishReason=s}static isInstance(e){return V.hasMarker(e,a9)}};T=a6;var a5="AI_DownloadError",a7=`vercel.ai.error.${a5}`,a8=Symbol.for(a7),ne=class extends V{constructor({url:e,statusCode:t,statusText:r,cause:a,message:n=null==a?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:a5,message:n,cause:a}),this[S]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return V.hasMarker(e,a7)}};async function nt({url:e}){var t;let r=e.toString();try{let e=await fetch(r);if(!e.ok)throw new ne({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(ne.isInstance(e))throw e;throw new ne({url:r,cause:e})}}S=a8;var nr="AI_InvalidDataContentError",na=`vercel.ai.error.${nr}`,nn=Symbol.for(na),ns=class extends V{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:nr,message:r,cause:t}),this[E]=!0,this.content=e}static isInstance(e){return V.hasMarker(e,na)}};E=nn;var ni=rz.union([rz.string(),rz.instanceof(Uint8Array),rz.instanceof(ArrayBuffer),rz.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function no(e){return"string"==typeof e?e:e instanceof ArrayBuffer?eX(new Uint8Array(e)):eX(e)}function nl(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return eY(e)}catch(t){throw new ns({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new ns({content:e})}var nu="AI_InvalidMessageRoleError",nc=`vercel.ai.error.${nu}`,nd=Symbol.for(nc),np=class extends V{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:nu,message:t}),this[I]=!0,this.role=e}static isInstance(e){return V.hasMarker(e,nc)}};async function nm({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:a=nt}){let n=await nh(e.messages,a,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function(e,t){var r,a,n,s,i,o;let l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:null!=(a=e.providerOptions)?a:e.experimental_providerMetadata};return{role:"user",content:e.content.map(e=>(function(e,t){var r,a,n,s;let i,o,l;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};let u=e.mimeType,c=e.type;switch(c){case"image":i=e.image;break;case"file":i=e.data;break;default:throw Error(`Unsupported part type: ${c}`)}try{o="string"==typeof i?new URL(i):i}catch(e){o=i}if(o instanceof URL){if("data:"===o.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}(o.toString());if(null==e||null==t)throw Error(`Invalid data URL format in part ${c}`);u=e,l=nl(t)}else{let e=t[o.toString()];e?(l=e.data,null!=u||(u=e.mimeType)):l=o}}else l=nl(o);switch(c){case"image":return l instanceof Uint8Array&&(u=null!=(a=function({data:e,signatures:t}){let r="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?a2(e):e;for(let e of t)if("string"==typeof r?r.startsWith(e.base64Prefix):r.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>r[t]===e))return e.mimeType}({data:l,signatures:a1}))?a:u),{type:"image",image:l,mimeType:u,providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata};case"file":if(null==u)throw Error("Mime type is missing for file part");return{type:"file",data:l instanceof Uint8Array?no(l):l,filename:e.filename,mimeType:u,providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{var t;let r=null!=(t=e.providerOptions)?t:e.experimental_providerMetadata;switch(e.type){case"file":return{type:"file",data:e.data instanceof URL?e.data:no(e.data),filename:e.filename,mimeType:e.mimeType,providerMetadata:r};case"reasoning":return{type:"reasoning",text:e.text,signature:e.signature,providerMetadata:r};case"redacted-reasoning":return{type:"redacted-reasoning",data:e.data,providerMetadata:r};case"text":return{type:"text",text:e.text,providerMetadata:r};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,providerMetadata:r}}}),providerMetadata:null!=(i=e.providerOptions)?i:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>{var t;return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:null!=(t=e.providerOptions)?t:e.experimental_providerMetadata}}),providerMetadata:null!=(o=e.providerOptions)?o:e.experimental_providerMetadata};default:throw new np({role:l})}})(e,n))]}async function nh(e,t,r,a){let n=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>"image"!==e.type||!0!==r).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!a(e));return Object.fromEntries((await Promise.all(n.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}function nf({maxTokens:e,temperature:t,topP:r,topK:a,presencePenalty:n,frequencyPenalty:s,stopSequences:i,seed:o}){if(null!=e){if(!Number.isInteger(e))throw new aM({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new aM({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new aM({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new aM({parameter:"topP",value:r,message:"topP must be a number"});if(null!=a&&"number"!=typeof a)throw new aM({parameter:"topK",value:a,message:"topK must be a number"});if(null!=n&&"number"!=typeof n)throw new aM({parameter:"presencePenalty",value:n,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new aM({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new aM({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:a,presencePenalty:n,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o}}function ng(e){var t,r,a;let n=[];for(let s of e){let e;try{e=new URL(s.url)}catch(e){throw Error(`Invalid URL: ${s.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=s.contentType)?void 0:t.startsWith("image/"))n.push({type:"image",image:e});else{if(!s.contentType)throw Error("If the attachment is not an image, it must specify a content type");n.push({type:"file",data:e,mimeType:s.contentType})}break;case"data:":{let e,t,i;try{[e,t]=s.url.split(","),i=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${s.url}`)}if(null==i||null==t)throw Error(`Invalid data URL format: ${s.url}`);if(null==(r=s.contentType)?void 0:r.startsWith("image/"))n.push({type:"image",image:nl(t)});else if(null==(a=s.contentType)?void 0:a.startsWith("text/"))n.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(nl(t))});else{if(!s.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");n.push({type:"file",data:t,mimeType:s.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return n}I=nd;var ny="AI_MessageConversionError",nv=`vercel.ai.error.${ny}`,nb=Symbol.for(nv),n_=class extends V{constructor({originalMessage:e,message:t}){super({name:ny,message:t}),this[A]=!0,this.originalMessage=e}static isInstance(e){return V.hasMarker(e,nv)}};A=nb;var nw=rz.lazy(()=>rz.union([rz.null(),rz.string(),rz.number(),rz.boolean(),rz.record(rz.string(),nw),rz.array(nw)])),nx=rz.record(rz.string(),rz.record(rz.string(),nw)),nk=rz.array(rz.union([rz.object({type:rz.literal("text"),text:rz.string()}),rz.object({type:rz.literal("image"),data:rz.string(),mimeType:rz.string().optional()})])),nT=rz.object({type:rz.literal("text"),text:rz.string(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nS=rz.object({type:rz.literal("image"),image:rz.union([ni,rz.instanceof(URL)]),mimeType:rz.string().optional(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nE=rz.object({type:rz.literal("file"),data:rz.union([ni,rz.instanceof(URL)]),filename:rz.string().optional(),mimeType:rz.string(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nI=rz.object({type:rz.literal("reasoning"),text:rz.string(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nA=rz.object({type:rz.literal("redacted-reasoning"),data:rz.string(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nj=rz.object({type:rz.literal("tool-call"),toolCallId:rz.string(),toolName:rz.string(),args:rz.unknown(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nR=rz.object({type:rz.literal("tool-result"),toolCallId:rz.string(),toolName:rz.string(),result:rz.unknown(),content:nk.optional(),isError:rz.boolean().optional(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nO=rz.object({role:rz.literal("system"),content:rz.string(),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nN=rz.object({role:rz.literal("user"),content:rz.union([rz.string(),rz.array(rz.union([nT,nS,nE]))]),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nP=rz.object({role:rz.literal("assistant"),content:rz.union([rz.string(),rz.array(rz.union([nT,nE,nI,nA,nj]))]),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nC=rz.object({role:rz.literal("tool"),content:rz.array(nR),providerOptions:nx.optional(),experimental_providerMetadata:nx.optional()}),nM=rz.union([nO,nN,nP,nC]);function nZ({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new el({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new el({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new el({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new el({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let r="ui-messages"===function(e){if(!Array.isArray(e))throw new el({prompt:e,message:`messages must be an array of CoreMessage or UIMessage
Received non-array value: ${JSON.stringify(e)}`,cause:e});if(0===e.length)return"messages";let t=e.map(n$);if(t.some(e=>"has-ui-specific-parts"===e))return"ui-messages";let r=t.findIndex(e=>"has-core-specific-parts"!==e&&"message"!==e);if(-1===r)return"messages";throw new el({prompt:e,message:`messages must be an array of CoreMessage or UIMessage
Received message of type: "${t[r]}" at index ${r}
messages[${r}]: ${JSON.stringify(e[r])}`,cause:e})}(e.messages)?function(e,t){var r,a;let n=null!=(r=null==t?void 0:t.tools)?r:{},s=[];for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1,{role:o,content:l,experimental_attachments:u}=r;switch(o){case"system":s.push({role:"system",content:l});break;case"user":if(null==r.parts)s.push({role:"user",content:u?[{type:"text",text:l},...ng(u)]:l});else{let e=r.parts.filter(e=>"text"===e.type).map(e=>({type:"text",text:e.text}));s.push({role:"user",content:u?[...e,...ng(u)]:e})}break;case"assistant":{if(null!=r.parts){let e=function(){let e=[];for(let t of o)switch(t.type){case"file":case"text":e.push(t);break;case"reasoning":for(let r of t.details)switch(r.type){case"text":e.push({type:"reasoning",text:r.text,signature:r.signature});break;case"redacted":e.push({type:"redacted-reasoning",data:r.data})}break;case"tool-invocation":e.push({type:"tool-call",toolCallId:t.toolInvocation.toolCallId,toolName:t.toolInvocation.toolName,args:t.toolInvocation.args});break;default:throw Error(`Unsupported part: ${t}`)}s.push({role:"assistant",content:e});let a=o.filter(e=>"tool-invocation"===e.type).map(e=>e.toolInvocation);a.length>0&&s.push({role:"tool",content:a.map(e=>{if(!("result"in e))throw new n_({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:t,toolName:a,result:s}=e,i=n[a];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:t,toolName:a,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:t,toolName:a,result:s}})}),o=[],i=!1,t++},t=0,i=!1,o=[];for(let n of r.parts)switch(n.type){case"text":i&&e(),o.push(n);break;case"file":case"reasoning":o.push(n);break;case"tool-invocation":(null!=(a=n.toolInvocation.step)?a:0)!==t&&e(),o.push(n),i=!0}e();break}let e=r.toolInvocations;if(null==e||0===e.length){s.push({role:"assistant",content:l});break}let t=e.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0);for(let a=0;a<=t;a++){let t=e.filter(e=>{var t;return(null!=(t=e.step)?t:0)===a});0!==t.length&&(s.push({role:"assistant",content:[...i&&l&&0===a?[{type:"text",text:l}]:[],...t.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),s.push({role:"tool",content:t.map(e=>{if(!("result"in e))throw new n_({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:t,toolName:a,result:s}=e,i=n[a];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:t,toolName:a,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:t,toolName:a,result:s}})}))}l&&!i&&s.push({role:"assistant",content:l});break}case"data":break;default:throw new n_({originalMessage:r,message:`Unsupported role: ${o}`})}}return s}(e.messages,{tools:t}):e.messages;if(0===r.length)throw new el({prompt:e,message:"messages must not be empty"});let a=eL({value:r,schema:rz.array(nM)});if(!a.success)throw new el({prompt:e,message:`message must be a CoreMessage or a UI message
Validation error: ${a.error.message}`,cause:a.error});return{type:"messages",messages:r,system:e.system}}throw Error("unreachable")}function n$(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function nU({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function nD(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}function nF({prompt:e,schema:t,schemaPrefix:r=null!=t?"JSON schema:":void 0,schemaSuffix:a=null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON."}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,r,null!=t?JSON.stringify(t):void 0,a].filter(e=>null!=e).join("\n")}function nL(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let e=t.getReader();return{async next(){let{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},t}var nq={type:"no-schema",jsonSchema:void 0,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:(e,t)=>void 0===e?{success:!1,error:new a3({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e},createElementStream(){throw new eN({functionality:"element streams in no-schema mode"})}},nz=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:t=>safeValidateTypes2({value:t,schema:e}),createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in object mode"})}}),nB=e=>{let{$schema:t,...r}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:t,latestObject:r,isFirstDelta:a,isFinalDelta:n}){var s;if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let i=t.elements,o=[];for(let t=0;t<i.length;t++){let r=safeValidateTypes2({value:i[t],schema:e});if(t!==i.length-1||n){if(!r.success)return r;o.push(r.value)}}let l=null!=(s=null==r?void 0:r.length)?s:0,u="";return a&&(u+="["),l>0&&(u+=","),u+=o.slice(l).map(e=>JSON.stringify(e)).join(","),n&&(u+="]"),{success:!0,value:{partial:o,textDelta:u}}},validateFinalResult(t){if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let r=t.elements;for(let t of r){let r=safeValidateTypes2({value:t,schema:e});if(!r.success)return r}return{success:!0,value:r}},createElementStream(e){let t=0;return nL(e.pipeThrough(new TransformStream({transform(e,r){switch(e.type){case"object":{let a=e.object;for(;t<a.length;t++)r.enqueue(a[t]);break}case"text-delta":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${e}`)}}})))}}},nV=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!isJSONObject(t)||"string"!=typeof t.result)return{success:!1,error:new TypeValidationError({value:t,cause:'value must be an object that contains a string in the "result" property.'})};let r=t.result;return e.includes(r)?{success:!0,value:r}:{success:!1,error:new TypeValidationError({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new UnsupportedFunctionalityError({functionality:"partial results in enum mode"})},createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in enum mode"})}});eU({prefix:"aiobj",size:24});var nJ=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise||(this.promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this.promise}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&(null==(t=this._reject)||t.call(this,e))}};function nW(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function nK(){let e=[],t=null,r=!1,a=nW(),n=async()=>{if(r&&0===e.length){null==t||t.close();return}if(0===e.length)return a=nW(),await a.promise,n();try{let{value:a,done:s}=await e[0].read();s?(e.shift(),e.length>0?await n():r&&(null==t||t.close())):null==t||t.enqueue(a)}catch(a){null==t||t.error(a),e.shift(),r&&0===e.length&&(null==t||t.close())}};return{stream:new ReadableStream({start(e){t=e},pull:n,async cancel(){for(let t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),a.resolve()},close:()=>{r=!0,a.resolve(),0===e.length&&(null==t||t.close())},terminate:()=>{r=!0,a.resolve(),e.forEach(e=>e.cancel()),e=[],null==t||t.close()}}}eU({prefix:"aiobj",size:24});var nH="AI_NoOutputSpecifiedError",nG=`vercel.ai.error.${nH}`,nY=Symbol.for(nG),nX=class extends V{constructor({message:e="No output specified."}={}){super({name:nH,message:e}),this[j]=!0}static isInstance(e){return V.hasMarker(e,nG)}};j=nY;var nQ="AI_ToolExecutionError",n0=`vercel.ai.error.${nQ}`,n1=Symbol.for(n0),n2=class extends V{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:a,message:n=`Error executing tool ${t}: ${ee(a)}`}){super({name:nQ,message:n,cause:a}),this[R]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return V.hasMarker(e,n0)}};function n4({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:aE(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}R=n1;var n9=/^([\s\S]*?)(\s+)(\S*)$/;function n6(e){let t=e.match(n9);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var n3="AI_InvalidToolArgumentsError",n5=`vercel.ai.error.${n3}`,n7=Symbol.for(n5),n8=class extends V{constructor({toolArgs:e,toolName:t,cause:r,message:a=`Invalid arguments for tool ${t}: ${ee(r)}`}){super({name:n3,message:a,cause:r}),this[O]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return V.hasMarker(e,n5)}};O=n7;var se="AI_NoSuchToolError",st=`vercel.ai.error.${se}`,sr=Symbol.for(st),sa=class extends V{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:se,message:r}),this[N]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return V.hasMarker(e,st)}};N=sr;var sn="AI_ToolCallRepairError",ss=`vercel.ai.error.${sn}`,si=Symbol.for(ss),so=class extends V{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${ee(e)}`}){super({name:sn,message:r,cause:e}),this[P]=!0,this.originalError=t}static isInstance(e){return V.hasMarker(e,ss)}};async function sl({toolCall:e,tools:t,repairToolCall:r,system:a,messages:n}){if(null==t)throw new sa({toolName:e.toolName});try{return await su({toolCall:e,tools:t})}catch(i){if(null==r||!(sa.isInstance(i)||n8.isInstance(i)))throw i;let s=null;try{s=await r({toolCall:e,tools:t,parameterSchema:({toolName:e})=>aE(t[e].parameters).jsonSchema,system:a,messages:n,error:i})}catch(e){throw new so({cause:e,originalError:i})}if(null==s)throw i;return await su({toolCall:s,tools:t})}}async function su({toolCall:e,tools:t}){let r=e.toolName,a=t[r];if(null==a)throw new sa({toolName:e.toolName,availableTools:Object.keys(t)});let n=aE(a.parameters),s=""===e.args.trim()?eL({value:{},schema:n}):eq({text:e.args,schema:n});if(!1===s.success)throw new n8({toolName:r,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:s.value}}function sc(e){let t=e.filter(e=>"text"===e.type).map(e=>e.text).join("");return t.length>0?t:void 0}function sd({text:e="",files:t,reasoning:r,tools:a,toolCalls:n,toolResults:s,messageId:i,generateMessageId:o}){let l=[],u=[];return r.length>0&&u.push(...r.map(e=>"text"===e.type?{...e,type:"reasoning"}:{...e,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(e=>({type:"file",data:e.base64,mimeType:e.mimeType}))),e.length>0&&u.push({type:"text",text:e}),n.length>0&&u.push(...n),u.length>0&&l.push({role:"assistant",content:u,id:i}),s.length>0&&l.push({role:"tool",id:o(),content:s.map(e=>{let t=a[e.toolName];return(null==t?void 0:t.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:t.experimental_toToolResultContent(e.result),experimental_content:t.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),l}P=si;var sp=eU({prefix:"aitxt",size:24}),sm=eU({prefix:"msg",size:24});async function sh({model:e,tools:t,toolChoice:r,system:a,prompt:n,messages:s,maxRetries:i,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:c=sm,experimental_output:d,experimental_continueSteps:p=!1,experimental_telemetry:m,experimental_providerMetadata:h,providerOptions:f=h,experimental_activeTools:g,experimental_prepareStep:y,experimental_repairToolCall:v,_internal:{generateId:b=sp,currentDate:_=()=>new Date}={},onStepFinish:w,...x}){var k;if(u<1)throw new aM({parameter:"maxSteps",value:u,message:"maxSteps must be at least 1"});let{maxRetries:T,retry:S}=aq({maxRetries:i}),E=aB({model:e,telemetry:m,headers:l,settings:{...x,maxRetries:T}}),I=nZ({prompt:{system:null!=(k=null==d?void 0:d.injectIntoSystemPrompt({system:a,model:e}))?k:a,prompt:n,messages:s},tools:t}),A=aK(m);return aH({name:"ai.generateText",attributes:aG({telemetry:m,attributes:{...az({operationId:"ai.generateText",telemetry:m}),...E,"ai.model.provider":e.provider,"ai.model.id":e.modelId,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:n,messages:s})},"ai.settings.maxSteps":u}}),tracer:A,fn:async n=>{var s,i,h,k,T,j,R,O,N,P,C,M,Z,$;let U;let D=nf(x),F=[],L=[],q=[],z=0,B=[],V="",J=[],W=[],K={completionTokens:0,promptTokens:0,totalTokens:0},H="initial";do{let n=0===z?I.type:"messages",M=[...I.messages,...B],Z=await (null==y?void 0:y({model:e,steps:W,maxSteps:u,stepNumber:z})),$=null!=(s=null==Z?void 0:Z.toolChoice)?s:r,G=null!=(i=null==Z?void 0:Z.experimental_activeTools)?i:g,Y=null!=(h=null==Z?void 0:Z.model)?h:e,X=await nm({prompt:{type:n,system:I.system,messages:M},modelSupportsImageUrls:Y.supportsImageUrls,modelSupportsUrl:null==(k=Y.supportsUrl)?void 0:k.bind(Y)}),Q={type:"regular",...n4({tools:t,toolChoice:$,activeTools:G})};U=await S(()=>aH({name:"ai.generateText.doGenerate",attributes:aG({telemetry:m,attributes:{...az({operationId:"ai.generateText.doGenerate",telemetry:m}),...E,"ai.model.provider":Y.provider,"ai.model.id":Y.modelId,"ai.prompt.format":{input:()=>n},"ai.prompt.messages":{input:()=>JSON.stringify(X)},"ai.prompt.tools":{input:()=>{var e;return null==(e=Q.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=Q.toolChoice?JSON.stringify(Q.toolChoice):void 0},"gen_ai.system":Y.provider,"gen_ai.request.model":Y.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:A,fn:async t=>{var r,a,s,i,u,c;let p=await Y.doGenerate({mode:Q,...D,inputFormat:n,responseFormat:null==d?void 0:d.responseFormat({model:e}),prompt:X,providerMetadata:f,abortSignal:o,headers:l}),h={id:null!=(a=null==(r=p.response)?void 0:r.id)?a:b(),timestamp:null!=(i=null==(s=p.response)?void 0:s.timestamp)?i:_(),modelId:null!=(c=null==(u=p.response)?void 0:u.modelId)?c:Y.modelId};return t.setAttributes(aG({telemetry:m,attributes:{"ai.response.finishReason":p.finishReason,"ai.response.text":{output:()=>p.text},"ai.response.toolCalls":{output:()=>JSON.stringify(p.toolCalls)},"ai.response.id":h.id,"ai.response.model":h.modelId,"ai.response.timestamp":h.timestamp.toISOString(),"ai.usage.promptTokens":p.usage.promptTokens,"ai.usage.completionTokens":p.usage.completionTokens,"gen_ai.response.finish_reasons":[p.finishReason],"gen_ai.response.id":h.id,"gen_ai.response.model":h.modelId,"gen_ai.usage.input_tokens":p.usage.promptTokens,"gen_ai.usage.output_tokens":p.usage.completionTokens}})),{...p,response:h}}})),F=await Promise.all((null!=(T=U.toolCalls)?T:[]).map(e=>sl({toolCall:e,tools:t,repairToolCall:v,system:a,messages:M}))),L=null==t?[]:await sf({toolCalls:F,tools:t,tracer:A,telemetry:m,messages:M,abortSignal:o});let ee=nU(U.usage);K=nD(K,ee);let et="done";++z<u&&(p&&"length"===U.finishReason&&0===F.length?et="continue":F.length>0&&L.length===F.length&&(et="tool-result"));let er=null!=(j=U.text)?j:"",ea="continue"===H&&V.trimEnd()!==V?er.trimStart():er,en="continue"===et?function(e){let t=n6(e);return t?t.prefix+t.whitespace:e}(ea):ea;if(V="continue"===et||"continue"===H?V+en:en,q=sy(U.reasoning),J.push(...null!=(R=U.sources)?R:[]),"continue"===H){let e=B[B.length-1];"string"==typeof e.content?e.content+=en:e.content.push({text:en,type:"text"})}else B.push(...sd({text:V,files:sv(U.files),reasoning:sy(U.reasoning),tools:null!=t?t:{},toolCalls:F,toolResults:L,messageId:c(),generateMessageId:c}));let es={stepType:H,text:en,reasoning:sc(q),reasoningDetails:q,files:sv(U.files),sources:null!=(O=U.sources)?O:[],toolCalls:F,toolResults:L,finishReason:U.finishReason,usage:ee,warnings:U.warnings,logprobs:U.logprobs,request:null!=(N=U.request)?N:{},response:{...U.response,headers:null==(P=U.rawResponse)?void 0:P.headers,body:null==(C=U.rawResponse)?void 0:C.body,messages:structuredClone(B)},providerMetadata:U.providerMetadata,experimental_providerMetadata:U.providerMetadata,isContinued:"continue"===et};W.push(es),await (null==w?void 0:w(es)),H=et}while("done"!==H);return n.setAttributes(aG({telemetry:m,attributes:{"ai.response.finishReason":U.finishReason,"ai.response.text":{output:()=>U.text},"ai.response.toolCalls":{output:()=>JSON.stringify(U.toolCalls)},"ai.usage.promptTokens":U.usage.promptTokens,"ai.usage.completionTokens":U.usage.completionTokens}})),new sg({text:V,files:sv(U.files),reasoning:sc(q),reasoningDetails:q,sources:J,outputResolver:()=>{if(null==d)throw new nX;return d.parseOutput({text:V},{response:U.response,usage:K,finishReason:U.finishReason})},toolCalls:F,toolResults:L,finishReason:U.finishReason,usage:K,warnings:U.warnings,request:null!=(M=U.request)?M:{},response:{...U.response,headers:null==(Z=U.rawResponse)?void 0:Z.headers,body:null==($=U.rawResponse)?void 0:$.body,messages:B},logprobs:U.logprobs,steps:W,providerMetadata:U.providerMetadata})}})}async function sf({toolCalls:e,tools:t,tracer:r,telemetry:a,messages:n,abortSignal:s}){return(await Promise.all(e.map(async({toolCallId:e,toolName:i,args:o})=>{let l=t[i];if((null==l?void 0:l.execute)==null)return;let u=await aH({name:"ai.toolCall",attributes:aG({telemetry:a,attributes:{...az({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":i,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(o)}}}),tracer:r,fn:async t=>{try{let r=await l.execute(o,{toolCallId:e,messages:n,abortSignal:s});try{t.setAttributes(aG({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return r}catch(t){throw new n2({toolCallId:e,toolName:i,toolArgs:o,cause:t})}}});return{type:"tool-result",toolCallId:e,toolName:i,args:o,result:u}}))).filter(e=>null!=e)}var sg=class{constructor(e){this.text=e.text,this.files=e.files,this.reasoning=e.reasoning,this.reasoningDetails=e.reasoningDetails,this.toolCalls=e.toolCalls,this.toolResults=e.toolResults,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.request=e.request,this.response=e.response,this.steps=e.steps,this.experimental_providerMetadata=e.providerMetadata,this.providerMetadata=e.providerMetadata,this.logprobs=e.logprobs,this.outputResolver=e.outputResolver,this.sources=e.sources}get experimental_output(){return this.outputResolver()}};function sy(e){return null==e?[]:"string"==typeof e?[{type:"text",text:e}]:e}function sv(e){var t;return null!=(t=null==e?void 0:e.map(e=>new aQ(e)))?t:[]}aA({},{object:()=>sI,text:()=>sE});var sb="AI_InvalidStreamPartError",s_=`vercel.ai.error.${sb}`,sw=Symbol.for(s_),sx=class extends V{constructor({chunk:e,message:t}){super({name:sb,message:t}),this[C]=!0,this.chunk=e}static isInstance(e){return V.hasMarker(e,s_)}};C=sw;var sk="vercel.ai.error.AI_MCPClientError",sT=Symbol.for(sk),sS=class extends V{constructor({name:e="MCPClientError",message:t,cause:r}){super({name:e,message:t,cause:r}),this[M]=!0}static isInstance(e){return V.hasMarker(e,sk)}};M=sT;var sE=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt:({system:e})=>e,parsePartial:({text:e})=>({partial:e}),parseOutput:({text:e})=>e}),sI=({schema:e})=>{let t=aE(e);return{type:"object",responseFormat:({model:e})=>({type:"json",schema:e.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt:({system:e,model:r})=>r.supportsStructuredOutputs?e:nF({prompt:e,schema:t.jsonSchema}),parsePartial({text:e}){let t=ay(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},parseOutput({text:e},r){let a=eq({text:e});if(!a.success)throw new a3({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let n=eL({value:a.value,schema:t});if(!n.success)throw new a3({message:"No object generated: response did not match schema.",cause:n.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return n.value}}};async function sA({stream:e,onError:t}){let r=e.getReader();try{for(;;){let{done:e}=await r.read();if(e)break}}catch(e){null==t||t(e)}finally{r.releaseLock()}}function sj(e,t){let r,a;let n=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=n.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==a&&(a=s.read());let t=await a;a=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i){await u(e);return}if(o){await l(e);return}null==r&&(r=n.read()),null==a&&(a=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:n})),a.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===n?(r=void 0,t.done&&(await u(e),i=!0)):(a=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){n.cancel(),s.cancel()}})}eU({prefix:"aitxt",size:24}),eU({prefix:"msg",size:24});var sR="AI_NoSuchProviderError",sO=`vercel.ai.error.${sR}`,sN=Symbol.for(sO),sP=class extends ek{constructor({modelId:e,modelType:t,providerId:r,availableProviders:a,message:n=`No such provider: ${r} (available providers: ${a.join()})`}){super({errorName:sR,modelId:e,modelType:t,message:n}),this[Z]=!0,this.providerId=r,this.availableProviders=a}static isInstance(e){return V.hasMarker(e,sO)}};Z=sN;var sC="2024-11-05",sM=[sC,"2024-10-07"],sZ=rz.object({name:rz.string(),version:rz.string()}).passthrough(),s$=rz.object({_meta:rz.optional(rz.object({}).passthrough())}).passthrough(),sU=rz.object({method:rz.string(),params:rz.optional(s$)}),sD=rz.object({experimental:rz.optional(rz.object({}).passthrough()),logging:rz.optional(rz.object({}).passthrough()),prompts:rz.optional(rz.object({listChanged:rz.optional(rz.boolean())}).passthrough()),resources:rz.optional(rz.object({subscribe:rz.optional(rz.boolean()),listChanged:rz.optional(rz.boolean())}).passthrough()),tools:rz.optional(rz.object({listChanged:rz.optional(rz.boolean())}).passthrough())}).passthrough(),sF=s$.extend({protocolVersion:rz.string(),capabilities:sD,serverInfo:sZ,instructions:rz.optional(rz.string())}),sL=s$.extend({nextCursor:rz.optional(rz.string())}),sq=rz.object({name:rz.string(),description:rz.optional(rz.string()),inputSchema:rz.object({type:rz.literal("object"),properties:rz.optional(rz.object({}).passthrough())}).passthrough()}).passthrough(),sz=sL.extend({tools:rz.array(sq)}),sB=rz.object({type:rz.literal("text"),text:rz.string()}).passthrough(),sV=rz.object({type:rz.literal("image"),data:rz.string().base64(),mimeType:rz.string()}).passthrough(),sJ=rz.object({uri:rz.string(),mimeType:rz.optional(rz.string())}).passthrough(),sW=sJ.extend({text:rz.string()}),sK=sJ.extend({blob:rz.string().base64()}),sH=rz.object({type:rz.literal("resource"),resource:rz.union([sW,sK])}).passthrough(),sG=s$.extend({content:rz.array(rz.union([sB,sV,sH])),isError:rz.boolean().default(!1).optional()}).or(s$.extend({toolResult:rz.unknown()})),sY=rz.object({jsonrpc:rz.literal("2.0"),id:rz.union([rz.string(),rz.number().int()])}).merge(sU).strict(),sX=rz.object({jsonrpc:rz.literal("2.0"),id:rz.union([rz.string(),rz.number().int()]),result:s$}).strict(),sQ=rz.object({jsonrpc:rz.literal("2.0"),id:rz.union([rz.string(),rz.number().int()]),error:rz.object({code:rz.number().int(),message:rz.string(),data:rz.optional(rz.unknown())})}).strict(),s0=rz.object({jsonrpc:rz.literal("2.0")}).merge(rz.object({method:rz.string(),params:rz.optional(s$)})).strict(),s1=rz.union([sY,s0,sX,sQ]),s2=class{constructor({url:e,headers:t}){this.connected=!1,this.url=new URL(e),this.headers=t}async start(){return new Promise((e,t)=>{if(this.connected)return e();this.abortController=new AbortController,(async()=>{var r,a,n;try{let n=new Headers(this.headers);n.set("Accept","text/event-stream");let s=await fetch(this.url.href,{headers:n,signal:null==(r=this.abortController)?void 0:r.signal});if(!s.ok||!s.body){let e=new sS({message:`MCP SSE Transport Error: ${s.status} ${s.statusText}`});return null==(a=this.onerror)||a.call(this,e),t(e)}let i=s.body.pipeThrough(new TextDecoderStream).pipeThrough(createEventSourceParserStream()).getReader(),o=async()=>{var r,a,n;try{for(;;){let{done:t,value:n}=await i.read();if(t){if(this.connected)throw this.connected=!1,new sS({message:"MCP SSE Transport Error: Connection closed unexpectedly"});return}let{event:s,data:o}=n;if("endpoint"===s){if(this.endpoint=new URL(o,this.url),this.endpoint.origin!==this.url.origin)throw new sS({message:`MCP SSE Transport Error: Endpoint origin does not match connection origin: ${this.endpoint.origin}`});this.connected=!0,e()}else if("message"===s)try{let e=s1.parse(JSON.parse(o));null==(r=this.onmessage)||r.call(this,e)}catch(t){let e=new sS({message:"MCP SSE Transport Error: Failed to parse message",cause:t});null==(a=this.onerror)||a.call(this,e)}}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(n=this.onerror)||n.call(this,e),t(e)}};this.sseConnection={close:()=>i.cancel()},o()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(n=this.onerror)||n.call(this,e),t(e)}})()})}async close(){var e,t,r;this.connected=!1,null==(e=this.sseConnection)||e.close(),null==(t=this.abortController)||t.abort(),null==(r=this.onclose)||r.call(this)}async send(e){var t,r,a;if(!this.endpoint||!this.connected)throw new sS({message:"MCP SSE Transport Error: Not connected"});try{let a=new Headers(this.headers);a.set("Content-Type","application/json");let n={method:"POST",headers:a,body:JSON.stringify(e),signal:null==(t=this.abortController)?void 0:t.signal},s=await fetch(this.endpoint,n);if(!s.ok){let e=await s.text().catch(()=>null),t=new sS({message:`MCP SSE Transport Error: POSTing to endpoint (HTTP ${s.status}): ${e}`});null==(r=this.onerror)||r.call(this,t);return}}catch(e){null==(a=this.onerror)||a.call(this,e);return}}};function s4(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(a,n){n.enqueue(t.encode(a)),r+=a,e.onToken&&await e.onToken(a),e.onText&&"string"==typeof a&&await e.onText(a)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function s9(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&s7(null==(r=e.data)?void 0:r.chunk,t);return}s7(e,t)}})).pipeThrough(s4(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(ax("text",e))}}))}function s6(e,t){return s9(e,t).pipeThrough(new TextEncoderStream)}function s3(e,t){var r;let a=s9(e,null==t?void 0:t.callbacks).pipeThrough(new TextEncoderStream),n=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(n?sj(n.stream,a):a,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:aj(null==s?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function s5(e,t){t.dataStream.merge(s9(e,t.callbacks))}function s7(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function s8(e,t){var r;let a;let n=(a=!0,e=>(a&&(e=e.trimStart())&&(a=!1),e));return(r=e[Symbol.asyncIterator](),new ReadableStream({async pull(e){try{let{value:t,done:a}=await r.next();a?e.close():e.enqueue(t)}catch(t){e.error(t)}},cancel(){}})).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(n(e.delta))}})).pipeThrough(s4(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(ax("text",e))}}))}function ie(e,t){return s8(e,t).pipeThrough(new TextEncoderStream)}function it(e,t={}){var r;let{init:a,data:n,callbacks:s}=t,i=s8(e,s).pipeThrough(new TextEncoderStream);return new Response(n?sj(n.stream,i):i,{status:null!=(r=null==a?void 0:a.status)?r:200,statusText:null==a?void 0:a.statusText,headers:aj(null==a?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function ir(e,t){t.dataStream.merge(s8(e,t.callbacks))}aA({},{mergeIntoDataStream:()=>s5,toDataStream:()=>s6,toDataStreamResponse:()=>s3}),aA({},{mergeIntoDataStream:()=>ir,toDataStream:()=>ie,toDataStreamResponse:()=>it});var ia=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{let i=await a.text(),o=e$(a);if(""===i.trim())return{responseHeaders:o,value:new H({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(a)})};try{let l=function({text:e,schema:t}){try{let r=eM.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=eL({value:e,schema:t});if(!r.success)throw eA.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(em.isInstance(t)||eA.isInstance(t))throw t;throw new em({text:e,cause:t})}}({text:i,schema:e});return{responseHeaders:o,value:new H({message:t(l),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,data:l,isRetryable:null==r?void 0:r(a,l)})}}catch(e){return{responseHeaders:o,value:new H({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(a)})}}})({errorSchema:rz.object({type:rz.literal("error"),error:rz.object({type:rz.string(),message:rz.string()})}),errorToMessage:e=>e.error.message});function is(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var ii=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=r}supportsUrl(e){return"https:"===e.protocol}get provider(){return this.config.provider}get supportsImageUrls(){return this.config.supportsImageUrls}async getArgs({mode:e,prompt:t,maxTokens:r=4096,temperature:a,topP:n,topK:s,frequencyPenalty:i,presencePenalty:o,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var p,m,h;let f=e.type,g=[];null!=i&&g.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=o&&g.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=c&&g.push({type:"unsupported-setting",setting:"seed"}),null!=u&&"text"!==u.type&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:y,betas:v}=function({prompt:e,sendReasoning:t,warnings:r}){var a,n,s,i;let o;let l=new Set,u=function(e){let t;let r=[];for(let a of e){let{role:e}=a;switch(e){case"system":(null==t?void 0:t.type)!=="system"&&(t={type:"system",messages:[]},r.push(t)),t.messages.push(a);break;case"assistant":(null==t?void 0:t.type)!=="assistant"&&(t={type:"assistant",messages:[]},r.push(t)),t.messages.push(a);break;case"user":case"tool":(null==t?void 0:t.type)!=="user"&&(t={type:"user",messages:[]},r.push(t)),t.messages.push(a);break;default:throw Error(`Unsupported role: ${e}`)}}return r}(e),c=[];function d(e){var t;let r=null==e?void 0:e.anthropic;return null!=(t=null==r?void 0:r.cacheControl)?t:null==r?void 0:r.cache_control}for(let e=0;e<u.length;e++){let p=u[e],m=e===u.length-1,h=p.type;switch(h){case"system":if(null!=o)throw new eN({functionality:"Multiple system messages that are separated by user/assistant messages"});o=p.messages.map(({content:e,providerMetadata:t})=>({type:"text",text:e,cache_control:d(t)}));break;case"user":{let e=[];for(let t of p.messages){let{role:r,content:i}=t;switch(r){case"user":for(let r=0;r<i.length;r++){let s=i[r],o=r===i.length-1,u=null!=(a=d(s.providerMetadata))?a:o?d(t.providerMetadata):void 0;switch(s.type){case"text":e.push({type:"text",text:s.text,cache_control:u});break;case"image":e.push({type:"image",source:s.image instanceof URL?{type:"url",url:s.image.toString()}:{type:"base64",media_type:null!=(n=s.mimeType)?n:"image/jpeg",data:eX(s.image)},cache_control:u});break;case"file":if("application/pdf"!==s.mimeType)throw new eN({functionality:"Non-PDF files in user messages"});l.add("pdfs-2024-09-25"),e.push({type:"document",source:s.data instanceof URL?{type:"url",url:s.data.toString()}:{type:"base64",media_type:"application/pdf",data:s.data},cache_control:u})}}break;case"tool":for(let r=0;r<i.length;r++){let a=i[r],n=r===i.length-1,o=null!=(s=d(a.providerMetadata))?s:n?d(t.providerMetadata):void 0,l=null!=a.content?a.content.map(e=>{var t;switch(e.type){case"text":return{type:"text",text:e.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:null!=(t=e.mimeType)?t:"image/jpeg",data:e.data},cache_control:void 0}}}):JSON.stringify(a.result);e.push({type:"tool_result",tool_use_id:a.toolCallId,content:l,is_error:a.isError,cache_control:o})}break;default:throw Error(`Unsupported role: ${r}`)}}c.push({role:"user",content:e});break}case"assistant":{let e=[];for(let a=0;a<p.messages.length;a++){let n=p.messages[a],s=a===p.messages.length-1,{content:o}=n;for(let a=0;a<o.length;a++){let l=o[a],u=a===o.length-1,c=null!=(i=d(l.providerMetadata))?i:u?d(n.providerMetadata):void 0;switch(l.type){case"text":e.push({type:"text",text:m&&s&&u?l.text.trim():l.text,cache_control:c});break;case"reasoning":t?e.push({type:"thinking",thinking:l.text,signature:l.signature,cache_control:c}):r.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"redacted-reasoning":e.push({type:"redacted_thinking",data:l.data,cache_control:c});break;case"tool-call":e.push({type:"tool_use",id:l.toolCallId,name:l.toolName,input:l.args,cache_control:c})}}}c.push({role:"assistant",content:e});break}default:throw Error(`Unsupported type: ${h}`)}}return{prompt:{system:o,messages:c},betas:l}}({prompt:t,sendReasoning:null==(p=this.settings.sendReasoning)||p,warnings:g}),b=function({provider:e,providerOptions:t,schema:r}){if((null==t?void 0:t[e])==null)return;let a=eL({value:t[e],schema:r});if(!a.success)throw new en({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}({provider:"anthropic",providerOptions:d,schema:iu}),_=(null==(m=null==b?void 0:b.thinking)?void 0:m.type)==="enabled",w=null==(h=null==b?void 0:b.thinking)?void 0:h.budgetTokens,x={model:this.modelId,max_tokens:r,temperature:a,top_k:s,top_p:n,stop_sequences:l,..._&&{thinking:{type:"enabled",budget_tokens:w}},system:y.system,messages:y.messages};if(_){if(null==w)throw new eN({functionality:"thinking requires a budget"});null!=x.temperature&&(x.temperature=void 0,g.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),null!=s&&(x.top_k=void 0,g.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),null!=n&&(x.top_p=void 0,g.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),x.max_tokens=r+w}switch(f){case"regular":{let{tools:t,tool_choice:r,toolWarnings:a,betas:n}=function(e){var t;let r=(null==(t=e.tools)?void 0:t.length)?e.tools:void 0,a=[],n=new Set;if(null==r)return{tools:void 0,tool_choice:void 0,toolWarnings:a,betas:n};let s=[];for(let e of r)switch(e.type){case"function":s.push({name:e.name,description:e.description,input_schema:e.parameters});break;case"provider-defined":switch(e.id){case"anthropic.computer_20250124":n.add("computer-use-2025-01-24"),s.push({name:e.name,type:"computer_20250124",display_width_px:e.args.displayWidthPx,display_height_px:e.args.displayHeightPx,display_number:e.args.displayNumber});break;case"anthropic.computer_20241022":n.add("computer-use-2024-10-22"),s.push({name:e.name,type:"computer_20241022",display_width_px:e.args.displayWidthPx,display_height_px:e.args.displayHeightPx,display_number:e.args.displayNumber});break;case"anthropic.text_editor_20250124":n.add("computer-use-2025-01-24"),s.push({name:e.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":n.add("computer-use-2024-10-22"),s.push({name:e.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":n.add("computer-use-2025-01-24"),s.push({name:e.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":n.add("computer-use-2024-10-22"),s.push({name:e.name,type:"bash_20241022"});break;default:a.push({type:"unsupported-tool",tool:e})}break;default:a.push({type:"unsupported-tool",tool:e})}let i=e.toolChoice;if(null==i)return{tools:s,tool_choice:void 0,toolWarnings:a,betas:n};let o=i.type;switch(o){case"auto":return{tools:s,tool_choice:{type:"auto"},toolWarnings:a,betas:n};case"required":return{tools:s,tool_choice:{type:"any"},toolWarnings:a,betas:n};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:a,betas:n};case"tool":return{tools:s,tool_choice:{type:"tool",name:i.toolName},toolWarnings:a,betas:n};default:throw new eN({functionality:`Unsupported tool choice type: ${o}`})}}(e);return{args:{...x,tools:t,tool_choice:r},warnings:[...g,...a],betas:new Set([...v,...n])}}case"object-json":throw new eN({functionality:"json-mode object generation"});case"object-tool":{let{name:t,description:r,parameters:a}=e.tool;return{args:{...x,tools:[{name:t,description:r,input_schema:a}],tool_choice:{type:"tool",name:t}},warnings:g,betas:v}}default:throw Error(`Unsupported type: ${f}`)}}async getHeaders({betas:e,headers:t}){return function(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}(await eJ(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,r,a;return null!=(a=null==(r=(t=this.config).buildRequestUrl)?void 0:r.call(t,this.config.baseURL,e))?a:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,a;return null!=(a=null==(r=(t=this.config).transformRequestBody)?void 0:r.call(t,e))?a:e}async doGenerate(e){var t,r,a,n;let s;let{args:i,warnings:o,betas:l}=await this.getArgs(e),{responseHeaders:u,value:c,rawValue:d}=await eB({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:l,headers:e.headers}),body:this.transformRequestBody(i),failedResponseHandler:ia,successfulResponseHandler:eK(io),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:p,...m}=i,h="";for(let e of c.content)"text"===e.type&&(h+=e.text);if(c.content.some(e=>"tool_use"===e.type))for(let e of(s=[],c.content))"tool_use"===e.type&&s.push({toolCallType:"function",toolCallId:e.id,toolName:e.name,args:JSON.stringify(e.input)});let f=c.content.filter(e=>"redacted_thinking"===e.type||"thinking"===e.type).map(e=>"thinking"===e.type?{type:"text",text:e.thinking,signature:e.signature}:{type:"redacted",data:e.data});return{text:h,reasoning:f.length>0?f:void 0,toolCalls:s,finishReason:is(c.stop_reason),usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:p,rawSettings:m},rawResponse:{headers:u,body:d},response:{id:null!=(t=c.id)?t:void 0,modelId:null!=(r=c.model)?r:void 0},warnings:o,providerMetadata:{anthropic:{cacheCreationInputTokens:null!=(a=c.usage.cache_creation_input_tokens)?a:null,cacheReadInputTokens:null!=(n=c.usage.cache_read_input_tokens)?n:null}},request:{body:JSON.stringify(i)}}}async doStream(e){let t,r;let{args:a,warnings:n,betas:s}=await this.getArgs(e),i={...a,stream:!0},{responseHeaders:o,value:l}=await eB({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:s,headers:e.headers}),body:this.transformRequestBody(i),failedResponseHandler:ia,successfulResponseHandler:eW(il),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=a,d="unknown",p={promptTokens:Number.NaN,completionTokens:Number.NaN},m={};return{stream:l.pipeThrough(new TransformStream({transform(e,a){var n,s,i,o;if(!e.success){a.enqueue({type:"error",error:e.error});return}let l=e.value;switch(l.type){case"ping":return;case"content_block_start":{let e=l.content_block.type;switch(r=e,e){case"text":case"thinking":return;case"redacted_thinking":a.enqueue({type:"redacted-reasoning",data:l.content_block.data});return;case"tool_use":m[l.index]={toolCallId:l.content_block.id,toolName:l.content_block.name,jsonText:""};return;default:throw Error(`Unsupported content block type: ${e}`)}}case"content_block_stop":if(null!=m[l.index]){let e=m[l.index];a.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,args:e.jsonText}),delete m[l.index]}r=void 0;return;case"content_block_delta":{let e=l.delta.type;switch(e){case"text_delta":a.enqueue({type:"text-delta",textDelta:l.delta.text});return;case"thinking_delta":a.enqueue({type:"reasoning",textDelta:l.delta.thinking});return;case"signature_delta":"thinking"===r&&a.enqueue({type:"reasoning-signature",signature:l.delta.signature});return;case"input_json_delta":{let e=m[l.index];a.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:l.delta.partial_json}),e.jsonText+=l.delta.partial_json;return}default:throw Error(`Unsupported delta type: ${e}`)}}case"message_start":p.promptTokens=l.message.usage.input_tokens,p.completionTokens=l.message.usage.output_tokens,t={anthropic:{cacheCreationInputTokens:null!=(n=l.message.usage.cache_creation_input_tokens)?n:null,cacheReadInputTokens:null!=(s=l.message.usage.cache_read_input_tokens)?s:null}},a.enqueue({type:"response-metadata",id:null!=(i=l.message.id)?i:void 0,modelId:null!=(o=l.message.model)?o:void 0});return;case"message_delta":p.completionTokens=l.usage.output_tokens,d=is(l.delta.stop_reason);return;case"message_stop":a.enqueue({type:"finish",finishReason:d,usage:p,providerMetadata:t});return;case"error":a.enqueue({type:"error",error:l.error});return;default:throw Error(`Unsupported chunk type: ${l}`)}}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:n,request:{body:JSON.stringify(i)}}}},io=rz.object({type:rz.literal("message"),id:rz.string().nullish(),model:rz.string().nullish(),content:rz.array(rz.discriminatedUnion("type",[rz.object({type:rz.literal("text"),text:rz.string()}),rz.object({type:rz.literal("thinking"),thinking:rz.string(),signature:rz.string()}),rz.object({type:rz.literal("redacted_thinking"),data:rz.string()}),rz.object({type:rz.literal("tool_use"),id:rz.string(),name:rz.string(),input:rz.unknown()})])),stop_reason:rz.string().nullish(),usage:rz.object({input_tokens:rz.number(),output_tokens:rz.number(),cache_creation_input_tokens:rz.number().nullish(),cache_read_input_tokens:rz.number().nullish()})}),il=rz.discriminatedUnion("type",[rz.object({type:rz.literal("message_start"),message:rz.object({id:rz.string().nullish(),model:rz.string().nullish(),usage:rz.object({input_tokens:rz.number(),output_tokens:rz.number(),cache_creation_input_tokens:rz.number().nullish(),cache_read_input_tokens:rz.number().nullish()})})}),rz.object({type:rz.literal("content_block_start"),index:rz.number(),content_block:rz.discriminatedUnion("type",[rz.object({type:rz.literal("text"),text:rz.string()}),rz.object({type:rz.literal("thinking"),thinking:rz.string()}),rz.object({type:rz.literal("tool_use"),id:rz.string(),name:rz.string()}),rz.object({type:rz.literal("redacted_thinking"),data:rz.string()})])}),rz.object({type:rz.literal("content_block_delta"),index:rz.number(),delta:rz.discriminatedUnion("type",[rz.object({type:rz.literal("input_json_delta"),partial_json:rz.string()}),rz.object({type:rz.literal("text_delta"),text:rz.string()}),rz.object({type:rz.literal("thinking_delta"),thinking:rz.string()}),rz.object({type:rz.literal("signature_delta"),signature:rz.string()})])}),rz.object({type:rz.literal("content_block_stop"),index:rz.number()}),rz.object({type:rz.literal("error"),error:rz.object({type:rz.string(),message:rz.string()})}),rz.object({type:rz.literal("message_delta"),delta:rz.object({stop_reason:rz.string().nullish()}),usage:rz.object({output_tokens:rz.number()})}),rz.object({type:rz.literal("message_stop")}),rz.object({type:rz.literal("ping")})]),iu=rz.object({thinking:rz.object({type:rz.union([rz.literal("enabled"),rz.literal("disabled")]),budgetTokens:rz.number().optional()}).optional()}),ic=rz.object({command:rz.string(),restart:rz.boolean().optional()}),id=rz.object({command:rz.string(),restart:rz.boolean().optional()}),ip=rz.object({command:rz.enum(["view","create","str_replace","insert","undo_edit"]),path:rz.string(),file_text:rz.string().optional(),insert_line:rz.number().int().optional(),new_str:rz.string().optional(),old_str:rz.string().optional(),view_range:rz.array(rz.number().int()).optional()}),im=rz.object({command:rz.enum(["view","create","str_replace","insert","undo_edit"]),path:rz.string(),file_text:rz.string().optional(),insert_line:rz.number().int().optional(),new_str:rz.string().optional(),old_str:rz.string().optional(),view_range:rz.array(rz.number().int()).optional()}),ih=rz.object({action:rz.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:rz.array(rz.number().int()).optional(),text:rz.string().optional()}),ig=rz.object({action:rz.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:rz.tuple([rz.number().int(),rz.number().int()]).optional(),duration:rz.number().optional(),scroll_amount:rz.number().optional(),scroll_direction:rz.enum(["up","down","left","right"]).optional(),start_coordinate:rz.tuple([rz.number().int(),rz.number().int()]).optional(),text:rz.string().optional()}),iy={bash_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:ic,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},bash_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:id,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:ip,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:im,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20241022:function(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:ih,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20250124:function(e){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:ig,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}},iv=function(e={}){var t,r;let a=null!=(t=null==(r=e.baseURL)?void 0:r.replace(/\/$/,""))?t:"https://api.anthropic.com/v1",n=()=>({"anthropic-version":"2023-06-01","x-api-key":function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if("string"==typeof e)return e;if(null!=e)throw new ey({message:`${a} API key must be a string.`});if("undefined"==typeof process)throw new ey({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new ey({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new ey({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),s=(t,r={})=>new ii(t,r,{provider:"anthropic.messages",baseURL:a,headers:n,fetch:e.fetch,supportsImageUrls:!0}),i=function(e,t){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return s(e,t)};return i.languageModel=s,i.chat=s,i.messages=s,i.textEmbeddingModel=e=>{throw new ek({modelId:e,modelType:"textEmbeddingModel"})},i.tools=iy,i}();async function ib(e){try{let t;let{elementos:r,formatoOrigem:a,formatosDestino:n}=await e.json();if(!r||!a||!n||!Array.isArray(n))return L.NextResponse.json({error:"Dados inv\xe1lidos. Verifique os par\xe2metros enviados."},{status:400});let s=`
      Analise os seguintes elementos de um formato de marketing digital:
      ${JSON.stringify(r,null,2)}
      
      Formato de origem: ${JSON.stringify(a,null,2)}
      
      Preciso adaptar esses elementos para os seguintes formatos:
      ${JSON.stringify(n,null,2)}
      
      Para cada formato de destino, sugira o melhor posicionamento dos elementos, 
      respeitando as diretrizes de grid de cada formato. Considere:
      
      1. A hierarquia visual dos elementos
      2. A propor\xe7\xe3o e tamanho relativo entre os elementos
      3. As dimens\xf5es e restri\xe7\xf5es de cada formato
      4. A legibilidade e experi\xeancia do usu\xe1rio
      
      Retorne um objeto JSON com a seguinte estrutura:
      {
        "sugestoes": [
          {
            "formato": {objeto do formato},
            "elementos": [
              {
                "id": "id do elemento original",
                "tipo": "tipo do elemento",
                "posicao": {
                  "x": n\xfamero,
                  "y": n\xfamero
                },
                "dimensoes": {
                  "largura": n\xfamero,
                  "altura": n\xfamero
                },
                "propriedades": {
                  // propriedades espec\xedficas do elemento, como tamanho de fonte, etc.
                }
              }
            ]
          }
        ]
      }
    `,{text:i}=await sh({model:iv("claude-3-5-sonnet-20241022"),prompt:s,temperature:.7,maxTokens:4e3});console.log("Resposta da Anthropic Claude:",i);try{let e=i.match(/```json\s*([\s\S]*?)\s*```/)||i.match(/\{[\s\S]*\}/),r=e?e[1]||e[0]:i;t=JSON.parse(r)}catch(e){return console.error("Erro ao processar resposta da Anthropic Claude:",e),console.log("Resposta original:",i),L.NextResponse.json({error:"Erro ao processar resposta da IA",rawResponse:i},{status:500})}return L.NextResponse.json(t)}catch(e){return console.error("Erro no processamento:",e),L.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let i_=new U.AppRouteRouteModule({definition:{kind:D.RouteKind.APP_ROUTE,page:"/api/posicionamento-elementos/route",pathname:"/api/posicionamento-elementos",filename:"route",bundlePath:"app/api/posicionamento-elementos/route"},resolvedPagePath:"/home/devleor/Personal/GitHub/mkt-pupila-ad/app/api/posicionamento-elementos/route.ts",nextConfigOutput:"",userland:$}),{workAsyncStorage:iw,workUnitAsyncStorage:ix,serverHooks:ik}=i_;function iT(){return(0,F.patchFetch)({workAsyncStorage:iw,workUnitAsyncStorage:ix})}},80745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(90555),t)},85869:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,a=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function n(e,n,i){null==i&&null!==n&&"object"==typeof n&&(i=n,n=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,n);if(null===o||"object"!=typeof o)return o;let l=i&&i.protoAction||"error",u=i&&i.constructorAction||"error";if("ignore"===l&&"ignore"===u)return o;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===a.test(e))return o}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return o}else if(!1===a.test(e))return o;return s(o,{protoAction:l,constructorAction:u,safe:i&&i.safe})}function s(e,{protoAction:t="error",constructorAction:r="error",safe:a}={}){let n=[e];for(;n.length;){let e=n;for(let s of(n=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===a)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===a)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&n.push(t)}}}return e}function i(e,t,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,r)}finally{Error.stackTraceLimit=a}}e.exports=i,e.exports.default=i,e.exports.parse=i,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=s},87870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return d}});let a=r(97010),n=r(20172),s=r(53300),i=r(69751),o=r(97010),l=Symbol("internal response"),u=new Set([301,302,303,307,308]);function c(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[a,n]of e.request.headers)t.set("x-middleware-request-"+a,n),r.push(a);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);let r=this.headers,u=new Proxy(new o.ResponseCookies(r),{get(e,n,s){switch(n){case"delete":case"set":return(...s)=>{let i=Reflect.apply(e[n],e,s),l=new Headers(r);return i instanceof o.ResponseCookies&&r.set("x-middleware-set-cookie",i.getAll().map(e=>(0,a.stringifyCookie)(e)).join(",")),c(t,l),i};default:return i.ReflectAdapter.get(e,n,s)}}});this[l]={cookies:u,url:t.url?new n.NextURL(t.url,{headers:(0,s.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[l].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!u.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let a="object"==typeof t?t:{},n=new Headers(null==a?void 0:a.headers);return n.set("Location",(0,s.validateURL)(e)),new d(null,{...a,headers:n,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,s.validateURL)(e)),c(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),c(e,t),new d(null,{...e,headers:t})}}},88551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return r}});let r="undefined"==typeof URLPattern?void 0:URLPattern},90555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return n}});let a=r(29294);function n(e){let t=a.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[151],()=>r(80298));module.exports=a})();