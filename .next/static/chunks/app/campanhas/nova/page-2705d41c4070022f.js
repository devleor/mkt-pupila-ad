(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{44:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>l});var r=t(7943),n=t(4643),s=t(6400),i=t(7959),o=t(391);function l(){let a=(0,n.useRouter)(),{toast:e}=(0,i.d)(),t=(0,s.V)(a=>a.adicionarCampanha);return(0,r.jsx)("div",{className:"page-container",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"page-title",children:"Nova Campanha"}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault();let n=new FormData(r.currentTarget),s=n.get("nome"),i=n.get("descricao");if(!s.trim()){e({title:"Nome obrigat\xf3rio",description:"Por favor, informe um nome para a campanha.",variant:"destructive"});return}try{let r=t({nome:s,descricao:i,plataformas:o.LG.map(a=>a.id)});e({title:"Campanha criada",description:"A campanha foi criada com sucesso!"}),a.push("/campanhas/".concat(r,"/editor"))}catch(a){console.error("Erro ao criar campanha:",a),e({title:"Erro ao criar campanha",description:"Ocorreu um erro ao criar a campanha. Por favor, tente novamente.",variant:"destructive"})}},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"nome",className:"form-label",children:"Nome da Campanha"}),(0,r.jsx)("input",{type:"text",id:"nome",name:"nome",className:"input",placeholder:"Digite o nome da sua campanha"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{id:"descricao",name:"descricao",className:"textarea",placeholder:"Descreva o objetivo da sua campanha",rows:4})]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-outline",onClick:()=>a.back(),children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Criar Campanha"})]})]})})]})})}},1635:(a,e,t)=>{"use strict";t.d(e,{Zr:()=>n});let r=a=>e=>{try{let t=a(e);if(t instanceof Promise)return t;return{then:a=>r(a)(t),catch(a){return this}}}catch(a){return{then(a){return this},catch:e=>r(e)(a)}}},n=(a,e)=>(t,n,s)=>{let i,o={storage:function(a,e){let t;try{t=a()}catch(a){return}return{getItem:a=>{var e;let r=a=>null===a?null:JSON.parse(a,void 0),n=null!=(e=t.getItem(a))?e:null;return n instanceof Promise?n.then(r):r(n)},setItem:(a,e)=>t.setItem(a,JSON.stringify(e,void 0)),removeItem:a=>t.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,e)=>({...e,...a}),...e},l=!1,c=new Set,m=new Set,u=o.storage;if(!u)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...a)},n,s);let d=()=>{let a=o.partialize({...n()});return u.setItem(o.name,{state:a,version:o.version})},p=s.setState;s.setState=(a,e)=>{p(a,e),d()};let h=a((...a)=>{t(...a),d()},n,s);s.getInitialState=()=>h;let f=()=>{var a,e;if(!u)return;l=!1,c.forEach(a=>{var e;return a(null!=(e=n())?e:h)});let s=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,null!=(a=n())?a:h))||void 0;return r(u.getItem.bind(u))(o.name).then(a=>{if(a){if("number"!=typeof a.version||a.version===o.version)return[!1,a.state];if(o.migrate){let e=o.migrate(a.state,a.version);return e instanceof Promise?e.then(a=>[!0,a]):[!0,e]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var e;let[r,s]=a;if(t(i=o.merge(s,null!=(e=n())?e:h),!0),r)return d()}).then(()=>{null==s||s(i,void 0),i=n(),l=!0,m.forEach(a=>a(i))}).catch(a=>{null==s||s(void 0,a)})};return s.persist={setOptions:a=>{o={...o,...a},a.storage&&(u=a.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:a=>(c.add(a),()=>{c.delete(a)}),onFinishHydration:a=>(m.add(a),()=>{m.delete(a)})},o.skipHydration||f(),i||h}},4643:(a,e,t)=>{"use strict";var r=t(3307);t.o(r,"useParams")&&t.d(e,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(e,{useRouter:function(){return r.useRouter}})},4832:(a,e,t)=>{"use strict";t.d(e,{v:()=>l});var r=t(8543);let n=a=>{let e;let t=new Set,r=(a,r)=>{let n="function"==typeof a?a(e):a;if(!Object.is(n,e)){let a=e;e=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},e,n),t.forEach(t=>t(e,a))}},n=()=>e,s={setState:r,getState:n,getInitialState:()=>i,subscribe:a=>(t.add(a),()=>t.delete(a))},i=e=a(r,n,s);return s},s=a=>a?n(a):n,i=a=>a,o=a=>{let e=s(a),t=a=>(function(a,e=i){let t=r.useSyncExternalStore(a.subscribe,()=>e(a.getState()),()=>e(a.getInitialState()));return r.useDebugValue(t),t})(e,a);return Object.assign(t,e),t},l=a=>a?o(a):o},5557:(a,e,t)=>{Promise.resolve().then(t.bind(t,44))},6400:(a,e,t)=>{"use strict";t.d(e,{V:()=>s});var r=t(4832),n=t(1635);let s=(0,r.v)()((0,n.Zr)((a,e)=>({campanhas:[],campanhaAtual:null,adicionarCampanha:e=>{let t="campanha-".concat(Date.now()),r={...e,id:t,criadoEm:new Date().toISOString(),modificadoEm:new Date().toISOString(),assets:[]};return a(a=>({campanhas:[...a.campanhas,r],campanhaAtual:r})),t},atualizarCampanha:(e,t)=>{a(a=>{var r;return{campanhas:a.campanhas.map(a=>a.id===e?{...a,...t,modificadoEm:new Date().toISOString()}:a),campanhaAtual:(null===(r=a.campanhaAtual)||void 0===r?void 0:r.id)===e?{...a.campanhaAtual,...t,modificadoEm:new Date().toISOString()}:a.campanhaAtual}})},removerCampanha:e=>{a(a=>{var t;return{campanhas:a.campanhas.filter(a=>a.id!==e),campanhaAtual:(null===(t=a.campanhaAtual)||void 0===t?void 0:t.id)===e?null:a.campanhaAtual}})},selecionarCampanha:t=>{a({campanhaAtual:e().campanhas.find(a=>a.id===t)||null})},adicionarAsset:(e,t)=>{a(a=>{var r;let n=a.campanhas.map(a=>{let r;if(a.id!==e)return a;let n=a.assets.findIndex(a=>a.plataforma===t.plataforma&&a.formato===t.formato);return n>=0?(r=[...a.assets])[n]=t:r=[...a.assets,t],{...a,assets:r,modificadoEm:new Date().toISOString()}}),s=(null===(r=a.campanhaAtual)||void 0===r?void 0:r.id)===e?n.find(a=>a.id===e)||null:a.campanhaAtual;return{campanhas:n,campanhaAtual:s}})},atualizarAsset:(e,t,r,n)=>{a(a=>{var s;let i=a.campanhas.map(a=>{if(a.id!==e)return a;let s=a.assets.map(a=>a.plataforma===t&&a.formato===r?{...a,elementos:n}:a);return{...a,assets:s,modificadoEm:new Date().toISOString()}}),o=(null===(s=a.campanhaAtual)||void 0===s?void 0:s.id)===e?i.find(a=>a.id===e)||null:a.campanhaAtual;return{campanhas:i,campanhaAtual:o}})},obterAsset:(a,t,r)=>{let n=e().campanhas.find(e=>e.id===a);if(n)return n.assets.find(a=>a.plataforma===t&&a.formato===r)}}),{name:"campanhas-store"}))},7959:(a,e,t)=>{"use strict";t.d(e,{d:()=>d});var r=t(8543);let n={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},s=0,i=new Map,o=(a,e)=>{switch(e.type){case n.ADD_TOAST:return{...a,toasts:[e.toast,...a.toasts].slice(0,5)};case n.UPDATE_TOAST:return{...a,toasts:a.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case n.DISMISS_TOAST:{let{toastId:t}=e;return t?p(t):a.toasts.forEach(a=>{p(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===t||void 0===t?{...a,open:!1}:a)}}case n.REMOVE_TOAST:if(void 0===e.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==e.toastId)}}},l=[],c={toasts:[]};function m(a){c=o(c,a),l.forEach(a=>{a(c)})}function u(a){let{...e}=a,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>m({type:n.DISMISS_TOAST,toastId:t});return m({type:n.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:a=>m({type:n.UPDATE_TOAST,toast:{...a,id:t}})}}function d(){let[a,e]=r.useState(c);return r.useEffect(()=>(l.push(e),()=>{let a=l.indexOf(e);a>-1&&l.splice(a,1)}),[a]),{...a,toast:u,dismiss:a=>m({type:n.DISMISS_TOAST,toastId:a})}}function p(a){if(i.has(a))return;let e=setTimeout(()=>{i.delete(a),m({type:n.REMOVE_TOAST,toastId:a})},1e6);i.set(a,e)}}},a=>{var e=e=>a(a.s=e);a.O(0,[391,340,544,358],()=>e(5557)),_N_E=a.O()}]);