(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{677:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eD});var o=t(7943),s=t(8543),r=t(4643),l=t(9124),n=t(7032),i=t(7610),c=t(8416),d=t(7044),m=t(7606),u=t(410),h=t(228),x=t(4082),p=t(735);function f(e){let{elemento:a,gridConfig:t,isEditing:r=!1,onClick:l,onPositionChange:n,container:i}=e;if(!a)return console.error("Tentativa de renderizar elemento nulo ou indefinido"),null;let{tipo:c="desconhecido",conteudo:m={},posicaoGrid:u={x:0,y:0,width:1,height:1},estilo:h={},camada:f=10,id:g="elemento-sem-id"}=a,v=(0,s.useRef)(null),[j,N]=(0,s.useState)(!1),b=(0,s.useRef)({x:0,y:0}),y=(0,s.useRef)({x:[],y:[]}),w=(0,s.useRef)({position:"absolute",left:"".concat(u.x/t.columns*100,"%"),top:"".concat(u.y/t.rows*100,"%"),width:"".concat(u.width/t.columns*100,"%"),height:"".concat(u.height/t.rows*100,"%"),zIndex:r&&j?100:f,cursor:r?"move":"default",...h});(0,s.useEffect)(()=>{w.current={position:"absolute",left:"".concat(u.x/t.columns*100,"%"),top:"".concat(u.y/t.rows*100,"%"),width:"".concat(u.width/t.columns*100,"%"),height:"".concat(u.height/t.rows*100,"%"),zIndex:r&&j?100:f,cursor:r?"move":"default",...h},v.current&&Object.assign(v.current.style,w.current)},[u,t.columns,t.rows,r,j,f,h]),(0,s.useEffect)(()=>{if(!i)return;let e=i.getBoundingClientRect(),a=e.width/t.columns,o=e.height/t.rows;y.current={x:Array.from({length:t.columns+1}).map((e,t)=>t*a),y:Array.from({length:t.rows+1}).map((e,a)=>a*o)}},[i,t.columns,t.rows]);let C=(0,s.useCallback)(e=>{if(!r||!i||!v.current)return;e.preventDefault(),N(!0),i.getBoundingClientRect();let a=v.current.getBoundingClientRect();b.current={x:e.clientX-a.left,y:e.clientY-a.top}},[r,i]),S=(0,s.useCallback)(e=>{if(!j||!i||!v.current)return;let a=i.getBoundingClientRect();a.width,t.columns,a.height,t.rows;let o=e.clientX-a.left-b.current.x,s=e.clientY-a.top-b.current.y,r=Math.min(a.width/t.columns*.3,a.height/t.rows*.3);for(let e of y.current.x)if(Math.abs(o-e)<r){o=e;break}for(let e of y.current.y)if(Math.abs(s-e)<r){s=e;break}o=Math.max(0,Math.min(o,a.width-v.current.offsetWidth)),s=Math.max(0,Math.min(s,a.height-v.current.offsetHeight)),v.current.style.left="".concat(o,"px"),v.current.style.top="".concat(s,"px")},[j,i,t.columns,t.rows]),A=(0,s.useCallback)(()=>{if(!j||!i||!v.current||!n)return;N(!1);let e=i.getBoundingClientRect(),a=e.width/t.columns,o=e.height/t.rows,s=v.current.getBoundingClientRect(),r=s.left-e.left,l=s.top-e.top,c=Math.max(0,Math.min(Math.round(r/a),t.columns-u.width)),d=Math.max(0,Math.min(Math.round(l/o),t.rows-u.height));n(g,{x:c,y:d}),v.current.style.left="".concat(c/t.columns*100,"%"),v.current.style.top="".concat(d/t.rows*100,"%"),v.current.style.width="".concat(u.width/t.columns*100,"%"),v.current.style.height="".concat(u.height/t.rows*100,"%")},[j,i,t,n,g,u.width,u.height]);(0,s.useEffect)(()=>{if(j&&i)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",A),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",A)}},[j,i,S,A]);let k=e=>{switch(e){case"grayscale":return"grayscale(100%)";case"sepia":return"sepia(100%)";case"blur":return"blur(4px)";case"brightness":return"brightness(150%)";case"contrast":return"contrast(200%)";default:return"none"}};return(0,o.jsxs)("div",{ref:v,className:(0,p.cn)("absolute",r&&["border-2 border-dashed transition-colors",j?"border-blue-500 bg-blue-50/20":"border-blue-400",!j&&"bg-white/10"]),style:w.current,onMouseDown:r?C:void 0,children:[(()=>{switch(c){case"logo":return(0,o.jsx)("div",{className:(0,p.cn)("flex items-center justify-center relative w-full h-full opacity-70",j&&""),onClick:l,children:m.src?(0,o.jsx)(x.default,{src:m.src||"/placeholder.svg",alt:"Logo",fill:!0,className:"object-contain w-full h-full",sizes:"100%"}):(0,o.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500  rounded-md",children:"Placeholder Logo"})});case"texto":return(0,o.jsx)("div",{className:(0,p.cn)("overflow-hidden w-full h-full",j&&"opacity-70"),style:{fontSize:m.fontSize||"16px",fontWeight:m.fontWeight||"normal",color:m.color||"#000000",textAlign:m.textAlign||"left"},onClick:l,children:m.texto||"Texto placeholder"});case"imagem":return(0,o.jsx)("div",{className:(0,p.cn)("overflow-hidden relative w-full h-full",j&&"opacity-70"),onClick:l,children:m.src?(0,o.jsx)(x.default,{src:m.src||"/placeholder.svg",alt:m.alt||"Imagem",fill:!0,className:"object-cover w-full h-full",sizes:"100%",priority:!0}):(0,o.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500 bg-gray-100 rounded-md",children:"Placeholder Imagem"})});case"imagemPersonalizada":return(0,o.jsx)("div",{className:(0,p.cn)("overflow-hidden relative w-full h-full",j&&"opacity-70"),onClick:l,style:{borderRadius:m.borda&&m.bordaRadius||"0px",border:m.borda?"2px solid #3b82f6":"none"},children:m.src?(0,o.jsx)("div",{className:"relative w-full h-full",children:(0,o.jsx)(x.default,{src:m.src||"/placeholder.svg",alt:m.alt||"Imagem Personalizada",fill:!0,className:"object-cover w-full h-full",sizes:"100%",priority:!0,style:{opacity:(m.opacidade||100)/100,filter:k(m.filtro||"")}})}):(0,o.jsx)("div",{className:"flex items-center justify-center w-full h-full text-sm text-gray-500 bg-gray-100 rounded-md",children:"Imagem Personalizada"})});case"cta":return(0,o.jsx)("div",{className:(0,p.cn)("flex items-center justify-center w-full h-full",j&&"opacity-70"),onClick:l,children:(0,o.jsx)("div",{className:"px-4 py-2 text-center text-white rounded-md",style:{backgroundColor:m.backgroundColor||"#000000",fontSize:m.fontSize||"16px"},children:m.texto||"Chamada para A\xe7\xe3o"})});default:return(0,o.jsx)("div",{className:(0,p.cn)("flex items-center justify-center text-gray-500 text-sm w-full h-full",j&&"opacity-70"),onClick:l,children:"Elemento Desconhecido"})}})(),r&&(0,o.jsx)("div",{className:"absolute top-0 right-0 p-1 bg-blue-500 text-white rounded-bl-md opacity-70",children:(0,o.jsx)(d.A,{size:14})})]})}function g(e){let{formatConfig:a,elementos:t,onElementosChange:r,editMode:l=!1}=e,[n,i]=(0,s.useState)(!0),[x,p]=(0,s.useState)(null),g=(0,s.useRef)(null),[v,j]=(0,s.useState)({width:0,height:0}),{width:N,height:b,grid:y}=a;y.columns,y.rows,(0,s.useEffect)(()=>{if(!g.current)return;let e=()=>{if(g.current){let e=g.current.getBoundingClientRect();j({width:e.width,height:e.height})}};e();let a=new ResizeObserver(e);return a.observe(g.current),()=>{g.current&&a.unobserve(g.current)}},[]);let w=(e,a)=>{r&&r(t.map(t=>t.id===e?{...t,posicaoGrid:{...t.posicaoGrid,x:Math.max(0,Math.min(a.x,y.columns-t.posicaoGrid.width)),y:Math.max(0,Math.min(a.y,y.rows-t.posicaoGrid.height))}}:t))},C=e=>{l&&p(e)},S=[...t].sort((e,a)=>(e.camada||10)-(a.camada||10));return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between h-full p-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium",children:"Preview"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[l&&(0,o.jsxs)("div",{className:"mr-2 text-sm text-gray-500 flex items-center gap-2",children:[(0,o.jsx)(d.A,{size:16,className:"text-blue-500"}),(0,o.jsx)("span",{children:"Arraste os elementos para posicion\xe1-los"})]}),(0,o.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>i(!n),children:[n?(0,o.jsx)(m.A,{className:"w-4 h-4 mr-2"}):(0,o.jsx)(u.A,{className:"w-4 h-4 mr-2"}),n?"Ocultar Grid":"Mostrar Grid"]})]})]}),(0,o.jsxs)("div",{ref:g,className:"relative  w-full h-full overflow-hidden bg-white border rounded-md shadow-sm",style:{aspectRatio:"".concat(N," / ").concat(b),width:"100%",margin:"0 auto"},children:[S.map(e=>(0,o.jsx)(f,{elemento:e,gridConfig:y,isEditing:l,onClick:()=>C(e.id),onPositionChange:w,container:g.current},e.id)),n&&(0,o.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-20",children:[Array.from({length:y.columns+1}).map((e,a)=>(0,o.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-blue-300",style:{left:"".concat(a/y.columns*100,"%"),opacity:a%2==0?.4:.2,borderStyle:a%2==0?"solid":"dashed"}},"v-".concat(a))),Array.from({length:y.rows+1}).map((e,a)=>(0,o.jsx)("div",{className:"absolute left-0 right-0 border-t border-blue-300",style:{top:"".concat(a/y.rows*100,"%"),opacity:a%2==0?.4:.2,borderStyle:a%2==0?"solid":"dashed"}},"h-".concat(a)))]})]}),(0,o.jsxs)("div",{className:"p-3 text-sm text-center text-gray-500 border rounded-md bg-gray-50",children:[(0,o.jsx)(h.A,{className:"inline-block w-4 h-4 mr-1"}),a.nome,": ",N," \xd7 ",b," pixels"]})]})}var v=t(2642),j=t(4748),N=t(3467),b=t(7416),y=t(6160),w=t(1428),C=t(6106),S=t(8203),A=t(5945),k=t(8595),E=t(4165),z=t(7571);let M=E.bL,T=E.l9,R=E.ZL;E.bm;let O=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(E.hJ,{ref:a,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});O.displayName=E.hJ.displayName;let D=s.forwardRef((e,a)=>{let{className:t,children:s,...r}=e;return(0,o.jsxs)(R,{children:[(0,o.jsx)(O,{}),(0,o.jsxs)(E.UC,{ref:a,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,(0,o.jsxs)(E.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(z.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Fechar"})]})]})]})});D.displayName=E.UC.displayName;let F=e=>{let{className:a,...t}=e;return(0,o.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};F.displayName="DialogHeader";let G=e=>{let{className:a,...t}=e;return(0,o.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};G.displayName="DialogFooter";let L=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(E.hE,{ref:a,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});L.displayName=E.hE.displayName;let I=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(E.VY,{ref:a,className:(0,p.cn)("text-sm text-muted-foreground",t),...s})});I.displayName=E.VY.displayName;var P=t(9897);function J(e){let{onSelectImage:a}=e,[t,r]=(0,s.useState)(""),l=[{id:"1",url:"https://images.unsplash.com/photo-1682687220063-4742bd7fd538?q=80&w=1000",alt:"Montanhas ao p\xf4r do sol",tags:["natureza","paisagem","montanhas"]},{id:"2",url:"https://images.unsplash.com/photo-1682687220208-22d7a2543e88?q=80&w=1000",alt:"Praia tropical",tags:["natureza","praia","mar","tropical"]},{id:"3",url:"https://images.unsplash.com/photo-1682687220923-c58b9a4592ea?q=80&w=1000",alt:"Cidade \xe0 noite",tags:["cidade","urbano","noite","luzes"]},{id:"4",url:"https://images.unsplash.com/photo-1682687220067-dced9a881b56?q=80&w=1000",alt:"Floresta densa",tags:["natureza","floresta","\xe1rvores","verde"]},{id:"5",url:"https://images.unsplash.com/photo-1682687220063-4742bd7fd538?q=80&w=1000",alt:"Deserto ao entardecer",tags:["natureza","deserto","areia","p\xf4r do sol"]},{id:"6",url:"https://images.unsplash.com/photo-1682687220208-22d7a2543e88?q=80&w=1000",alt:"Lago com montanhas",tags:["natureza","lago","montanhas","reflexo"]}],n=t?l.filter(e=>e.alt.toLowerCase().includes(t.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(t.toLowerCase()))):l;return(0,o.jsxs)(M,{children:[(0,o.jsx)(T,{asChild:!0,children:(0,o.jsx)(c.$,{variant:"outline",className:"w-full",children:"Selecionar da Biblioteca"})}),(0,o.jsxs)(D,{className:"sm:max-w-[700px]",children:[(0,o.jsx)(F,{children:(0,o.jsx)(L,{children:"Biblioteca de Imagens"})}),(0,o.jsxs)("div",{className:"relative mb-4",children:[(0,o.jsx)(P.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,o.jsx)(j.p,{placeholder:"Buscar imagens...",className:"pl-8",value:t,onChange:e=>r(e.target.value)})]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-1",children:[n.map(e=>(0,o.jsx)("div",{className:"relative aspect-square cursor-pointer overflow-hidden rounded-md border hover:border-blue-500 transition-all",onClick:()=>{a(e.url)},children:(0,o.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.alt,className:"h-full w-full object-cover"})},e.id)),0===n.length&&(0,o.jsxs)("div",{className:"col-span-3 py-8 text-center text-gray-500",children:['Nenhuma imagem encontrada para "',t,'"']})]})]})]})}function V(e){let{formatConfig:a,elementos:t,setElementos:r}=e,[d,m]=(0,s.useState)(null),u=null!==d?t[d]:null,h=e=>{r([...t,{id:"elemento-".concat(Date.now()),tipo:e,posicaoGrid:{x:1,y:1,width:2,height:2},conteudo:x(e)}]),m(t.length)},x=e=>{switch(e){case"logo":return{src:""};case"texto":return{texto:"Texto de Exemplo",fontSize:"16px",color:"#000000",textAlign:"left"};case"imagem":return{src:"",alt:"Imagem"};case"imagemPersonalizada":return{src:"",alt:"Imagem Personalizada",filtro:"nenhum",opacidade:100,borda:!1,bordaRadius:"0px"};case"cta":return{texto:"Saiba Mais",backgroundColor:"#0070f3",fontSize:"16px"};default:return{}}},p=e=>{if(null===d)return;let a=[...t];a[d]={...a[d],...e},r(a)},f=e=>{if(null===d)return;let a=[...t];a[d]={...a[d],conteudo:{...a[d].conteudo,...e}},r(a)},E=e=>{if(null===d)return;let a=[...t];a[d]={...a[d],posicaoGrid:{...a[d].posicaoGrid,...e}},r(a)},z=()=>{null!==d&&(r(t.filter((e,a)=>a!==d)),m(null))},M=()=>{if(null===d)return;let e=t[d];r([...t,{...JSON.parse(JSON.stringify(e)),id:"elemento-".concat(Date.now()),posicaoGrid:{...e.posicaoGrid,x:Math.min(e.posicaoGrid.x+1,a.grid.columns-e.posicaoGrid.width)}}]),m(t.length)};return(0,o.jsxs)("div",{className:"gap-6",children:[(0,o.jsx)("div",{className:"lg:col-span-4",children:(0,o.jsxs)(v.Zp,{children:[(0,o.jsx)(v.aR,{children:(0,o.jsx)(v.ZB,{children:"Elementos"})}),(0,o.jsx)(v.Wu,{children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,o.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>h("logo"),children:[(0,o.jsx)(b.A,{className:"w-4 h-4 mr-1"})," Logo"]}),(0,o.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>h("texto"),children:[(0,o.jsx)(b.A,{className:"w-4 h-4 mr-1"})," Texto"]}),(0,o.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>h("imagem"),children:[(0,o.jsx)(b.A,{className:"w-4 h-4 mr-1"})," Imagem"]}),(0,o.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>h("imagemPersonalizada"),children:[(0,o.jsx)(b.A,{className:"w-4 h-4 mr-1"})," Imagem Personalizada"]}),(0,o.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>h("cta"),children:[(0,o.jsx)(b.A,{className:"w-4 h-4 mr-1"})," CTA"]})]}),(0,o.jsx)("div",{className:"border rounded-md divide-y",children:0===t.length?(0,o.jsx)("div",{className:"p-4 text-sm text-center text-gray-500",children:"Nenhum elemento adicionado. Adicione elementos usando os bot\xf5es acima."}):t.map((e,a)=>(0,o.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-50 ".concat(d===a?"bg-blue-50":""),onClick:()=>m(a),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(y.A,{className:"w-4 h-4 text-gray-400"}),(0,o.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]}),(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)(c.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation();let o=[...t],s=o[a];o[a]={...s,camada:Math.min(100,(s.camada||10)+5)},r(o)},title:"Trazer para frente",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-bring-to-front",children:[(0,o.jsx)("rect",{x:"8",y:"8",width:"8",height:"8",rx:"2"}),(0,o.jsx)("path",{d:"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2"}),(0,o.jsx)("path",{d:"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2"})]})}),(0,o.jsx)(c.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation();let o=[...t],s=o[a];o[a]={...s,camada:Math.max(1,(s.camada||10)-5)},r(o)},title:"Enviar para tr\xe1s",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send-to-back",children:[(0,o.jsx)("rect",{x:"14",y:"14",width:"8",height:"8",rx:"2"}),(0,o.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"2"}),(0,o.jsx)("path",{d:"M7 14v1a2 2 0 0 0 2 2h1"}),(0,o.jsx)("path",{d:"M14 7h1a2 2 0 0 1 2 2v1"})]})}),(0,o.jsx)(c.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation(),M()},children:(0,o.jsx)(w.A,{className:"w-4 h-4"})}),(0,o.jsx)(c.$,{size:"icon",variant:"ghost",onClick:e=>{e.stopPropagation(),z()},children:(0,o.jsx)(C.A,{className:"w-4 h-4"})})]})]}),"texto"===e.tipo&&(0,o.jsx)("div",{className:"mt-1 text-sm text-gray-500 truncate",children:e.conteudo.texto||"Texto"}),(0,o.jsxs)("div",{className:"mt-1 text-xs text-gray-400 flex justify-between",children:[(0,o.jsxs)("span",{children:["Posi\xe7\xe3o: x:",e.posicaoGrid.x,", y:",e.posicaoGrid.y]}),(0,o.jsxs)("span",{children:["Camada: ",e.camada||10]})]})]},e.id||a))})]})})]})}),(0,o.jsx)("div",{className:"lg:col-span-8",children:(0,o.jsxs)("div",{className:"grid gap-6",children:[(0,o.jsxs)(v.Zp,{children:[(0,o.jsx)(v.aR,{children:(0,o.jsx)(v.ZB,{children:"Posicionamento Direto"})}),(0,o.jsxs)(v.Wu,{children:[(0,o.jsx)("div",{className:"mb-2 text-sm text-gray-500",children:"Arraste elementos para posicion\xe1-los visualmente no grid. O grid est\xe1 vis\xedvel para facilitar o posicionamento."}),(0,o.jsx)("div",{className:"h-94 overflow-auto border rounded-lg",children:(0,o.jsx)(g,{formatConfig:a,elementos:t,onElementosChange:r,editMode:!0})})]})]}),u?(0,o.jsxs)(v.Zp,{children:[(0,o.jsx)(v.aR,{children:(0,o.jsxs)(v.ZB,{children:["Editar ",u.tipo]})}),(0,o.jsx)(v.Wu,{children:(0,o.jsxs)(l.tU,{defaultValue:"conteudo",children:[(0,o.jsxs)(l.j7,{className:"mb-4",children:[(0,o.jsx)(l.Xi,{value:"conteudo",children:"Conte\xfado"}),(0,o.jsx)(l.Xi,{value:"posicao",children:"Posi\xe7\xe3o"})]}),(0,o.jsxs)(l.av,{value:"conteudo",children:["texto"===u.tipo&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"texto",children:"Conte\xfado do Texto"}),(0,o.jsx)(j.p,{id:"texto",value:u.conteudo.texto||"",onChange:e=>f({texto:e.target.value})})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"fontSize",children:"Tamanho da Fonte"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(j.p,{id:"fontSize",value:u.conteudo.fontSize||"16px",onChange:e=>f({fontSize:e.target.value}),className:"w-24"}),(0,o.jsx)(N.A,{defaultValue:[Number.parseInt(u.conteudo.fontSize)||16],min:8,max:72,step:1,onValueChange:e=>f({fontSize:"".concat(e[0],"px")}),className:"flex-1"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"textColor",children:"Cor do Texto"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(j.p,{id:"textColor",type:"color",value:u.conteudo.color||"#000000",onChange:e=>f({color:e.target.value}),className:"w-12 h-8 p-1"}),(0,o.jsx)(j.p,{value:u.conteudo.color||"#000000",onChange:e=>f({color:e.target.value})})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"textAlign",children:"Alinhamento do Texto"}),(0,o.jsxs)(n.l6,{value:u.conteudo.textAlign||"left",onValueChange:e=>f({textAlign:e}),children:[(0,o.jsx)(n.bq,{id:"textAlign",children:(0,o.jsx)(n.yv,{placeholder:"Selecione o alinhamento"})}),(0,o.jsxs)(n.gC,{children:[(0,o.jsx)(n.eb,{value:"left",children:"Esquerda"}),(0,o.jsx)(n.eb,{value:"center",children:"Centro"}),(0,o.jsx)(n.eb,{value:"right",children:"Direita"})]})]})]})]}),"imagem"===u.tipo&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imageSrc",children:"URL da Imagem"}),(0,o.jsx)(j.p,{id:"imageSrc",value:u.conteudo.src||"",onChange:e=>f({src:e.target.value}),placeholder:"https://exemplo.com/imagem.jpg"})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imageAlt",children:"Texto Alternativo"}),(0,o.jsx)(j.p,{id:"imageAlt",value:u.conteudo.alt||"",onChange:e=>f({alt:e.target.value}),placeholder:"Descri\xe7\xe3o da imagem"})]})]}),"imagemPersonalizada"===u.tipo&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imagemSrc",children:"URL da Imagem"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(j.p,{id:"imagemSrc",value:u.conteudo.src||"",onChange:e=>f({src:e.target.value}),placeholder:"https://exemplo.com/imagem.jpg",className:"flex-1"}),(0,o.jsx)(J,{onSelectImage:e=>f({src:e})})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imagemAlt",children:"Texto Alternativo"}),(0,o.jsx)(j.p,{id:"imagemAlt",value:u.conteudo.alt||"",onChange:e=>f({alt:e.target.value}),placeholder:"Descri\xe7\xe3o da imagem"})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imagemOpacidade",children:"Opacidade"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(N.A,{id:"imagemOpacidade",defaultValue:[u.conteudo.opacidade||100],min:0,max:100,step:1,onValueChange:e=>f({opacidade:e[0]}),className:"flex-1"}),(0,o.jsxs)("span",{className:"w-12 text-center",children:[u.conteudo.opacidade||100,"%"]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imagemFiltro",children:"Filtro"}),(0,o.jsxs)(n.l6,{value:u.conteudo.filtro||"nenhum",onValueChange:e=>f({filtro:e}),children:[(0,o.jsx)(n.bq,{id:"imagemFiltro",children:(0,o.jsx)(n.yv,{placeholder:"Selecione um filtro"})}),(0,o.jsxs)(n.gC,{children:[(0,o.jsx)(n.eb,{value:"nenhum",children:"Nenhum"}),(0,o.jsx)(n.eb,{value:"grayscale",children:"Preto e Branco"}),(0,o.jsx)(n.eb,{value:"sepia",children:"S\xe9pia"}),(0,o.jsx)(n.eb,{value:"blur",children:"Desfoque"}),(0,o.jsx)(n.eb,{value:"brightness",children:"Brilho"}),(0,o.jsx)(n.eb,{value:"contrast",children:"Contraste"})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,o.jsx)(k.S,{id:"imagemBorda",checked:u.conteudo.borda||!1,onCheckedChange:e=>f({borda:e})}),(0,o.jsx)(i.J,{htmlFor:"imagemBorda",className:"cursor-pointer",children:"Adicionar borda"})]}),u.conteudo.borda&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"imagemBordaRadius",children:"Arredondamento da borda"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(j.p,{id:"imagemBordaRadius",value:u.conteudo.bordaRadius||"0px",onChange:e=>f({bordaRadius:e.target.value}),className:"w-24"}),(0,o.jsx)(N.A,{defaultValue:[Number.parseInt(u.conteudo.bordaRadius)||0],min:0,max:50,step:1,onValueChange:e=>f({bordaRadius:"".concat(e[0],"px")}),className:"flex-1"})]})]})]}),"logo"===u.tipo&&(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"logoSrc",children:"URL do Logo"}),(0,o.jsx)(j.p,{id:"logoSrc",value:u.conteudo.src||"",onChange:e=>f({src:e.target.value}),placeholder:"https://exemplo.com/logo.png"})]})}),"cta"===u.tipo&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"ctaText",children:"Texto do Bot\xe3o"}),(0,o.jsx)(j.p,{id:"ctaText",value:u.conteudo.texto||"",onChange:e=>f({texto:e.target.value})})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"ctaColor",children:"Cor do Bot\xe3o"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(j.p,{id:"ctaColor",type:"color",value:u.conteudo.backgroundColor||"#0070f3",onChange:e=>f({backgroundColor:e.target.value}),className:"w-12 h-8 p-1"}),(0,o.jsx)(j.p,{value:u.conteudo.backgroundColor||"#0070f3",onChange:e=>f({backgroundColor:e.target.value})})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"ctaFontSize",children:"Tamanho da Fonte"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(j.p,{id:"ctaFontSize",value:u.conteudo.fontSize||"16px",onChange:e=>f({fontSize:e.target.value}),className:"w-24"}),(0,o.jsx)(N.A,{defaultValue:[Number.parseInt(u.conteudo.fontSize)||16],min:8,max:32,step:1,onValueChange:e=>f({fontSize:"".concat(e[0],"px")}),className:"flex-1"})]})]})]})]}),(0,o.jsx)(l.av,{value:"posicao",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"gridX",children:"Posi\xe7\xe3o X"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({x:Math.max(0,u.posicaoGrid.x-1)}),disabled:u.posicaoGrid.x<=0,children:(0,o.jsx)(S.A,{className:"w-4 h-4 rotate-180"})}),(0,o.jsx)(j.p,{id:"gridX",type:"number",min:0,max:a.grid.columns-u.posicaoGrid.width,value:u.posicaoGrid.x,onChange:e=>E({x:Number.parseInt(e.target.value)||0})}),(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({x:Math.min(a.grid.columns-u.posicaoGrid.width,u.posicaoGrid.x+1)}),disabled:u.posicaoGrid.x>=a.grid.columns-u.posicaoGrid.width,children:(0,o.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"gridY",children:"Posi\xe7\xe3o Y"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({y:Math.max(0,u.posicaoGrid.y-1)}),disabled:u.posicaoGrid.y<=0,children:(0,o.jsx)(A.A,{className:"w-4 h-4 rotate-180"})}),(0,o.jsx)(j.p,{id:"gridY",type:"number",min:0,max:a.grid.rows-u.posicaoGrid.height,value:u.posicaoGrid.y,onChange:e=>E({y:Number.parseInt(e.target.value)||0})}),(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({y:Math.min(a.grid.rows-u.posicaoGrid.height,u.posicaoGrid.y+1)}),disabled:u.posicaoGrid.y>=a.grid.rows-u.posicaoGrid.height,children:(0,o.jsx)(A.A,{className:"w-4 h-4"})})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"gridWidth",children:"Largura (c\xe9lulas)"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({width:Math.max(1,u.posicaoGrid.width-1)}),disabled:u.posicaoGrid.width<=1,children:(0,o.jsx)(S.A,{className:"w-4 h-4 rotate-180"})}),(0,o.jsx)(j.p,{id:"gridWidth",type:"number",min:1,max:a.grid.columns-u.posicaoGrid.x,value:u.posicaoGrid.width,onChange:e=>E({width:Number.parseInt(e.target.value)||1})}),(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({width:Math.min(a.grid.columns-u.posicaoGrid.x,u.posicaoGrid.width+1)}),disabled:u.posicaoGrid.width>=a.grid.columns-u.posicaoGrid.x,children:(0,o.jsx)(S.A,{className:"w-4 h-4"})})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"gridHeight",children:"Altura (c\xe9lulas)"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({height:Math.max(1,u.posicaoGrid.height-1)}),disabled:u.posicaoGrid.height<=1,children:(0,o.jsx)(A.A,{className:"w-4 h-4 rotate-180"})}),(0,o.jsx)(j.p,{id:"gridHeight",type:"number",min:1,max:a.grid.rows-u.posicaoGrid.y,value:u.posicaoGrid.height,onChange:e=>E({height:Number.parseInt(e.target.value)||1})}),(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>E({height:Math.min(a.grid.rows-u.posicaoGrid.y,u.posicaoGrid.height+1)}),disabled:u.posicaoGrid.height>=a.grid.rows-u.posicaoGrid.y,children:(0,o.jsx)(A.A,{className:"w-4 h-4"})})]})]})]}),(0,o.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"camada",children:"Camada (Z-Index)"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>p({camada:Math.max(1,(u.camada||10)-1)}),title:"Enviar para tr\xe1s",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send-to-back",children:[(0,o.jsx)("rect",{x:"14",y:"14",width:"8",height:"8",rx:"2"}),(0,o.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"2"}),(0,o.jsx)("path",{d:"M7 14v1a2 2 0 0 0 2 2h1"}),(0,o.jsx)("path",{d:"M14 7h1a2 2 0 0 1 2 2v1"})]})}),(0,o.jsx)(j.p,{id:"camada",type:"number",min:1,max:100,value:u.camada||10,onChange:e=>p({camada:Number.parseInt(e.target.value)||10})}),(0,o.jsx)(c.$,{size:"icon",variant:"outline",onClick:()=>p({camada:Math.min(100,(u.camada||10)+1)}),title:"Trazer para frente",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-bring-to-front",children:[(0,o.jsx)("rect",{x:"8",y:"8",width:"8",height:"8",rx:"2"}),(0,o.jsx)("path",{d:"M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2"}),(0,o.jsx)("path",{d:"M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2"})]})})]}),(0,o.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Valores maiores trazem o elemento para frente, valores menores enviam para tr\xe1s."})]})]})})]})})]}):(0,o.jsx)("div",{className:"flex items-center justify-center h-full p-8 text-center border rounded-lg",children:(0,o.jsxs)("div",{className:"max-w-md space-y-2",children:[(0,o.jsx)("h3",{className:"text-lg font-medium",children:"Nenhum Elemento Selecionado"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Selecione um elemento da lista \xe0 esquerda para editar suas propriedades, ou adicione um novo elemento."})]})})]})})]})}var B=t(1653),$=t(2285),_=t(2079);function W(e){let{plataforma:a,formato:t,formatConfig:r,elementos:l}=e,[n,i]=(0,s.useState)(!1),d=async()=>{if(!r)return;i(!0),await new Promise(e=>setTimeout(e,1500)),console.log("Exportando pe\xe7a:",{plataforma:a,formato:t,dimensoes:"".concat(r.width,"x").concat(r.height),elementos:l.length}),i(!1);let e=document.createElement("a");e.href="#",e.download="".concat(a,"-").concat(t,"-peca.png"),e.click()};return(0,o.jsxs)(v.Zp,{children:[(0,o.jsxs)(v.aR,{children:[(0,o.jsx)(v.ZB,{children:"Exportar Pe\xe7a"}),(0,o.jsx)(v.BT,{children:"Gere e baixe sua pe\xe7a gr\xe1fica"})]}),(0,o.jsx)(v.Wu,{children:r?(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsx)("div",{className:"p-3 text-sm border rounded-md bg-gray-50",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)("div",{children:(0,o.jsx)("span",{className:"font-medium",children:"Plataforma:"})}),(0,o.jsx)("div",{className:"capitalize",children:a}),(0,o.jsx)("div",{children:(0,o.jsx)("span",{className:"font-medium",children:"Formato:"})}),(0,o.jsx)("div",{children:t}),(0,o.jsx)("div",{children:(0,o.jsx)("span",{className:"font-medium",children:"Dimens\xf5es:"})}),(0,o.jsxs)("div",{children:[r.width," \xd7 ",r.height,"px"]}),(0,o.jsx)("div",{children:(0,o.jsx)("span",{className:"font-medium",children:"Elementos:"})}),(0,o.jsx)("div",{children:l.length})]})})}):(0,o.jsx)("div",{className:"text-sm text-center text-gray-500",children:"Selecione uma plataforma e formato para habilitar a exporta\xe7\xe3o"})}),(0,o.jsxs)(v.wL,{className:"flex flex-col space-y-2",children:[(0,o.jsx)(c.$,{className:"w-full",onClick:d,disabled:!r||n,children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($.A,{className:"w-4 h-4 mr-2"}),"Exportar Pe\xe7a"]})}),(0,o.jsxs)(c.$,{variant:"outline",className:"w-full",disabled:!r||n,children:[(0,o.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"Compartilhar Pe\xe7a"]})]})]})}var Z=t(4832),q=t(1635);let H=(0,Z.v)()((0,q.Zr)(e=>({elementos:[],versoes:[],setElementos:a=>e({elementos:a}),resetElementos:function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e({elementos:Array.isArray(a)?a:[]})},salvarVersao:a=>e(e=>({versoes:[a,...e.versoes].slice(0,20)})),carregarVersao:a=>e({elementos:[...a.elementos]})}),{name:"pecas-store"}));var U=t(205),X=t(2223);function Y(){let{versoes:e,carregarVersao:a}=H(),[t,r]=(0,s.useState)(null),l=e=>{let a=new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},n=e=>{a(e)};return(0,o.jsx)(v.Zp,{children:(0,o.jsxs)(v.Wu,{className:"p-4",children:[(0,o.jsx)("h3",{className:"mb-4 text-lg font-medium",children:"Hist\xf3rico de Vers\xf5es"}),(0,o.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:0===e.length?(0,o.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Nenhuma vers\xe3o salva ainda."}):e.map((a,s)=>(0,o.jsxs)("div",{className:"p-3 border rounded-md hover:bg-gray-50 cursor-pointer",onClick:()=>r(t===a.timestamp?null:a.timestamp),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(U.A,{className:"w-4 h-4 text-gray-500"}),(0,o.jsxs)("span",{className:"text-sm font-medium",children:["Vers\xe3o ",e.length-s]})]}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:l(a.timestamp)})]}),t===a.timestamp&&(0,o.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 mb-3",children:[(0,o.jsx)("div",{children:"Plataforma:"}),(0,o.jsx)("div",{className:"capitalize",children:a.plataforma}),(0,o.jsx)("div",{children:"Formato:"}),(0,o.jsx)("div",{children:a.formato}),(0,o.jsx)("div",{children:"Elementos:"}),(0,o.jsx)("div",{children:a.elementos.length})]}),(0,o.jsxs)(c.$,{size:"sm",className:"w-full",onClick:e=>{e.stopPropagation(),n(a)},children:[(0,o.jsx)(X.A,{className:"w-3 h-3 mr-2"}),"Carregar esta vers\xe3o"]})]})]},a.timestamp))})]})})}var Q=t(990),K=t(5412);function ee(e){let{formatConfig:a}=e,[t,r]=(0,s.useState)(!1),{width:l,height:n,nome:i}=a,d=l/n,m=n>l,u=.1>Math.abs(d-1),h=d>2,x=u?{width:"".concat(120,"px"),height:"".concat(120,"px"),className:"bg-blue-100 border border-blue-300 rounded flex items-center justify-center"}:m?{width:"".concat(120*d,"px"),height:"".concat(120,"px"),className:"bg-green-100 border border-green-300 rounded flex items-center justify-center"}:h?{width:"".concat(120,"px"),height:"".concat(120/d,"px"),className:"bg-purple-100 border border-purple-300 rounded flex items-center justify-center"}:{width:"".concat(120,"px"),height:"".concat(120/d,"px"),className:"bg-blue-100 border border-blue-300 rounded flex items-center justify-center"},p=()=>u?"1:1":m?.05>Math.abs(d-.5625)?"9:16":.05>Math.abs(d-.75)?"3:4":"".concat(Math.round(100*d),":100"):h?.1>Math.abs(d-3.2)?"16:5":.1>Math.abs(d-4)?"4:1":"".concat(Math.round(10*d),":10"):.05>Math.abs(d-1.78)?"16:9":.05>Math.abs(d-1.33)?"4:3":"".concat(Math.round(10*d),":10");return(0,o.jsxs)("div",{className:"mt-4 p-3 border rounded-md bg-gray-50",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("h3",{className:"text-sm font-medium",children:"Visualiza\xe7\xe3o do Formato"}),(0,o.jsx)(c.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(!t),children:t?(0,o.jsx)(Q.A,{size:14}):(0,o.jsx)(K.A,{size:14})})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:x.className,style:{width:x.width,height:x.height},children:(0,o.jsx)("span",{className:"text-xs text-center px-1 truncate",children:p()})}),t&&(0,o.jsxs)("div",{className:"mt-3 text-xs text-gray-500 space-y-1 w-full",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Formato:"}),(0,o.jsx)("span",{className:"font-medium",children:i})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Dimens\xf5es:"}),(0,o.jsxs)("span",{className:"font-medium",children:[l," \xd7 ",n,"px"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Propor\xe7\xe3o:"}),(0,o.jsxs)("span",{className:"font-medium",children:[p()," (",d.toFixed(2),":1)"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Orienta\xe7\xe3o:"}),(0,o.jsx)("span",{className:"font-medium",children:u?"Quadrado":m?"Vertical":h?"Banner":"Horizontal"})]})]})]})]})}var ea=t(391);function et(e){let{formatConfig:a,children:t,className:r=""}=e,[l,n]=(0,s.useState)(!1),i=(0,s.useRef)(null),[d,m]=(0,s.useState)({width:0,height:0}),{width:u,height:h,nome:x}=a,p=u/h;return(0,s.useEffect)(()=>{if(!i.current)return;let e=()=>{if(i.current){let e=i.current.getBoundingClientRect();m({width:e.width,height:e.height})}};e();let a=new ResizeObserver(e);return a.observe(i.current),()=>{i.current&&a.unobserve(i.current)}},[]),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute top-2 right-2 z-30",children:(0,o.jsx)(c.$,{variant:"outline",size:"sm",className:"h-7 w-7 p-0 bg-white/80 backdrop-blur-sm",onClick:()=>n(!l),children:l?(0,o.jsx)(Q.A,{size:14}):(0,o.jsx)(K.A,{size:14})})}),(0,o.jsx)("div",{ref:i,className:"relative mx-auto border rounded-md shadow-sm overflow-hidden bg-white ".concat(r),children:t}),(0,o.jsx)("div",{className:"mt-2 text-xs text-center text-gray-500",children:(0,o.jsxs)("span",{children:[x," • ",u,"\xd7",h,"px • Propor\xe7\xe3o: ",p.toFixed(2),":1"]})})]})}var eo=t(7959);let es=()=>{try{let e=localStorage.getItem("elementos-compartilhados");if(console.log("Dados brutos carregados do localStorage:",e),!e)return console.log("Nenhum dado encontrado no localStorage"),[];let a=JSON.parse(e);if(!Array.isArray(a))return console.error("Dados carregados n\xe3o s\xe3o um array:",a),[];let t=a.filter(e=>e&&"object"==typeof e?!!(e.id&&e.nome&&Array.isArray(e.elementos))||(console.error("Conjunto com estrutura inv\xe1lida:",e),!1):(console.error("Conjunto inv\xe1lido:",e),!1));return console.log("Conjuntos v\xe1lidos carregados:",t),t}catch(e){return console.error("Erro ao carregar do localStorage:",e),[]}},er=e=>{try{if(!Array.isArray(e))return console.error("Tentativa de salvar dados que n\xe3o s\xe3o um array:",e),!1;let a=e.filter(e=>e&&"object"==typeof e?!!(e.id&&e.nome&&Array.isArray(e.elementos))||(console.error("Conjunto com estrutura inv\xe1lida:",e),!1):(console.error("Conjunto inv\xe1lido:",e),!1)),t=JSON.stringify(a);return console.log("Salvando dados no localStorage:",t),localStorage.setItem("elementos-compartilhados",t),console.log("Dados salvos com sucesso"),!0}catch(e){return console.error("Erro ao salvar no localStorage:",e),!1}},el=(0,Z.v)((e,a)=>({conjuntos:[],carregarConjuntos:()=>{e({conjuntos:es()})},salvarConjuntos:()=>{er(a().conjuntos)},adicionarConjunto:t=>{try{if(!t.nome||!t.nome.trim()){console.error("Tentativa de adicionar conjunto sem nome");return}if(!Array.isArray(t.elementos)||0===t.elementos.length){console.error("Tentativa de adicionar conjunto sem elementos");return}let o=JSON.parse(JSON.stringify(t.elementos)),s={...t,elementos:o,id:"conjunto-".concat(Date.now()),dataCriacao:new Date().toISOString()},r=[...a().conjuntos,s];e({conjuntos:r}),er(r)?(console.log("Conjunto adicionado com sucesso:",s),console.log("Estado atual ap\xf3s adicionar:",r)):console.error("Falha ao salvar conjunto no localStorage")}catch(e){console.error("Erro ao adicionar conjunto:",e)}},removerConjunto:t=>{let o=a().conjuntos.filter(e=>e.id!==t);e({conjuntos:o}),er(o),console.log("Conjunto removido:",t),console.log("Estado atual ap\xf3s remover:",o)},atualizarConjunto:(t,o)=>{let s=a().conjuntos.map(e=>e.id===t?{...e,elementos:o}:e);e({conjuntos:s}),er(s),console.log("Conjunto atualizado:",t),console.log("Estado atual ap\xf3s atualizar:",s)}}));var en=t(6761),ei=t(5835);function ec(e){let{elementos:a,plataforma:t,formato:r,onAplicarElementos:l}=e,[n,d]=(0,s.useState)(""),[m,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!0),{conjuntos:p,adicionarConjunto:f,removerConjunto:g}=el(),{toast:N}=(0,eo.d)();(0,s.useEffect)(()=>{console.log("Dados no localStorage ao montar:",localStorage.getItem("elementos-compartilhados")),el.getState().carregarConjuntos(),console.log("Conjuntos carregados ao montar:",el.getState().conjuntos)},[]),(0,s.useEffect)(()=>{console.log("Conjuntos carregados:",p)},[p]);let b=e=>{try{if(console.log("Aplicando conjunto:",e),console.log("Elementos no conjunto:",e.elementos),!e.elementos||0===e.elementos.length){N({title:"Conjunto vazio",description:"Este conjunto n\xe3o cont\xe9m elementos para aplicar.",variant:"destructive"});return}let a=JSON.parse(JSON.stringify(e.elementos));console.log("Elementos clonados:",a);let t=y(a,e.formato,r);console.log("Elementos adaptados:",t);let o=t.map(e=>({...e,id:e.id||"elemento-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}));l(o),N({title:"Conjunto aplicado",description:'O conjunto "'.concat(e.nome,'" foi aplicado com sucesso com ').concat(o.length," elementos.")}),u(!1)}catch(e){console.error("Erro ao aplicar conjunto:",e),N({title:"Erro ao aplicar conjunto",description:"Ocorreu um erro ao aplicar o conjunto de elementos.",variant:"destructive"})}},y=(e,a,t)=>{if(console.log("Adaptando elementos de ".concat(a," para ").concat(t)),a===t)return JSON.parse(JSON.stringify(e));try{return JSON.parse(JSON.stringify(e)).map((e,a)=>(e.posicaoGrid||(console.warn("Elemento ".concat(a," n\xe3o tem posicaoGrid, criando padr\xe3o")),e.posicaoGrid={x:0,y:0,width:2,height:2}),e.conteudo||(console.warn("Elemento ".concat(a," n\xe3o tem conteudo, criando padr\xe3o")),e.conteudo={}),e.tipo||(console.warn("Elemento ".concat(a," n\xe3o tem tipo, definindo como 'texto'")),e.tipo="texto"),{...e,id:"elemento-".concat(Date.now(),"-").concat(a,"-").concat(Math.random().toString(36).substr(2,9))}))}catch(a){return console.error("Erro ao adaptar elementos:",a),JSON.parse(JSON.stringify(e))}},w=(e,a,t)=>{t.stopPropagation(),console.log("Removendo conjunto:",e),g(e),N({title:"Conjunto removido",description:'O conjunto "'.concat(a,'" foi removido com sucesso.')})};return(0,o.jsxs)(M,{open:m,onOpenChange:u,children:[(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)(T,{asChild:!0,children:(0,o.jsx)(c.$,{variant:"outline",onClick:()=>{x(!0),d("")},children:"Salvar Elementos"})}),(0,o.jsx)(T,{asChild:!0,children:(0,o.jsxs)(c.$,{variant:"outline",onClick:()=>{x(!1),console.log("Conjuntos dispon\xedveis:",p)},disabled:0===p.length,children:["Aplicar Elementos (",p.length,")"]})})]}),(0,o.jsxs)(D,{className:"sm:max-w-md",children:[(0,o.jsx)(F,{children:(0,o.jsx)(L,{children:h?"Salvar Conjunto de Elementos":"Aplicar Conjunto de Elementos"})}),h?(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"nomeConjunto",children:"Nome do Conjunto"}),(0,o.jsx)(j.p,{id:"nomeConjunto",value:n,onChange:e=>d(e.target.value),placeholder:"Ex: Logo e Texto Padr\xe3o"})]}),(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:["Este conjunto salvar\xe1 ",a.length," elementos do formato atual."]}),(0,o.jsx)(c.$,{onClick:()=>{if(!n.trim()){N({title:"Nome obrigat\xf3rio",description:"Por favor, informe um nome para o conjunto de elementos.",variant:"destructive"});return}if(0===a.length){N({title:"Sem elementos",description:"N\xe3o h\xe1 elementos para salvar. Adicione elementos antes de salvar.",variant:"destructive"});return}try{let e=JSON.parse(JSON.stringify(a));console.log("Salvando conjunto:",{nome:n,elementos:e,plataforma:t,formato:r}),f({nome:n,elementos:e,plataforma:t,formato:r}),el.getState().salvarConjuntos();let o=el.getState().conjuntos;console.log("Conjuntos ap\xf3s salvar:",o),N({title:"Conjunto salvo",description:'O conjunto "'.concat(n,'" foi salvo com sucesso.')}),d(""),u(!1)}catch(e){console.error("Erro ao salvar conjunto:",e),N({title:"Erro ao salvar",description:"Ocorreu um erro ao salvar o conjunto. Por favor, tente novamente.",variant:"destructive"})}},className:"w-full",children:"Salvar Conjunto"})]}):(0,o.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:0===p.length?(0,o.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Nenhum conjunto de elementos salvo."}):p.map(e=>(0,o.jsx)(v.Zp,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>b(e),children:(0,o.jsx)(v.Wu,{className:"p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium",children:e.nome}),(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:[e.elementos.length," elementos •"," ",e.plataforma,"/",e.formato]}),(0,o.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Criado"," ",(0,en.m)(new Date(e.dataCriacao),{addSuffix:!0,locale:ei.F})]})]}),(0,o.jsx)(c.$,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:a=>w(e.id,e.nome,a),children:"Remover"})]})})},e.id))})]})]})}var ed=t(4910),em=t(6400),eu=t(1648),eh=t(6086);let ex=(0,t(692).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ep=s.forwardRef((e,a)=>{let{className:t,variant:s,...r}=e;return(0,o.jsx)("div",{ref:a,role:"alert",className:(0,p.cn)(ex({variant:s}),t),...r})});ep.displayName="Alert";let ef=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("h5",{ref:a,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})});ef.displayName="AlertTitle";let eg=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",t),...s})});eg.displayName="AlertDescription";var ev=t(3139);let ej=s.forwardRef((e,a)=>{let{className:t,value:s,...r}=e;return(0,o.jsx)(ev.bL,{ref:a,className:(0,p.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,o.jsx)(ev.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});function eN(e){let{etapaAtual:a,totalEtapas:t,mensagem:s,visivel:r=!0}=e;if(!r)return null;let l=Math.round(a/t*100);return(0,o.jsxs)("div",{className:"space-y-2 my-4",children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsxs)("span",{children:["Progresso: ",l,"%"]}),(0,o.jsxs)("span",{children:["Etapa ",a," de ",t]})]}),(0,o.jsx)(ej,{value:l,className:"h-2"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:s})]})}ej.displayName=ev.bL.displayName;var eb=t(9161),ey=t(2980);let ew=ey.bL;ey.l9;let eC=ey.ZL,eS=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(ey.hJ,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});eS.displayName=ey.hJ.displayName;let eA=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsxs)(eC,{children:[(0,o.jsx)(eS,{}),(0,o.jsx)(ey.UC,{ref:a,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});eA.displayName=ey.UC.displayName;let ek=e=>{let{className:a,...t}=e;return(0,o.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};ek.displayName="AlertDialogHeader";let eE=e=>{let{className:a,...t}=e;return(0,o.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eE.displayName="AlertDialogFooter";let ez=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(ey.hE,{ref:a,className:(0,p.cn)("text-lg font-semibold",t),...s})});ez.displayName=ey.hE.displayName;let eM=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(ey.VY,{ref:a,className:(0,p.cn)("text-sm text-muted-foreground",t),...s})});eM.displayName=ey.VY.displayName;let eT=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(ey.rc,{ref:a,className:(0,p.cn)((0,c.r)(),t),...s})});eT.displayName=ey.rc.displayName;let eR=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(ey.ZD,{ref:a,className:(0,p.cn)((0,c.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});function eO(e){let{elementos:a,plataformaAtual:t,formatoAtual:r,onAplicarElementos:n}=e,{toast:i}=(0,eo.d)(),[d,m]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(0),[j,N]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),[S,A]=(0,s.useState)(!1),[E,z]=(0,s.useState)([]),R=(e,a)=>{try{let t=(0,ea.DS)(e,a);return t&&t.elementosPadrao&&t.elementosPadrao.length>0}catch(e){return!1}};(0,s.useEffect)(()=>{O()},[]);let O=()=>{try{let e=localStorage.getItem("elementos-compartilhados"),t=[];if(e){let a=JSON.parse(e);if(Array.isArray(a)&&a.length>0){for(let e of a)Array.isArray(e.elementos)&&e.elementos.length>0&&(t=t.concat(e.elementos));console.log("Elementos pr\xe9-carregados do localStorage:",t.length)}}let o=t.map(e=>e.tipo);if(["texto","imagem","botao","cta","logo"].forEach(e=>{if(!o.includes(e)){console.log("Adicionando elemento padr\xe3o para o tipo: ".concat(e));let a={id:"padrao-".concat(e,"-").concat(Date.now()),tipo:e,posicaoGrid:{x:0,y:0,width:2,height:2},conteudo:"texto"===e?{texto:"Texto de exemplo",fontSize:"16px",color:"#000000",textAlign:"center"}:"imagem"===e?{src:"",alt:"Imagem"}:"logo"===e?{src:"",alt:"Logo"}:"botao"===e||"cta"===e?{texto:"Clique aqui",backgroundColor:"#0070f3",color:"#ffffff"}:{},camada:10};t.push(a)}}),a&&a.length>0){let e=JSON.parse(JSON.stringify(a));t=t.concat(e),console.log("Adicionados elementos do editor atual:",e.length)}return z(t),t}catch(e){return console.error("Erro ao carregar elementos do localStorage:",e),[]}},P=e=>{if(!E.length)return null;let a=E.filter(a=>a.tipo===e);if(a.length>0){let e=a[Math.floor(Math.random()*a.length)];if(e.conteudo)return{...e.conteudo}}return null},J=()=>{let e=[];ea.LG.forEach(a=>{let o=(0,ea.M2)(a.id);console.log("Formatos encontrados para ".concat(a.id,":"),o.length),o.forEach(o=>{R(a.id,o.nome)&&(a.id!==t||o.nome!==r)&&e.push({plataforma:a.id,formato:o.nome,nome:"".concat(a.nome," - ").concat(o.nome),largura:o.largura,altura:o.altura,selecionado:!1})})}),m(e),console.log("Inicializados ".concat(e.length," formatos dispon\xedveis")),0===e.length&&i({title:"Aviso",description:"N\xe3o foram encontrados formatos adicionais para gerar sugest\xf5es.",variant:"default"})},V=(0,eb.useMutation)({mutationFn:async e=>{let a=await fetch("/api/posicionamento-elementos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elementos:e.elementos,formatoOrigem:e.formatoOrigem,formatosDestino:e.formatosDestino})});if(!a.ok)throw Error((await a.json()).error||"Erro ao obter sugest\xf5es da API");let t=await a.json();if(!t.sugestoes||!Array.isArray(t.sugestoes))throw Error("Formato de resposta inv\xe1lido da API");return t},onSuccess:e=>{if(0===e.sugestoes.length){i({title:"Aviso",description:"N\xe3o foram geradas sugest\xf5es. Tente novamente.",variant:"default"}),g(0);return}p(e.sugestoes||[]),g(3),N("Sugest\xf5es geradas com sucesso!"),i({title:"Sucesso",description:"".concat(e.sugestoes.length," sugest\xf5es geradas com sucesso!"),variant:"default"})},onError:e=>{console.error("Erro ao gerar sugest\xf5es:",e),i({title:"Erro",description:"N\xe3o foi poss\xedvel gerar sugest\xf5es. Tente novamente.",variant:"destructive"}),g(0),N("")}}),B=async()=>{if(!a||0===a.length){i({title:"Erro",description:"N\xe3o h\xe1 elementos para gerar sugest\xf5es.",variant:"destructive"});return}let e=d.filter(e=>e.selecionado);if(0===e.length){i({title:"Aviso",description:"Selecione pelo menos um formato para gerar.",variant:"default"});return}g(1),N("Preparando elementos...");let o=(0,ea.DS)(t,r);if(!o){i({title:"Erro",description:"N\xe3o foi poss\xedvel obter a configura\xe7\xe3o do formato atual.",variant:"destructive"});return}let s={plataforma:t,formato:r,largura:o.width||1080,altura:o.height||1080},l=e.map(e=>({plataforma:e.plataforma,formato:e.formato,largura:e.largura,altura:e.altura}));g(2),N("Consultando IA para sugest\xf5es de posicionamento...");try{let e=a.map(e=>({id:e.id||"elemento-".concat(Date.now()),tipo:e.tipo||"texto",posicaoGrid:e.posicaoGrid||{x:0,y:0,width:2,height:2},conteudo:e.conteudo||{},camada:e.camada||10}));V.mutate({elementos:e,formatoOrigem:s,formatosDestino:l})}catch(e){console.error("Erro ao preparar dados para a API:",e),i({title:"Erro",description:"Ocorreu um erro ao preparar os dados. Tente novamente.",variant:"destructive"}),g(0)}},$=e=>{if(a&&e)try{var t,o;console.log("Aplicando sugest\xe3o:",e);let a=(0,ea.DS)(e.formato.plataforma,e.formato.formato);if(!a){i({title:"Erro",description:"Configura\xe7\xe3o do formato ".concat(e.formato.plataforma,"/").concat(e.formato.formato," n\xe3o encontrada."),variant:"destructive"});return}let s=(null===(t=a.grid)||void 0===t?void 0:t.columns)||12,r=(null===(o=a.grid)||void 0===o?void 0:o.rows)||12,l=a.width/s,c=a.height/r,d=e.elementos.map(e=>{var a,t,o,s,r,n,i,d,m,u,h,x,p,f,g;let v=null!==(x=null===(a=e.posicao)||void 0===a?void 0:a.x)&&void 0!==x?x:0,j=null!==(p=null===(t=e.posicao)||void 0===t?void 0:t.y)&&void 0!==p?p:0,N=null!==(f=null===(o=e.dimensoes)||void 0===o?void 0:o.largura)&&void 0!==f?f:100,b=null!==(g=null===(s=e.dimensoes)||void 0===s?void 0:s.altura)&&void 0!==g?g:100,y=Math.floor(v/l),w=Math.floor(j/c),C=Math.max(1,Math.floor(N/l)),S=Math.max(1,Math.floor(b/c)),A="elemento-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),k=P(e.tipo);return{id:A,tipo:e.tipo||"texto",posicaoGrid:{x:y,y:w,width:C,height:S},conteudo:k||{texto:"texto"===e.tipo?(null===(r=e.conteudo)||void 0===r?void 0:r.texto)||"Texto":"",src:"imagem"===e.tipo||"logo"===e.tipo?(null===(n=e.conteudo)||void 0===n?void 0:n.src)||"":void 0,fontSize:"texto"===e.tipo?(null===(i=e.conteudo)||void 0===i?void 0:i.fontSize)||"16px":void 0,color:"texto"===e.tipo?(null===(d=e.conteudo)||void 0===d?void 0:d.color)||"#000000":void 0,backgroundColor:"botao"===e.tipo||"cta"===e.tipo?(null===(m=e.conteudo)||void 0===m?void 0:m.backgroundColor)||"#0070f3":void 0,textAlign:"texto"===e.tipo?(null===(u=e.conteudo)||void 0===u?void 0:u.textAlign)||"center":void 0,alt:"imagem"===e.tipo?(null===(h=e.conteudo)||void 0===h?void 0:h.alt)||"Imagem":void 0},camada:e.camada||10}});n(d,e.formato.formato,e.formato.plataforma),i({title:"Sucesso",description:"Elementos aplicados ao formato ".concat(e.formato.formato,"."),variant:"default"}),h(!1)}catch(e){console.error("Erro ao aplicar sugest\xe3o:",e),i({title:"Erro",description:"N\xe3o foi poss\xedvel aplicar a sugest\xe3o.",variant:"destructive"})}},_=()=>{if(x&&0!==x.length)try{let e=0;x.forEach(a=>{try{var t,o;let s=(0,ea.DS)(a.formato.plataforma,a.formato.formato);if(!s){console.log({plataforma:a.formato.plataforma,formato:a.formato.formato}),console.error("Configura\xe7\xe3o do formato ".concat(a.formato.plataforma,"/").concat(a.formato.formato," n\xe3o encontrada."));return}let r=(null===(t=s.grid)||void 0===t?void 0:t.columns)||12,l=(null===(o=s.grid)||void 0===o?void 0:o.rows)||12,i=s.width/r,c=s.height/l,d=a.elementos.map(e=>{var a,t,o,s,r,l,n,d,m,u,h,x,p,f,g;let v=null!==(x=null===(a=e.posicao)||void 0===a?void 0:a.x)&&void 0!==x?x:0,j=null!==(p=null===(t=e.posicao)||void 0===t?void 0:t.y)&&void 0!==p?p:0,N=null!==(f=null===(o=e.dimensoes)||void 0===o?void 0:o.largura)&&void 0!==f?f:100,b=null!==(g=null===(s=e.dimensoes)||void 0===s?void 0:s.altura)&&void 0!==g?g:100,y=Math.floor(v/i),w=Math.floor(j/c),C=Math.max(1,Math.floor(N/i)),S=Math.max(1,Math.floor(b/c)),A="elemento-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),k=P(e.tipo);return{id:A,tipo:e.tipo||"texto",posicaoGrid:{x:y,y:w,width:C,height:S},conteudo:k||{texto:"texto"===e.tipo?(null===(r=e.conteudo)||void 0===r?void 0:r.texto)||"Texto":"",src:"imagem"===e.tipo||"logo"===e.tipo?(null===(l=e.conteudo)||void 0===l?void 0:l.src)||"":void 0,fontSize:"texto"===e.tipo?(null===(n=e.conteudo)||void 0===n?void 0:n.fontSize)||"16px":void 0,color:"texto"===e.tipo?(null===(d=e.conteudo)||void 0===d?void 0:d.color)||"#000000":void 0,backgroundColor:"botao"===e.tipo||"cta"===e.tipo?(null===(m=e.conteudo)||void 0===m?void 0:m.backgroundColor)||"#0070f3":void 0,textAlign:"texto"===e.tipo?(null===(u=e.conteudo)||void 0===u?void 0:u.textAlign)||"center":void 0,alt:"imagem"===e.tipo?(null===(h=e.conteudo)||void 0===h?void 0:h.alt)||"Imagem":void 0},camada:e.camada||10}});n(d,a.formato.formato,a.formato.plataforma),e++}catch(e){console.error("Erro ao aplicar sugest\xe3o para ".concat(a.formato.formato,":"),e)}}),i({title:"Sucesso",description:"".concat(e," de ").concat(x.length," formatos aplicados com sucesso."),variant:"default"}),h(!1)}catch(e){console.error("Erro ao aplicar todas as sugest\xf5es:",e),i({title:"Erro",description:"Ocorreu um erro ao aplicar todas as sugest\xf5es.",variant:"destructive"})}},W=e=>{let a=[...d];a[e].selecionado=!a[e].selecionado,m(a)},Z=e=>{C(e),y(!0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(M,{open:u,onOpenChange:e=>{h(e),e&&(J(),g(0),p([]),O())},children:[(0,o.jsx)(T,{asChild:!0,children:(0,o.jsx)(c.$,{variant:"outline",children:"Gerar M\xfaltiplos Formatos"})}),(0,o.jsxs)(D,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)(F,{children:[(0,o.jsx)(L,{children:"Gerar M\xfaltiplos Formatos"}),(0,o.jsx)(I,{children:"Selecione os formatos que deseja gerar a partir dos elementos atuais."})]}),f<3?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.tU,{defaultValue:"all",children:[(0,o.jsxs)(l.j7,{className:"grid grid-cols-3 gap-2 mb-4 h-[120px]",children:[(0,o.jsx)(l.Xi,{value:"all",children:"Todos"}),ea.LG.map(e=>(0,o.jsx)(l.Xi,{value:e.id,children:e.nome},e.id))]}),(0,o.jsx)(l.av,{value:"all",className:"space-y-4",children:(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:d.map((e,a)=>(0,o.jsxs)(v.Zp,{children:[(0,o.jsxs)(v.aR,{className:"pb-2",children:[(0,o.jsx)(v.ZB,{className:"text-sm font-medium",children:e.nome}),(0,o.jsxs)(v.BT,{className:"text-xs",children:[e.largura,"x",e.altura]}),(0,o.jsx)("div",{className:"mt-2 rounded bg-gray-50 mx-auto",style:{width:"80%",aspectRatio:"".concat(e.largura," / ").concat(e.altura),maxHeight:"80px"}})]}),(0,o.jsx)(v.wL,{children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(k.S,{id:"formato-".concat(a),checked:e.selecionado,onCheckedChange:()=>W(a)}),(0,o.jsx)("label",{htmlFor:"formato-".concat(a),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Selecionar"})]})})]},"".concat(e.plataforma,"-").concat(e.formato)))})}),ea.LG.map(e=>(0,o.jsx)(l.av,{value:e.id,className:"space-y-4",children:(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:d.filter(a=>a.plataforma===e.id).map((e,a)=>{let t=d.findIndex(a=>a.plataforma===e.plataforma&&a.formato===e.formato);return(0,o.jsxs)(v.Zp,{children:[(0,o.jsxs)(v.aR,{className:"pb-2",children:[(0,o.jsx)(v.ZB,{className:"text-sm font-medium",children:e.nome}),(0,o.jsxs)(v.BT,{className:"text-xs",children:[e.largura,"x",e.altura]}),(0,o.jsx)("div",{className:"mt-2 border rounded bg-gray-50 mx-auto",style:{width:"80%",aspectRatio:"".concat(e.largura," / ").concat(e.altura),maxHeight:"80px"}})]}),(0,o.jsx)(v.wL,{children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(k.S,{id:"formato-tab-".concat(t),checked:e.selecionado,onCheckedChange:()=>W(t)}),(0,o.jsx)("label",{htmlFor:"formato-tab-".concat(t),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Selecionar"})]})})]},"".concat(e.plataforma,"-").concat(e.formato))})})},e.id))]}),(0,o.jsx)(eN,{etapaAtual:f,totalEtapas:3,mensagem:j,visivel:f>0}),(0,o.jsxs)(G,{children:[(0,o.jsx)(c.$,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),(0,o.jsx)(c.$,{onClick:B,disabled:f>0&&f<3,children:f>0?"Gerando...":"Gerar Sugest\xf5es"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-lg font-medium",children:"Sugest\xf5es Geradas"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map((e,a)=>(0,o.jsxs)(v.Zp,{children:[(0,o.jsxs)(v.aR,{children:[(0,o.jsxs)(v.ZB,{className:"text-sm",children:[e.formato.plataforma," -"," ",e.formato.formato]}),(0,o.jsxs)(v.BT,{children:[e.formato.largura,"x",e.formato.altura," (",e.elementos.length," elementos)"]})]}),(0,o.jsx)(v.Wu,{children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"border rounded-md p-2 bg-gray-50 relative",style:{width:"100%",aspectRatio:"".concat(e.formato.largura," / ").concat(e.formato.altura),maxHeight:e.formato.altura>e.formato.largura?"200px":"150px",overflow:"hidden"},children:e.elementos.map((a,t)=>{a.tipo;let s=a.tipo,r="",l="",n="",i=P(a.tipo);return i&&("texto"===a.tipo&&i.texto?(s=i.texto,n=i.color||""):("imagem"===a.tipo||"logo"===a.tipo)&&i.src?r=i.src:("botao"===a.tipo||"cta"===a.tipo)&&i&&(i.texto&&(s=i.texto),i.backgroundColor&&(l=i.backgroundColor),i.color&&(n=i.color))),(0,o.jsx)("div",{className:"absolute flex items-center justify-center text-xs overflow-hidden",style:{left:"".concat(a.posicao.x/e.formato.largura*100,"%"),top:"".concat(a.posicao.y/e.formato.altura*100,"%"),width:"".concat(a.dimensoes.largura/e.formato.largura*100,"%"),height:"".concat(a.dimensoes.altura/e.formato.altura*100,"%"),zIndex:a.camada||10,fontSize:"9px",opacity:.85,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",...l?{backgroundColor:l}:{},...n?{color:n}:{}},children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-1",children:["imagem"===a.tipo&&!r&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"imagem"===a.tipo&&r&&(0,o.jsx)("img",{src:r,alt:"Preview",className:"w-full h-full object-cover",style:{minWidth:"100%",minHeight:"100%"}}),"logo"===a.tipo&&!r&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"logo"===a.tipo&&r&&(0,o.jsx)("img",{src:r,alt:"Logo",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"100%"}}),("botao"===a.tipo||"cta"===a.tipo)&&(0,o.jsx)("div",{className:"flex items-center justify-center w-full h-full rounded-sm border border-current p-1",children:(0,o.jsx)("span",{className:"block truncate text-center w-full",children:s.length>20?s.substring(0,20)+"...":s})}),"texto"===a.tipo&&(0,o.jsx)("span",{className:"block truncate text-center w-full",children:s.length>20?s.substring(0,20)+"...":s})]})},t)})}),(0,o.jsx)("div",{className:"mt-2 text-xs",children:(0,o.jsxs)("details",{className:"border rounded-md p-2",children:[(0,o.jsx)("summary",{className:"font-medium cursor-pointer",children:"Detalhes dos elementos"}),(0,o.jsx)("div",{className:"mt-2 space-y-2",children:e.elementos.map((e,a)=>{var t;return(0,o.jsxs)("div",{className:"border-b pb-1 last:border-0",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat("imagem"===e.tipo?"bg-blue-400":"texto"===e.tipo?"bg-green-400":"botao"===e.tipo||"cta"===e.tipo?"bg-orange-400":"logo"===e.tipo?"bg-purple-400":"bg-gray-400")}),(0,o.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]}),(null===(t=e.conteudo)||void 0===t?void 0:t.texto)&&(0,o.jsxs)("div",{className:"ml-4 text-[10px] text-gray-600 truncate",children:['"',e.conteudo.texto.substring(0,30),e.conteudo.texto.length>30?"...":"",'"']}),(0,o.jsxs)("div",{className:"ml-4 text-[10px] text-gray-500",children:["Posi\xe7\xe3o:"," ",Math.round(e.posicao.x),",",Math.round(e.posicao.y)," | Tamanho:"," ",Math.round(e.dimensoes.largura),"\xd7",Math.round(e.dimensoes.altura)]})]},a)})})]})})]})}),(0,o.jsx)(v.wL,{children:(0,o.jsx)(c.$,{onClick:()=>Z(e),className:"w-full",children:"Aplicar este formato"})})]},a))})]}),(0,o.jsxs)(G,{children:[(0,o.jsx)(c.$,{variant:"outline",onClick:()=>g(0),children:"Voltar"}),(0,o.jsx)(c.$,{variant:"outline",onClick:()=>h(!1),children:"Fechar"}),(0,o.jsx)(c.$,{onClick:()=>{A(!0)},children:"Aplicar Todos"})]})]})]})]}),(0,o.jsx)(ew,{open:b,onOpenChange:y,children:(0,o.jsxs)(eA,{children:[(0,o.jsxs)(ek,{children:[(0,o.jsx)(ez,{children:"Aplicar elementos ao formato"}),(0,o.jsxs)(eM,{children:["Voc\xea est\xe1 prestes a aplicar"," ",(null==w?void 0:w.elementos.length)||0," elementos ao formato"," ",null==w?void 0:w.formato.plataforma," -"," ",null==w?void 0:w.formato.formato,". Isto substituir\xe1 os elementos existentes neste formato."]})]}),w&&(0,o.jsxs)("div",{className:"my-4",children:[(0,o.jsx)("div",{className:"text-sm font-medium mb-2",children:"Visualiza\xe7\xe3o dos elementos:"}),(0,o.jsx)("div",{className:"border rounded-md p-2 bg-gray-50 relative",style:{width:"100%",aspectRatio:"".concat(w.formato.largura," / ").concat(w.formato.altura),maxHeight:w.formato.altura>w.formato.largura?"250px":"200px",overflow:"hidden"},children:w.elementos.map((e,a)=>{e.tipo;let t=e.tipo,s="",r="",l="",n=P(e.tipo);return n&&("texto"===e.tipo&&n.texto?(t=n.texto,l=n.color||""):("imagem"===e.tipo||"logo"===e.tipo)&&n.src?s=n.src:("botao"===e.tipo||"cta"===e.tipo)&&n&&(n.texto&&(t=n.texto),n.backgroundColor&&(r=n.backgroundColor),n.color&&(l=n.color))),(0,o.jsx)("div",{className:"absolute flex items-center justify-center text-xs overflow-hidden",style:{left:"".concat(e.posicao.x/w.formato.largura*100,"%"),top:"".concat(e.posicao.y/w.formato.altura*100,"%"),width:"".concat(e.dimensoes.largura/w.formato.largura*100,"%"),height:"".concat(e.dimensoes.altura/w.formato.altura*100,"%"),zIndex:e.camada||10,fontSize:"9px",opacity:.85,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",...r?{backgroundColor:r}:{},...l?{color:l}:{}},children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-1",children:["imagem"===e.tipo&&!s&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"imagem"===e.tipo&&s&&(0,o.jsx)("img",{src:s,alt:"Preview",className:"w-full h-full object-cover",style:{minWidth:"100%",minHeight:"100%"}}),"logo"===e.tipo&&!s&&(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"logo"===e.tipo&&s&&(0,o.jsx)("img",{src:s,alt:"Logo",className:"w-full h-full object-contain",style:{maxWidth:"100%",maxHeight:"100%"}}),("botao"===e.tipo||"cta"===e.tipo)&&(0,o.jsx)("div",{className:"flex items-center justify-center w-full h-full rounded-sm border border-current p-1",children:(0,o.jsx)("span",{className:"block truncate text-center w-full",children:t.length>20?t.substring(0,20)+"...":t})}),"texto"===e.tipo&&(0,o.jsx)("span",{className:"block truncate text-center w-full",children:t.length>20?t.substring(0,20)+"...":t})]})},a)})}),(0,o.jsxs)("div",{className:"mt-4 space-y-1 text-xs",children:[(0,o.jsx)("div",{className:"font-medium",children:"Elementos a serem aplicados:"}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-2 border rounded p-2",children:w.elementos.map((e,a)=>(0,o.jsx)("div",{className:"border-b pb-1 last:border-0",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 "}),(0,o.jsx)("span",{className:"font-medium capitalize",children:e.tipo})]})},a))})]})]}),(0,o.jsxs)(eE,{children:[(0,o.jsx)(eR,{children:"Cancelar"}),(0,o.jsx)(eT,{onClick:()=>{w&&($(w),y(!1),C(null))},children:"Aplicar Elementos"})]})]})}),(0,o.jsx)(ew,{open:S,onOpenChange:A,children:(0,o.jsxs)(eA,{children:[(0,o.jsxs)(ek,{children:[(0,o.jsx)(ez,{children:"Aplicar todos os formatos"}),(0,o.jsxs)(eM,{children:["Voc\xea est\xe1 prestes a aplicar ",x.length," formatos diferentes. Isto substituir\xe1 os elementos existentes em cada um destes formatos."]})]}),(0,o.jsxs)("div",{className:"my-4",children:[(0,o.jsx)("div",{className:"text-sm font-medium mb-2",children:"Formatos que ser\xe3o modificados:"}),(0,o.jsx)("div",{className:"max-h-[300px] overflow-y-auto border rounded p-3",children:(0,o.jsx)("ul",{className:"space-y-2",children:x.map((e,a)=>(0,o.jsxs)("li",{className:"flex items-center justify-between border-b last:border-b-0 pb-2 last:pb-0",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2 bg-blue-500"}),(0,o.jsxs)("span",{className:"font-medium",children:[e.formato.plataforma," -"," ",e.formato.formato]})]}),(0,o.jsxs)("span",{className:"text-xs text-gray-500",children:[e.formato.largura,"\xd7",e.formato.altura," •"," ",e.elementos.length," elementos"]})]},a))})})]}),(0,o.jsxs)(eE,{children:[(0,o.jsx)(eR,{children:"Cancelar"}),(0,o.jsx)(eT,{onClick:()=>{_(),A(!1)},children:"Aplicar Todos os Formatos"})]})]})})]})}function eD(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),{toast:t}=(0,eo.d)(),d=e.id,[m,u]=(0,s.useState)("instagram"),[h,x]=(0,s.useState)(""),[p,f]=(0,s.useState)([]),[v,j]=(0,s.useState)(null),[N,b]=(0,s.useState)(!1),[y,w]=(0,s.useState)("preview"),[C,S]=(0,s.useState)(!0),[A,k]=(0,s.useState)(null),{elementos:E,setElementos:z,resetElementos:M,salvarVersao:T,versoes:R}=H(),{campanhas:O,campanhaAtual:D,selecionarCampanha:F,adicionarAsset:G,obterAsset:L,atualizarCampanha:I}=(0,em.V)();(0,s.useEffect)(()=>{d&&F(d)},[d,F]),(0,s.useEffect)(()=>{d&&O.length>0&&!O.some(e=>e.id===d)&&(t({title:"Campanha n\xe3o encontrada",description:"A campanha que voc\xea est\xe1 tentando editar n\xe3o existe.",variant:"destructive"}),a.push("/campanhas"))},[d,O,a,t]),(0,s.useEffect)(()=>{if(D&&!D.plataformas.includes(m)&&D.plataformas.length>0){u(D.plataformas[0]);return}let e=(0,ea.M2)(m);f(e),h&&e.some(e=>e.nome===h)||x(e.length>0?e[0].nome:"")},[m,D,h]),(0,s.useEffect)(()=>{if(h){let e=(0,ea.DS)(m,h);if(j(e),d){let a=L(d,m,h);a&&a.elementos.length>0?z(a.elementos):e&&e.elementosPadrao?M(e.elementosPadrao):M([])}}},[h,m,M,d,L,z]),(0,s.useEffect)(()=>{if(!C||!d||!m||!h||!v)return;let e=setTimeout(()=>{G(d,{plataforma:m,formato:h,elementos:E}),I(d,{}),k(new Date().toLocaleTimeString())},2e3);return()=>clearTimeout(e)},[E,C,d,m,h,v,G,I]);let P=()=>{if(!d||!m||!h){t({title:"Erro ao salvar",description:"Selecione uma plataforma e formato antes de salvar.",variant:"destructive"});return}try{T({plataforma:m,formato:h,elementos:[...E],timestamp:new Date().toISOString()}),G(d,{plataforma:m,formato:h,elementos:E}),I(d,{}),k(new Date().toLocaleTimeString()),t({title:"Vers\xe3o salva",description:"A vers\xe3o atual foi salva com sucesso."})}catch(e){console.error("Erro ao salvar vers\xe3o:",e),t({title:"Erro ao salvar",description:"Ocorreu um erro ao salvar a vers\xe3o.",variant:"destructive"})}},J=(e,a)=>{if(!a)return e;console.log("Adaptando elementos para o formato:",a.nome);try{let t=JSON.parse(JSON.stringify(e));return console.log("Elementos clonados:",t),t.map((e,t)=>{if(!e.posicaoGrid)return console.warn("Elemento ".concat(t," n\xe3o tem posicaoGrid, criando padr\xe3o")),e.posicaoGrid={x:0,y:0,width:2,height:2},e;let o={...e.posicaoGrid};return o.x+o.width>a.grid.columns&&(o.width>a.grid.columns?(o.width=a.grid.columns,o.x=0):o.x=a.grid.columns-o.width),o.y+o.height>a.grid.rows&&(o.height>a.grid.rows?(o.height=a.grid.rows,o.y=0):o.y=a.grid.rows-o.height),{...e,id:"elemento-".concat(Date.now(),"-").concat(t,"-").concat(Math.random().toString(36).substr(2,9)),posicaoGrid:o}})}catch(a){return console.error("Erro ao adaptar elementos para o formato:",a),e}};return(0,o.jsxs)("div",{className:"container px-4 py-6 mx-auto md:px-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold",children:D?"Editor: ".concat(D.nome):"Editor de Pe\xe7as"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"text-sm text-gray-500",children:A&&(0,o.jsxs)("span",{children:["\xdaltimo salvamento: ",A]})}),(0,o.jsxs)(c.$,{onClick:P,disabled:!v,children:[(0,o.jsx)(eu.A,{className:"w-4 h-4 mr-2"}),"Salvar Vers\xe3o"]})]})]}),!D&&(0,o.jsxs)(ep,{className:"mb-6",children:[(0,o.jsx)(eh.A,{className:"h-4 w-4"}),(0,o.jsx)(ef,{children:"Campanha n\xe3o encontrada"}),(0,o.jsx)(eg,{children:"A campanha que voc\xea est\xe1 tentando editar n\xe3o existe ou n\xe3o foi carregada corretamente."})]}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,o.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,o.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,o.jsx)("h2",{className:"mb-4 text-lg font-medium",children:"Plataforma e Formato"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"platform",children:"Plataforma"}),(0,o.jsxs)(n.l6,{value:m,onValueChange:u,children:[(0,o.jsx)(n.bq,{id:"platform",children:(0,o.jsx)(n.yv,{placeholder:"Selecione a plataforma"})}),(0,o.jsx)(n.gC,{children:null==D?void 0:D.plataformas.map(e=>(0,o.jsx)(n.eb,{value:e,children:e},e))})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(i.J,{htmlFor:"format",children:"Formato"}),(0,o.jsxs)(n.l6,{value:h,onValueChange:x,disabled:0===p.length,children:[(0,o.jsx)(n.bq,{id:"format",children:(0,o.jsx)(n.yv,{placeholder:"Selecione o formato"})}),(0,o.jsx)(n.gC,{children:p.map(e=>(0,o.jsx)(n.eb,{value:e.nome,children:e.nome},e.nome))})]})]})]}),v&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,o.jsxs)("p",{children:["Tamanho: ",v.width," \xd7 ",v.height," px"]}),(0,o.jsxs)("p",{children:["Grid: ",v.grid.columns," \xd7 ",v.grid.rows]})]}),(0,o.jsx)(ee,{formatConfig:v})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)(i.J,{htmlFor:"autoSave",className:"cursor-pointer",children:"Auto-salvar"}),(0,o.jsx)("input",{type:"checkbox",id:"autoSave",checked:C,onChange:e=>S(e.target.checked),className:"w-4 h-4"})]}),(0,o.jsx)(c.$,{className:"w-full",variant:"outline",onClick:P,disabled:!v,children:"Salvar Vers\xe3o Atual"}),(0,o.jsx)(c.$,{className:"w-full",variant:"outline",onClick:()=>b(!N),disabled:0===R.length,children:N?"Ocultar Hist\xf3rico":"Ver Hist\xf3rico de Vers\xf5es"}),N&&(0,o.jsx)(Y,{})]}),(0,o.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,o.jsx)("h2",{className:"mb-4 text-lg font-medium",children:"Compartilhar Elementos"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Salve e reutilize elementos entre diferentes formatos."}),(0,o.jsx)(ec,{elementos:E,plataforma:m,formato:h,onAplicarElementos:e=>{try{if(console.log("Recebendo elementos para aplicar:",e),!e||0===e.length){t({title:"Sem elementos",description:"N\xe3o h\xe1 elementos para aplicar.",variant:"destructive"});return}let a=J(e,v);console.log("Elementos adaptados para o formato atual:",a),z(a),t({title:"Elementos aplicados",description:"".concat(a.length," elementos foram aplicados com sucesso.")})}catch(e){console.error("Erro ao aplicar elementos:",e),t({title:"Erro ao aplicar elementos",description:"Ocorreu um erro ao aplicar os elementos.",variant:"destructive"})}}}),(0,o.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,o.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Gere m\xfaltiplos formatos com ajuda de IA."}),(0,o.jsx)(eO,{elementos:E,plataformaAtual:m,formatoAtual:h,onAplicarElementos:(e,a,o)=>{if(console.log("Aplicando elementos ao formato:",a,o,e),!(0,ea.Ss)("".concat(o,"/").concat(a))){console.log("Formato inv\xe1lido:",a,p),t({title:"Formato inv\xe1lido",description:"O formato ".concat(a," n\xe3o est\xe1 dispon\xedvel para esta plataforma."),variant:"destructive"});return}x(a),setTimeout(()=>{let s=(0,ea.DS)(o,a);if(s){let r=J(e,s);z(r),C&&d&&(G(d,{plataforma:o,formato:a,elementos:r}),k(new Date().toLocaleTimeString())),t({title:"Elementos aplicados",description:"".concat(r.length," elementos foram aplicados ao formato ").concat(a,".")})}},100)}})]})]})]}),(0,o.jsx)(W,{plataforma:m,formato:h,formatConfig:v,elementos:E})]}),(0,o.jsx)("div",{className:"lg:col-span-9",children:(0,o.jsxs)(l.tU,{value:y,onValueChange:w,children:[(0,o.jsxs)(l.j7,{className:"mb-4",children:[(0,o.jsx)(l.Xi,{value:"preview",children:"Preview"}),(0,o.jsx)(l.Xi,{value:"elementos",children:"Elementos"})]}),(0,o.jsx)(l.av,{value:"preview",className:"p-4 border rounded-lg",children:v?(0,o.jsx)(et,{formatConfig:v,children:(0,o.jsx)(g,{formatConfig:v,elementos:E,onElementosChange:z,editMode:!0})}):(0,o.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Selecione uma plataforma e formato para visualizar"})}),(0,o.jsx)(l.av,{value:"elementos",children:v?(0,o.jsx)(V,{formatConfig:v,elementos:E,setElementos:z}):(0,o.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Selecione uma plataforma e formato para editar elementos"})})]})})]}),(0,o.jsx)(ed.Toaster,{})]})}eR.displayName=ey.ZD.displayName},735:(e,a,t)=>{"use strict";t.d(a,{cn:()=>r});var o=t(1682),s=t(9037);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,o.$)(a))}t(391)},2642:(e,a,t)=>{"use strict";t.d(a,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>n,wL:()=>m});var o=t(7943),s=t(8543),r=t(735);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});l.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"},3467:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var o=t(7943),s=t(8543),r=t(6198),l=t(735);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsxs)(r.bL,{ref:a,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",t),...s,children:[(0,o.jsx)(r.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,o.jsx)(r.Q6,{className:"absolute h-full bg-primary"})}),(0,o.jsx)(r.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});n.displayName=r.bL.displayName},4748:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var o=t(7943),s=t(8543),r=t(735);let l=s.forwardRef((e,a)=>{let{className:t,type:s,...l}=e;return(0,o.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},4910:(e,a,t)=>{"use strict";t.d(a,{Toaster:()=>g});var o=t(7943),s=t(8543),r=t(790),l=t(692),n=t(7571),i=t(735);let c=r.Kq,d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.LM,{ref:a,className:(0,i.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s})});d.displayName=r.LM.displayName;let m=(0,l.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),u=s.forwardRef((e,a)=>{let{className:t,variant:s,...l}=e;return(0,o.jsx)(r.bL,{ref:a,className:(0,i.cn)(m({variant:s}),t),...l})});u.displayName=r.bL.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.rc,{ref:a,className:(0,i.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s})}).displayName=r.rc.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.bm,{ref:a,className:(0,i.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:(0,o.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=r.bm.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.hE,{ref:a,className:(0,i.cn)("text-sm font-semibold",t),...s})});x.displayName=r.hE.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.VY,{ref:a,className:(0,i.cn)("text-sm opacity-90",t),...s})});p.displayName=r.VY.displayName;var f=t(7959);function g(){let{toasts:e}=(0,f.d)();return(0,o.jsxs)(c,{children:[e.map(e=>{let{id:a,title:t,description:s,action:r,...l}=e;return(0,o.jsxs)(u,{...l,children:[(0,o.jsxs)("div",{className:"grid gap-1",children:[t&&(0,o.jsx)(x,{children:t}),s&&(0,o.jsx)(p,{children:s})]}),r,(0,o.jsx)(h,{})]},a)}),(0,o.jsx)(d,{})]})}},6400:(e,a,t)=>{"use strict";t.d(a,{V:()=>r});var o=t(4832),s=t(1635);let r=(0,o.v)()((0,s.Zr)((e,a)=>({campanhas:[],campanhaAtual:null,adicionarCampanha:a=>{let t="campanha-".concat(Date.now()),o={...a,id:t,criadoEm:new Date().toISOString(),modificadoEm:new Date().toISOString(),assets:[]};return e(e=>({campanhas:[...e.campanhas,o],campanhaAtual:o})),t},atualizarCampanha:(a,t)=>{e(e=>{var o;return{campanhas:e.campanhas.map(e=>e.id===a?{...e,...t,modificadoEm:new Date().toISOString()}:e),campanhaAtual:(null===(o=e.campanhaAtual)||void 0===o?void 0:o.id)===a?{...e.campanhaAtual,...t,modificadoEm:new Date().toISOString()}:e.campanhaAtual}})},removerCampanha:a=>{e(e=>{var t;return{campanhas:e.campanhas.filter(e=>e.id!==a),campanhaAtual:(null===(t=e.campanhaAtual)||void 0===t?void 0:t.id)===a?null:e.campanhaAtual}})},selecionarCampanha:t=>{e({campanhaAtual:a().campanhas.find(e=>e.id===t)||null})},adicionarAsset:(a,t)=>{e(e=>{var o;let s=e.campanhas.map(e=>{let o;if(e.id!==a)return e;let s=e.assets.findIndex(e=>e.plataforma===t.plataforma&&e.formato===t.formato);return s>=0?(o=[...e.assets])[s]=t:o=[...e.assets,t],{...e,assets:o,modificadoEm:new Date().toISOString()}}),r=(null===(o=e.campanhaAtual)||void 0===o?void 0:o.id)===a?s.find(e=>e.id===a)||null:e.campanhaAtual;return{campanhas:s,campanhaAtual:r}})},atualizarAsset:(a,t,o,s)=>{e(e=>{var r;let l=e.campanhas.map(e=>{if(e.id!==a)return e;let r=e.assets.map(e=>e.plataforma===t&&e.formato===o?{...e,elementos:s}:e);return{...e,assets:r,modificadoEm:new Date().toISOString()}}),n=(null===(r=e.campanhaAtual)||void 0===r?void 0:r.id)===a?l.find(e=>e.id===a)||null:e.campanhaAtual;return{campanhas:l,campanhaAtual:n}})},obterAsset:(e,t,o)=>{let s=a().campanhas.find(a=>a.id===e);if(s)return s.assets.find(e=>e.plataforma===t&&e.formato===o)}}),{name:"campanhas-store"}))},7032:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>f,gC:()=>p,l6:()=>d,yv:()=>m});var o=t(7943),s=t(8543),r=t(6867),l=t(6331),n=t(4570),i=t(3023),c=t(735);let d=r.bL;r.YJ;let m=r.WT,u=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,o.jsxs)(r.l9,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,(0,o.jsx)(r.In,{asChild:!0,children:(0,o.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.l9.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.PP,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,o.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=r.PP.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.wn,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,o.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=r.wn.displayName;let p=s.forwardRef((e,a)=>{let{className:t,children:s,position:l="popper",...n}=e;return(0,o.jsx)(r.ZL,{children:(0,o.jsxs)(r.UC,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,o.jsx)(h,{}),(0,o.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,o.jsx)(x,{})]})})});p.displayName=r.UC.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.JU,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=r.JU.displayName;let f=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,o.jsxs)(r.q7,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(r.VF,{children:(0,o.jsx)(i.A,{className:"h-4 w-4"})})}),(0,o.jsx)(r.p4,{children:s})]})});f.displayName=r.q7.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=r.wv.displayName},7610:(e,a,t)=>{"use strict";t.d(a,{J:()=>c});var o=t(7943),s=t(8543),r=t(4737),l=t(692),n=t(735);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.b,{ref:a,className:(0,n.cn)(i(),t),...s})});c.displayName=r.b.displayName},7959:(e,a,t)=>{"use strict";t.d(a,{d:()=>u});var o=t(8543);let s={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},r=0,l=new Map,n=(e,a)=>{switch(a.type){case s.ADD_TOAST:return{...e,toasts:[a.toast,...e.toasts].slice(0,5)};case s.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case s.DISMISS_TOAST:{let{toastId:t}=a;return t?h(t):e.toasts.forEach(e=>{h(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case s.REMOVE_TOAST:if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},i=[],c={toasts:[]};function d(e){c=n(c,e),i.forEach(e=>{e(c)})}function m(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>d({type:s.DISMISS_TOAST,toastId:t});return d({type:s.ADD_TOAST,toast:{...a,id:t,open:!0,onOpenChange:e=>{e||o()}}}),{id:t,dismiss:o,update:e=>d({type:s.UPDATE_TOAST,toast:{...e,id:t}})}}function u(){let[e,a]=o.useState(c);return o.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:s.DISMISS_TOAST,toastId:e})}}function h(e){if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),d({type:s.REMOVE_TOAST,toastId:e})},1e6);l.set(e,a)}},8416:(e,a,t)=>{"use strict";t.d(a,{$:()=>c,r:()=>i});var o=t(7943),s=t(8543),r=t(8101),l=t(692),n=t(735);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,a)=>{let{className:t,variant:s,size:l,asChild:c=!1,...d}=e,m=c?r.DX:"button";return(0,o.jsx)(m,{className:(0,n.cn)(i({variant:s,size:l,className:t})),ref:a,...d})});c.displayName="Button"},8595:(e,a,t)=>{"use strict";t.d(a,{S:()=>i});var o=t(7943),s=t(8543),r=t(734),l=t(3023),n=t(735);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.bL,{ref:a,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:(0,o.jsx)(r.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,o.jsx)(l.A,{className:"h-4 w-4"})})})});i.displayName=r.bL.displayName},8850:(e,a,t)=>{Promise.resolve().then(t.bind(t,677))},9124:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>c,av:()=>d,j7:()=>i,tU:()=>n});var o=t(7943),s=t(8543),r=t(4581),l=t(735);let n=r.bL,i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.B8,{ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});i.displayName=r.B8.displayName;let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.l9,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});c.displayName=r.l9.displayName;let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,o.jsx)(r.UC,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});d.displayName=r.UC.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[652,2,844,243,944,194,138,711,391,340,544,358],()=>a(8850)),_N_E=e.O()}]);